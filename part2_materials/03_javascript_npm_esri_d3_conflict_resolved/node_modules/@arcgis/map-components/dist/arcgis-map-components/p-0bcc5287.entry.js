/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */
import{r as i,c as e,h as o,g as r}from"./p-b6370480.js";import{g as s}from"./p-f8e0ca63.js";import{u as n,m as c}from"./p-e0c863fc.js";import{t,X as a}from"./p-2ac726a1.js";import{u as l}from"./p-80e0eabb.js";import{u as d}from"./p-043d42fa.js";import"./p-937ddc5c.js";const h={arrowDown:"esri-icon-arrow-down",arrowUp:"esri-icon-arrow-up",basemap:"esri-icon-basemap",bookmark:"esri-icon-bookmark",calendar:"esri-icon-calendar",checkMark:"esri-icon-check-mark",checkboxUnchecked:"esri-icon-checkbox-unchecked",close:"esri-icon-close",collapse:"esri-icon-collapse",defaultAction:"esri-icon-default-action",description:"esri-icon-description",directions:"esri-icon-directions",dockBottom:"esri-icon-dock-bottom",dockLeft:"esri-icon-dock-left",dockRight:"esri-icon-dock-right",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",download:"esri-icon-download",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",edit:"esri-icon-edit",elevationProfile:"esri-icon-elevation-profile",environmentSettings:"esri-icon-environment-settings",erase:"esri-icon-erase",error:"esri-icon-error",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",gear:"esri-icon-gear",handleHorizontal:"esri-icon-handle-horizontal",handleVertical:"esri-icon-handle-vertical",home:"esri-icon-home",icon:"esri-icon",launchLinkExternal:"esri-icon-launch-link-external",layerList:"esri-icon-layer-list",layers:"esri-icon-layers",left:"esri-icon-left",leftArrows:"esri-icon-left-arrow",leftTriangleArrow:"esri-icon-left-triangle-arrow",lineOfSight:"esri-icon-line-of-sight",link:"esri-icon-link",linkExternal:"esri-icon-link-external",linkHorizontal:"esri-icon-link-horizontal",loadingIndicator:"esri-icon-loading-indicator",locate:"esri-icon-locate",locateCircled:"esri-icon-locate-circled",locked:"esri-icon-locked",mapPin:"esri-icon-map-pin",maximize:"esri-icon-maximize",measure:"esri-icon-measure",measureArea:"esri-icon-measure-area",measureBuildingHeightShadow:"esri-icon-measure-building-height-shadow",measureLine:"esri-icon-measure-line",menu:"esri-icon-menu",minimize:"esri-icon-minimize",minus:"esri-icon-minus",nonVisible:"esri-icon-non-visible",northNavigation:"esri-icon-north-navigation",noticeTriangle:"esri-icon-notice-triangle",organization:"esri-icon-organization",pan:"esri-icon-pan",pan2:"esri-icon-pan2",partlyCloudy:"esri-icon-partly-cloudy",pause:"esri-icon-pause",play:"esri-icon-play",playCircled:"esri-icon-play-circled",plus:"esri-icon-plus",polyline:"esri-icon-polyline",printer:"esri-icon-printer",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",rightArrow:"esri-icon-right-arrow",rightTriangleArrow:"esri-icon-right-triangle-arrow",rotate:"esri-icon-rotate",save:"esri-icon-save",search:"esri-icon-search",settings2:"esri-icon-settings2",slice:"esri-icon-slice",swap:"esri-icon-swap",table:"esri-icon-table",timeClock:"esri-icon-time-clock",tracking:"esri-icon-tracking",trash:"esri-icon-trash",unlockedLinkHorizontal:"esri-icon-unlocked-link-horizontal",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",vertexGps:"esri-icon-vertex-gps",visible:"esri-icon-visible",zoomInFixed:"esri-icon-zoom-in-fixed",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomOutFixed:"esri-icon-zoom-out-fixed",zoomToObject:"esri-icon-zoom-to-object"},p="gps-off",m=c(a),g=class{constructor(o){i(this,o),this.arcgisPropertyChange=e(this,"arcgisPropertyChange",7),this.arcgisReady=e(this,"arcgisReady",7),this.viewModelLocate=e(this,"arcgisSuccess",7),this.viewModelLocateError=e(this,"arcgisError",7),this.manager=d(this),this.messages=n(),this.viewModel=m(this),this.arcgisPropertyChange=l()("state"),this._locate=()=>{const{viewModel:i}=this;"locating"===i.state?i.cancelLocate():i.locate().catch((()=>{}))},this.autoDestroyDisabled=!1,this.geolocationOptions=this.viewModel.geolocationOptions,this.goToLocationDisabled=this.viewModel.goToLocationEnabled,this.graphic=this.viewModel.graphic,this.goToOverride=this.viewModel.goToOverride,this.icon=p,this.label=void 0,this.popupDisabled=this.viewModel.popupEnabled,this.position="top-left",this.referenceElement=void 0,this.scale=this.viewModel.scale,this.state=this.viewModel.state}async cancelLocate(){this.viewModel.cancelLocate()}async destroy(){await this.manager.destroy()}async locate(){return await this.viewModel.locate()}render(){const{viewModel:i,icon:e}=this,{state:r}=i,n="locating"===r,c=n?this.messages.cancel:this.messages.title,a="feature-unsupported"===r,l=void 0===h?p:void 0,d=this._localizeError(this.viewModel?.error);return o("div",{key:"b58afeca0487355a1203087b3ac9650c1ac7ae72",class:t("esri-locate",s.widget)},!a&&o("calcite-button",{key:"e04ea8350cab4f6b1e727fc0a16092f8a8b83090",class:s.widgetButton,disabled:"disabled"===r,"icon-start":n?void 0:e??l,kind:"neutral",label:c,onClick:this._locate,title:c},n?o("calcite-loader",{inline:!0,label:""}):null),d?o("calcite-tooltip",{open:!0,"overlay-positioning":"fixed","reference-element":this.el},d):null)}_localizeError(i){return i instanceof GeolocationPositionError?i.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:i.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable:i instanceof Error?i.message:void 0}static get assetsDirs(){return["assets"]}get el(){return r(this)}};export{g as arcgis_locate}