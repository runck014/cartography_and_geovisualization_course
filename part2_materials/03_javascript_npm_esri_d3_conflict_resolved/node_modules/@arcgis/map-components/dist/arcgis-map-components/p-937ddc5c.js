/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.6
 */
function n(n,e){Array.isArray(e)?n._watchHandles=[...n._watchHandles,...e]:n._watchHandles.push(e)}function e(n){n.el.childElem&&(n.el.childElem.ownedBy=n.el);const e=function({el:n}){for(let e=n.parentElement;e;e=e?.parentElement??null){if(t.has(e.tagName.toLowerCase()))return e;if("ownedBy"in e&&e.ownedBy instanceof HTMLElement&&t.has(e.ownedBy.tagName.toLowerCase()))return e.ownedBy}}(n);if(!e){const e=m(n.referenceElement);return e?(c(e,n,!0),e):void y(n)}return function(n,e){if(n!==e)return!1;const t=n.tagName.toLowerCase();return"arcgis-expand"===t||"arcgis-placement"===t}(e,n.el.parent)||(n.el.parent=e,"arcgis-expand"===e.tagName.toLowerCase()?o(e,n):"arcgis-placement"===e.tagName.toLowerCase()?r(e,n):c(e,n,!1)),e}const t=new Set(["arcgis-map","arcgis-scene","arcgis-expand","arcgis-placement"]);function i(n,e,t="arcgisReady"){const o=n;"boolean"==typeof o.view?.ready?e(o.view):n.addEventListener(t,(o=>o.target===n?i(n,e,t):void 0),{once:!0})}const o=(n,e)=>i(n,(t=>{e.el.childElem&&"object"==typeof n.content&&n.content?.append(e.el.childElem),n.expandIcon=e.icon||e.widget?.icon||n.expandIcon,e.position=n.position,e.el.view=t})),r=(n,e)=>i(n,(t=>{e.el.childElem&&e.el.append(e.el.childElem),e.position=n.position,e.el.view=t})),c=(n,e,t)=>i(n,(i=>{t?y(e):e.el.childElem&&function(n,e){const t=e.el.childElem??e.el,i=[...n.children],o={};for(const n of i){const e=n.getAttribute("position")??"manual";o[e]??=[],o[e].push({child:n,position:e,index:i.indexOf(n)})}const r=o[e.position??"manual"]?.findIndex((({child:n})=>n===e.el));n.view.ui.remove(t),n.view.ui.add(t,{position:e.position,index:r})}(n,e),e.el.view=i}),"arcgisViewReadyChange");function a(n){let e=!1,t=n.el.view;const i=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(n.el),"view")??{get:()=>t,set:n=>t=n};Object.defineProperty(n.el,"view",{get:i.get.bind(n.el),set:t=>{i.set.call(n.el,t),t&&!e&&(e=!0,n.arcgisReady.emit())},configurable:!0,enumerable:!0}),t&&(n.el.view=t)}function s(n){return null==n||""===n}function u(n,e){return null!=e&&n?.position===e.position&&n?.heading===e.heading&&n?.tilt===e.tilt&&n?.fov===e.fov}function f(n,e){return void 0===e||e?.atmosphereEnabled!==n?.atmosphereEnabled||(e?.lighting).date!==(n?.lighting).date||(e?.lighting).directShadowsEnabled!==(n?.lighting).directShadowsEnabled||(e?.lighting).cameraTrackingEnabled!==(n?.lighting).cameraTrackingEnabled||(e?.lighting).date!==(n?.lighting).date||(e?.lighting).displayUTCOffset!==(n?.lighting).displayUTCOffset}function l(n,e){return void 0===e||n?.targetGeometry!==e?.targetGeometry||n?.rotation!==e?.rotation||n?.scale!==e?.scale}function d(n,e){return g(e?.center,n)}function g(n,e){if("string"==typeof e)return g(n,e.split(",").map(Number));if(!n)return e;if(Array.isArray(e)){if(e[0]!==n.longitude||e[1]!==n.latitude||(e.length>2?e[2]:void 0)!==n.z)return e}else if(e&&!n?.equals(e))return e}async function p(n,e){null!=e&&("string"==typeof e?n.el.view=await async function(n){const e=m(n);return await new Promise((n=>{"boolean"==typeof e?.view?.ready?n(e.view):e&&e.addEventListener("arcgisViewReadyChange",(()=>n(e.view)),{once:!0})}))}(e):n.widget&&(n.el.view=e.view))}function y(n){n.el.childElem&&(n.el.shadowRoot??n.el).append(n.el.childElem)}function m(n){return"string"!=typeof n?n??void 0:(n.includes("#")||n.includes(".")||n.includes("[")?void 0:document.querySelector(`#${n}`))??document.querySelector(n)??void 0}export{g as a,u as b,l as c,e as d,s as e,a as f,n as g,f as i,d as p,p as r}