import {
  _
} from "./chunk-GYKMI5OM.js";
import {
  a as a2
} from "./chunk-5EPIZ7XS.js";
import {
  i as i2
} from "./chunk-GBAJR7JF.js";
import {
  R
} from "./chunk-37X6JYDL.js";
import {
  r as r2
} from "./chunk-NACUKAMN.js";
import {
  h
} from "./chunk-MKVZ2GKM.js";
import "./chunk-6ALL3HYU.js";
import {
  i
} from "./chunk-TQ54TTVN.js";
import {
  j,
  y as y2
} from "./chunk-EVT35YP5.js";
import "./chunk-OHKRFTGD.js";
import {
  F
} from "./chunk-4BM4QPL6.js";
import "./chunk-LAXNQQQH.js";
import "./chunk-5PECYTTZ.js";
import "./chunk-ZGL6Q57M.js";
import "./chunk-KDQTUT24.js";
import "./chunk-TZAPBN5J.js";
import "./chunk-FKL5AVF4.js";
import {
  y
} from "./chunk-HCUIGCK7.js";
import "./chunk-PAS43ZQC.js";
import "./chunk-G7VPHLH2.js";
import "./chunk-V6VYGXU4.js";
import "./chunk-QLTGZ6EP.js";
import "./chunk-5Y4XRWDV.js";
import "./chunk-ARQ76THZ.js";
import "./chunk-CKPBZSTT.js";
import "./chunk-6ZMDPECL.js";
import "./chunk-KSR45ZRP.js";
import "./chunk-Q4J5AN2X.js";
import "./chunk-HB2JTNV2.js";
import "./chunk-3T3LUDWR.js";
import "./chunk-VBS2Y7KE.js";
import "./chunk-2O2NCM6Y.js";
import "./chunk-OXCT6NNS.js";
import "./chunk-J3GKRP7Y.js";
import "./chunk-Q3K5MAUZ.js";
import "./chunk-DPVSO6BH.js";
import "./chunk-5VEO4IUH.js";
import "./chunk-2XVRGGEF.js";
import "./chunk-6TRZLPPJ.js";
import "./chunk-U6IFI7EK.js";
import "./chunk-N42IF4WX.js";
import "./chunk-MCHNAU6L.js";
import "./chunk-MYNRH67A.js";
import "./chunk-VAGIPHHR.js";
import "./chunk-JMY2H33H.js";
import "./chunk-BXIXSFGX.js";
import "./chunk-OJRG2YGM.js";
import "./chunk-EVK6ZSVY.js";
import "./chunk-YEDSTDY4.js";
import "./chunk-OMMWWGIU.js";
import "./chunk-JPQIRBN6.js";
import "./chunk-CH3XVKUV.js";
import "./chunk-KI5F6KDS.js";
import "./chunk-HACIIBEF.js";
import "./chunk-C2RS46RL.js";
import "./chunk-AHZHHHCW.js";
import "./chunk-BN24XFSK.js";
import "./chunk-YAGJS3MX.js";
import "./chunk-OC7D2HR4.js";
import "./chunk-KKH7HGO3.js";
import "./chunk-QYSQ6XPQ.js";
import "./chunk-2RIHQI4N.js";
import "./chunk-VLKWWBLY.js";
import "./chunk-NXGNMEHZ.js";
import "./chunk-P2IB5HBH.js";
import "./chunk-CGSFKZP2.js";
import "./chunk-EPAKCM4A.js";
import "./chunk-RXJCBLN2.js";
import "./chunk-EFVIMN4N.js";
import "./chunk-2U5JYYSG.js";
import "./chunk-AFULL6KA.js";
import "./chunk-URFLFG2R.js";
import "./chunk-T23XXKIL.js";
import "./chunk-4V237NE5.js";
import "./chunk-F3ZOBTPK.js";
import "./chunk-EZCH3ZAJ.js";
import {
  c
} from "./chunk-DB6SP72M.js";
import "./chunk-YGTM4JUB.js";
import "./chunk-KDUYQUT4.js";
import "./chunk-73FHIZIF.js";
import "./chunk-ICIPRMPO.js";
import "./chunk-2IVHP3HQ.js";
import "./chunk-EHD5KM2T.js";
import "./chunk-G6LMYOSA.js";
import "./chunk-YNC2IEH2.js";
import "./chunk-QJXYURT2.js";
import "./chunk-CGJUTDVJ.js";
import "./chunk-D6FJTDNK.js";
import "./chunk-GYV5TPN6.js";
import "./chunk-ZOEKS56J.js";
import "./chunk-IYJHGZBJ.js";
import "./chunk-D3FSVA7H.js";
import "./chunk-6B4OMNPA.js";
import "./chunk-3GQ4PJDJ.js";
import "./chunk-QEJMJI2R.js";
import "./chunk-KV3S4QI2.js";
import "./chunk-ECMDQ4LS.js";
import "./chunk-LP6TMAPE.js";
import "./chunk-RENLZYKC.js";
import "./chunk-HFPXZJAJ.js";
import "./chunk-2X7T37AY.js";
import "./chunk-XQH2QDB2.js";
import "./chunk-6Q7GN2CW.js";
import "./chunk-MYUZZ3A3.js";
import "./chunk-2IGXKE5P.js";
import "./chunk-JFI4ESYU.js";
import "./chunk-4X2UADDH.js";
import "./chunk-ZICJB3ML.js";
import "./chunk-AVBIV2K3.js";
import "./chunk-4NJWIUZG.js";
import "./chunk-F3NUC2RS.js";
import "./chunk-LE3YW4Y3.js";
import "./chunk-TA32QX7Z.js";
import "./chunk-NYLL2YZF.js";
import "./chunk-NYLBGE62.js";
import "./chunk-QCBTLG25.js";
import "./chunk-ECCHNTW6.js";
import "./chunk-WWNVF22O.js";
import "./chunk-SUZN3TAH.js";
import "./chunk-K5RYAJV4.js";
import "./chunk-XGYM66XX.js";
import "./chunk-JOOGZSAP.js";
import "./chunk-J6GHQIZ2.js";
import {
  d
} from "./chunk-W6D3ECTZ.js";
import "./chunk-QXDQJEIU.js";
import "./chunk-MGMVRMXQ.js";
import "./chunk-SEUZ3J6J.js";
import "./chunk-BWTCR2DR.js";
import "./chunk-SMOTPOZ7.js";
import "./chunk-YVSEBNS4.js";
import "./chunk-Y2XCZQML.js";
import "./chunk-EZXLBRAS.js";
import "./chunk-GNWAZIVF.js";
import "./chunk-2PK57UYA.js";
import "./chunk-3L2AYCZY.js";
import "./chunk-TSVUPARM.js";
import "./chunk-VUJERGGB.js";
import "./chunk-NTI2OCVI.js";
import "./chunk-ZCHZRNUG.js";
import "./chunk-G6REFQRQ.js";
import "./chunk-2TEGRXBS.js";
import "./chunk-6Y2LNRVP.js";
import "./chunk-JVEZN6WF.js";
import "./chunk-E2RPCJOE.js";
import "./chunk-NHJGPXZH.js";
import "./chunk-JS7R723S.js";
import "./chunk-RCLWOQNR.js";
import "./chunk-DOTSJZHK.js";
import "./chunk-UCO66LNK.js";
import "./chunk-5YRJ4YFE.js";
import "./chunk-SEG3PRUR.js";
import "./chunk-B6VE32RA.js";
import "./chunk-AIYFWM42.js";
import "./chunk-2M53HYNY.js";
import "./chunk-6YWQXXBX.js";
import "./chunk-Q7TEBZSN.js";
import "./chunk-FG3XOAFD.js";
import "./chunk-GN5RE63N.js";
import "./chunk-2WXAPZBK.js";
import "./chunk-E2I7HYXQ.js";
import "./chunk-P5H5PJSC.js";
import "./chunk-WTNHDCCU.js";
import "./chunk-7O7KFKCG.js";
import "./chunk-TVTRNT6K.js";
import "./chunk-CRH37WFF.js";
import "./chunk-YFGQMO6E.js";
import "./chunk-HAF6QJ32.js";
import {
  m
} from "./chunk-H77COA2S.js";
import {
  a4 as a
} from "./chunk-7LJCT7EA.js";
import {
  r
} from "./chunk-MV5XBD6C.js";
import {
  b
} from "./chunk-GRW2QIBT.js";
import "./chunk-R2PAF6JT.js";
import "./chunk-6WE7SNQY.js";
import "./chunk-L6CCOEVE.js";
import {
  n2 as n
} from "./chunk-PKLD5YJF.js";
import "./chunk-XKQWTZMW.js";
import "./chunk-A4OFG7JM.js";

// node_modules/@arcgis/core/views/layers/MapImageLayerView.js
var i3 = (i4) => {
  let p = class extends i4 {
    initialize() {
      this.exportImageParameters = new y({ layer: this.layer });
    }
    destroy() {
      this.exportImageParameters.destroy(), this.exportImageParameters = null;
    }
    get floors() {
      var _a;
      return ((_a = this.view) == null ? void 0 : _a.floors) ?? null;
    }
    get exportImageVersion() {
      var _a;
      return (_a = this.exportImageParameters) == null ? void 0 : _a.commitProperty("version"), this.commitProperty("timeExtent"), this.commitProperty("floors"), (this._get("exportImageVersion") || 0) + 1;
    }
    get timeExtent() {
      var _a;
      return i2(this.layer, (_a = this.view) == null ? void 0 : _a.timeExtent, this._get("timeExtent"));
    }
    canResume() {
      var _a;
      return !!super.canResume() && !((_a = this.timeExtent) == null ? void 0 : _a.isEmpty);
    }
  };
  return r([m()], p.prototype, "exportImageParameters", void 0), r([m({ readOnly: true })], p.prototype, "floors", null), r([m({ readOnly: true })], p.prototype, "exportImageVersion", null), r([m()], p.prototype, "layer", void 0), r([m()], p.prototype, "suspended", void 0), r([m({ readOnly: true })], p.prototype, "timeExtent", null), p = r([a("esri.views.layers.MapImageLayerView")], p), p;
};

// node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js
var y3 = class extends i3(i(j(y2))) {
  constructor() {
    super(...arguments), this._highlightGraphics = new c(), this._updateHash = "";
  }
  fetchPopupFeaturesAtLocation(t, e) {
    return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(t, e);
  }
  update(t) {
    const r3 = `${this.exportImageVersion}/${t.state.id}/${t.pixelRatio}/${t.stationary}`;
    this._updateHash !== r3 && (this._updateHash = r3, this.strategy.update(t).catch((t2) => {
      b(t2) || n.getLogger(this).error(t2);
    }), t.stationary && this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)), this._highlightView.processUpdate(t);
  }
  attach() {
    const { imageMaxWidth: t, imageMaxHeight: e, version: i4 } = this.layer, s = i4 >= 10.3, a3 = i4 >= 10;
    this._bitmapContainer = new a2(), this.container.addChild(this._bitmapContainer), this._highlightView = new F({ view: this.view, graphics: this._highlightGraphics, requestUpdateCallback: () => this.requestUpdate(), container: new h(this.view.featuresTilingScheme), defaultPointSymbolEnabled: false }), this.container.addChild(this._highlightView.container), this._popupHighlightHelper = new R({ createFetchPopupFeaturesQueryGeometry: (t2, e2) => r2(t2, e2, this.view), highlightGraphics: this._highlightGraphics, highlightGraphicUpdated: (t2, e2) => {
      this._highlightView.graphicUpdateHandler({ graphic: t2, property: e2 });
    }, layerView: this, updatingHandles: this._updatingHandles }), this.strategy = new _({ container: this._bitmapContainer, fetchSource: this.fetchImageBitmap.bind(this), requestUpdate: this.requestUpdate.bind(this), imageMaxWidth: t, imageMaxHeight: e, imageRotationSupported: s, imageNormalizationSupported: a3, hidpi: true }), this.addAttachHandles(d(() => this.exportImageVersion, () => this.requestUpdate())), this.requestUpdate();
  }
  detach() {
    this.strategy.destroy(), this.container.removeAllChildren(), this._bitmapContainer.removeAllChildren(), this._highlightView.destroy(), this._popupHighlightHelper.destroy();
  }
  viewChange() {
  }
  moveEnd() {
    this.requestUpdate();
  }
  supportsSpatialReference(t) {
    return this.layer.serviceSupportsSpatialReference(t);
  }
  async doRefresh() {
    this._updateHash = "", this.requestUpdate();
  }
  isUpdating() {
    return this.strategy.updating || this.updateRequested;
  }
  fetchImage(t, e, i4, r3) {
    return this.layer.fetchImage(t, e, i4, { timeExtent: this.timeExtent, floors: this.floors, ...r3 });
  }
  fetchImageBitmap(t, e, i4, r3) {
    return this.layer.fetchImageBitmap(t, e, i4, { timeExtent: this.timeExtent, floors: this.floors, ...r3 });
  }
  highlight(t) {
    return this._popupHighlightHelper.highlight(t);
  }
};
r([m()], y3.prototype, "strategy", void 0), r([m()], y3.prototype, "updating", void 0), y3 = r([a("esri.views.2d.layers.MapImageLayerView2D")], y3);
var w = y3;
export {
  w as default
};
//# sourceMappingURL=MapImageLayerView2D-RQVAQXHW.js.map
