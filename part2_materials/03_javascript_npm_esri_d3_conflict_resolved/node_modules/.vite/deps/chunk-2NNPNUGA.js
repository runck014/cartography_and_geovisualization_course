import {
  e as e7
} from "./chunk-JW4HK5OB.js";
import {
  a as a4,
  s as s3
} from "./chunk-FATVAQSJ.js";
import {
  e as e4,
  e2 as e5,
  e3 as e6,
  n as n3,
  o2 as o4
} from "./chunk-HRP7POO2.js";
import {
  a as a3,
  o as o5
} from "./chunk-JQJITHTO.js";
import {
  o as o3
} from "./chunk-6LGJYARD.js";
import {
  E as E2
} from "./chunk-XUTNI6FK.js";
import {
  a as a2
} from "./chunk-N42IF4WX.js";
import {
  e as e3
} from "./chunk-5FROWG6B.js";
import {
  e as e2
} from "./chunk-L7OHH2HW.js";
import {
  n as n2
} from "./chunk-AFULL6KA.js";
import {
  s as s2
} from "./chunk-URFLFG2R.js";
import {
  E,
  c as c2,
  o as o2,
  u
} from "./chunk-RENLZYKC.js";
import {
  i
} from "./chunk-GNWAZIVF.js";
import {
  _,
  n,
  r as r3
} from "./chunk-6Y2LNRVP.js";
import {
  o,
  r as r2,
  s
} from "./chunk-6YWQXXBX.js";
import {
  b2 as b,
  e3 as e,
  m
} from "./chunk-H77COA2S.js";
import {
  a4 as a
} from "./chunk-7LJCT7EA.js";
import {
  r
} from "./chunk-MV5XBD6C.js";
import {
  c
} from "./chunk-XKQWTZMW.js";

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js
var o6;
!function(o12) {
  o12[o12.NONE = 0] = "NONE", o12[o12.ColorAlpha = 1] = "ColorAlpha", o12[o12.FrontFace = 2] = "FrontFace", o12[o12.COUNT = 3] = "COUNT";
}(o6 || (o6 = {}));

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js
function P(e16, s7) {
  m2(e16, s7, new o4("slicePlaneOrigin", (e17, i4) => g(s7, e17, i4)), new o4("slicePlaneBasis1", (e17, i4) => {
    var _a;
    return I(s7, e17, i4, (_a = i4.slicePlane) == null ? void 0 : _a.basis1);
  }), new o4("slicePlaneBasis2", (e17, i4) => {
    var _a;
    return I(s7, e17, i4, (_a = i4.slicePlane) == null ? void 0 : _a.basis2);
  }));
}
function m2(e16, s7, ...i4) {
  if (!s7.hasSlicePlane) {
    const i5 = o3`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`;
    return s7.hasSliceInVertexProgram && e16.vertex.code.add(i5), void e16.fragment.code.add(i5);
  }
  const a7 = o3`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`, l5 = o3`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`, o12 = s7.hasSliceHighlight ? o3`
        ${l5}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      ` : o3`#define highlightSlice(_color_, _pos_) (_color_)`;
  s7.hasSliceInVertexProgram && e16.vertex.uniforms.add(...i4).code.add(a7), e16.fragment.uniforms.add(...i4).code.add(a7), e16.fragment.code.add(o12);
}
function p(e16, s7, i4) {
  return e16.instancedDoublePrecision ? o2(b2, i4.camera.viewInverseTransposeMatrix[3], i4.camera.viewInverseTransposeMatrix[7], i4.camera.viewInverseTransposeMatrix[11]) : s7.slicePlaneLocalOrigin;
}
function h(e16, s7) {
  return null != e16 ? c2(B, s7.origin, e16) : s7.origin;
}
function H(s7, i4, a7) {
  return s7.hasSliceTranslatedView ? null != i4 ? i(S, a7.camera.viewMatrix, i4) : a7.camera.viewMatrix : null;
}
function g(e16, s7, a7) {
  if (null == a7.slicePlane) return _;
  const l5 = p(e16, s7, a7), o12 = h(l5, a7.slicePlane), r6 = H(e16, l5, a7);
  return null != r6 ? E(B, o12, r6) : o12;
}
function I(e16, s7, o12, r6) {
  if (null == r6 || null == o12.slicePlane) return _;
  const t4 = p(e16, s7, o12), n9 = h(t4, o12.slicePlane), f5 = H(e16, t4, o12);
  return null != f5 ? (u(v, r6, n9), E(B, n9, f5), E(v, v, f5), c2(v, v, B)) : r6;
}
var b2 = n();
var B = n();
var v = n();
var S = e3();

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform.js
var o7 = class extends a3 {
  constructor(r6, o12) {
    super(r6, "mat4", a2.Draw, (e16, s7, t4) => e16.setUniformMatrix4fv(r6, o12(s7, t4)));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js
function f(r6, e16) {
  e16.instancedDoublePrecision ? r6.constants.add("cameraPosition", "vec3", _) : r6.uniforms.add(new o4("cameraPosition", (r7, e17) => o2(v2, e17.camera.viewInverseTransposeMatrix[3] - r7.origin[0], e17.camera.viewInverseTransposeMatrix[7] - r7.origin[1], e17.camera.viewInverseTransposeMatrix[11] - r7.origin[2])));
}
function d(e16, a7) {
  if (!a7.instancedDoublePrecision) return void e16.uniforms.add(new e6("proj", (r6, e17) => e17.camera.projectionMatrix), new o7("view", (e17, i4) => i(l, i4.camera.viewMatrix, e17.origin)), new o4("localOrigin", (r6) => r6.origin));
  const o12 = (r6) => o2(v2, r6.camera.viewInverseTransposeMatrix[3], r6.camera.viewInverseTransposeMatrix[7], r6.camera.viewInverseTransposeMatrix[11]);
  e16.uniforms.add(new e6("proj", (r6, e17) => e17.camera.projectionMatrix), new e6("view", (e17, i4) => i(l, i4.camera.viewMatrix, o12(i4))), new e4("localOrigin", (r6, e17) => o12(e17)));
}
var l = e3();
var v2 = n();
function p2(r6) {
  r6.uniforms.add(new e6("viewNormal", (r7, e16) => e16.camera.viewInverseTransposeMatrix));
}
function w(r6) {
  r6.uniforms.add(new o5("pixelRatio", (r7, e16) => e16.camera.pixelRatio / e16.overlayStretch));
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js
function s4(e16) {
  e16.vertex.code.add(o3`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`), e16.vertex.code.add(o3`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {
return vec3(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z
);
}`), e16.vertex.code.add(o3`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`), e16.vertex.code.add(o3`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`), e16.vertex.code.add(o3`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`), e16.vertex.code.add(o3`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`);
}
function t2(e16) {
  e16.uniforms.add(new e4("screenSizePerspective", (e17) => i2(e17.screenSizePerspective)));
}
function o8(e16) {
  e16.uniforms.add(new e4("screenSizePerspectiveAlignment", (e17) => i2(e17.screenSizePerspectiveAlignment || e17.screenSizePerspective)));
}
function i2(a7) {
  return o2(n4, a7.parameters.divisor, a7.parameters.offset, a7.minScaleFactor);
}
var n4 = n();

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js
function a5(e16, r6) {
  const c4 = e16.vertex;
  r6.hasVerticalOffset ? (f2(c4), r6.hasScreenSizePerspective && (e16.include(s4), o8(c4), f(e16.vertex, r6)), c4.code.add(o3`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${r6.spherical ? o3`vec3 worldNormal = normalize(worldPos + localOrigin);` : o3`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${r6.hasScreenSizePerspective ? o3`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);` : o3`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)) : c4.code.add(o3`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`);
}
var s5 = n2();
function f2(r6) {
  r6.uniforms.add(new e7("verticalOffset", (r7, t4) => {
    const { minWorldLength: l5, maxWorldLength: o12, screenLength: c4 } = r7.verticalOffset, i4 = Math.tan(0.5 * t4.camera.fovY) / (0.5 * t4.camera.fullViewport[3]), a7 = t4.camera.pixelRatio || 1;
    return s2(s5, c4 * a7, i4, l5, o12);
  }));
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js
function e8(e16, t4) {
  if (t4.output !== n3.ObjectAndLayerIdColor) return e16.vertex.code.add(o3`void forwardObjectAndLayerIdColor() {}`), void e16.fragment.code.add(o3`void outputObjectAndLayerIdColor() {}`);
  const a7 = t4.objectAndLayerIdColorInstanced;
  e16.varyings.add("objectAndLayerIdColorVarying", "vec4"), e16.attributes.add(a7 ? e2.INSTANCEOBJECTANDLAYERIDCOLOR : e2.OBJECTANDLAYERIDCOLOR, "vec4"), e16.vertex.code.add(o3`
    void forwardObjectAndLayerIdColor() {
      objectAndLayerIdColorVarying = ${a7 ? "instanceObjectAndLayerIdColor" : "objectAndLayerIdColor"} * 0.003921568627451;
    }`), e16.fragment.code.add(o3`void outputObjectAndLayerIdColor() {
fragColor = objectAndLayerIdColorVarying;
}`);
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Integer2PassUniform.js
var e9 = class extends a3 {
  constructor(r6, e16) {
    super(r6, "ivec2", a2.Pass, (s7, o12, i4) => s7.setUniform2iv(r6, e16(o12, i4)));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js
var e10 = class extends a3 {
  constructor(r6, e16) {
    super(r6, "int", a2.Pass, (s7, o12, i4) => s7.setUniform1i(r6, e16(o12, i4)));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js
function g2(g4, d3) {
  const { fragment: c4 } = g4;
  d3.output === n3.Highlight ? (c4.uniforms.add(new s3("depthTexture", (i4, e16) => e16.mainDepth), new s3("highlightTexture", (i4, e16) => e16.highlightMixTexture), new e10("highlightLevel", (i4, e16) => e16.highlightLevel), new e9("highlightMixOrigin", (i4, e16) => e16.highlightMixOrigin)), g4.outputs.add("fragHighlight", "vec2", 0), c4.code.add(o3`vec2 getAccumulatedHighlight() {
return texelFetch(highlightTexture, ivec2(gl_FragCoord.xy) - highlightMixOrigin, 0).rg;
}
void outputHighlight(bool occluded) {
if (highlightLevel == 0) {
uint bits = occluded ? 3u : 1u;
fragHighlight = vec2(float(bits) / 255.0, 0.0);
} else {
int ll = (highlightLevel & 3) << 1;
int li = (highlightLevel >> 2) & 3;
uint bits;
if (occluded) {
bits = 3u << ll;
} else {
bits = 1u << ll;
}
vec2 combinedHighlight = getAccumulatedHighlight();
uint accumulatedI = uint(combinedHighlight[li] * 255.0);
combinedHighlight[li] = float(bits | accumulatedI) / 255.0;
fragHighlight = combinedHighlight;
}
}
bool isHighlightOccluded() {
float sceneDepth = texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x;
return gl_FragCoord.z > sceneDepth + 5e-7;
}
void calculateOcclusionAndOutputHighlight() {
outputHighlight(isHighlightOccluded());
}`), d3.canHaveOverlay && (c4.constants.add("occlusionAndMask", "int", 85), c4.code.add(o3`void outputAllHighlights(vec2 highlightToAdd) {
if (highlightToAdd == vec2(0.0)) { discard; }
int occludedOrMask = isHighlightOccluded() ? 0xaa : 0;
ivec2 added = ivec2(highlightToAdd * 255.0);
ivec2 masked = (added & ivec2(occlusionAndMask)) | (ivec2(occludedOrMask) & (added<<1));
fragHighlight = vec2(masked) / 255.0;
}`))) : c4.code.add(o3`void calculateOcclusionAndOutputHighlight() {}`);
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4sPassUniform.js
var e11 = class extends a3 {
  constructor(r6, e16, o12) {
    super(r6, "vec4", a2.Pass, (s7, o13, t4) => s7.setUniform4fv(r6, e16(o13, t4)), o12);
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform.js
var o9 = class extends a3 {
  constructor(r6, o12, e16) {
    super(r6, "float", a2.Pass, (s7, e17, t4) => s7.setUniform1fv(r6, o12(e17, t4)), e16);
  }
};

// node_modules/@arcgis/core/views/3d/support/debugFlags.js
var T = class extends b {
  constructor() {
    super(...arguments), this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR = false, this.DECONFLICTOR_SHOW_VISIBLE = false, this.DECONFLICTOR_SHOW_INVISIBLE = false, this.DECONFLICTOR_SHOW_GRID = false, this.LABELS_SHOW_BORDER = false, this.TEXT_SHOW_BASELINE = false, this.TEXT_SHOW_BORDER = false, this.OVERLAY_DRAW_DEBUG_TEXTURE = false, this.OVERLAY_SHOW_CENTER = false, this.SHOW_POI = false, this.TESTS_DISABLE_OPTIMIZATIONS = false, this.TESTS_DISABLE_FAST_UPDATES = false, this.DRAW_MESH_GEOMETRY_NORMALS = false, this.FEATURE_TILE_FETCH_SHOW_TILES = false, this.FEATURE_TILE_TREE_SHOW_TILES = false, this.TERRAIN_TILE_TREE_SHOW_TILES = false, this.I3S_TREE_SHOW_TILES = false, this.I3S_SHOW_MODIFICATIONS = false, this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES = false, this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL = false, this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES = false, this.LINE_WIREFRAMES = false;
  }
};
r([m()], T.prototype, "SCENEVIEW_HITTEST_RETURN_INTERSECTOR", void 0), r([m()], T.prototype, "DECONFLICTOR_SHOW_VISIBLE", void 0), r([m()], T.prototype, "DECONFLICTOR_SHOW_INVISIBLE", void 0), r([m()], T.prototype, "DECONFLICTOR_SHOW_GRID", void 0), r([m()], T.prototype, "LABELS_SHOW_BORDER", void 0), r([m()], T.prototype, "TEXT_SHOW_BASELINE", void 0), r([m()], T.prototype, "TEXT_SHOW_BORDER", void 0), r([m()], T.prototype, "OVERLAY_DRAW_DEBUG_TEXTURE", void 0), r([m()], T.prototype, "OVERLAY_SHOW_CENTER", void 0), r([m()], T.prototype, "SHOW_POI", void 0), r([m()], T.prototype, "TESTS_DISABLE_OPTIMIZATIONS", void 0), r([m()], T.prototype, "TESTS_DISABLE_FAST_UPDATES", void 0), r([m()], T.prototype, "DRAW_MESH_GEOMETRY_NORMALS", void 0), r([m()], T.prototype, "FEATURE_TILE_FETCH_SHOW_TILES", void 0), r([m()], T.prototype, "FEATURE_TILE_TREE_SHOW_TILES", void 0), r([m()], T.prototype, "TERRAIN_TILE_TREE_SHOW_TILES", void 0), r([m()], T.prototype, "I3S_TREE_SHOW_TILES", void 0), r([m()], T.prototype, "I3S_SHOW_MODIFICATIONS", void 0), r([m()], T.prototype, "LOD_INSTANCE_RENDERER_DISABLE_UPDATES", void 0), r([m()], T.prototype, "LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL", void 0), r([m()], T.prototype, "EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES", void 0), r([m()], T.prototype, "LINE_WIREFRAMES", void 0), T = r([a("esri.views.3d.support.debugFlags")], T);
var t3 = new T();

// node_modules/@arcgis/core/views/3d/layers/support/FastSymbolUpdates.js
var h2;
var y;
!function(e16) {
  e16[e16.Undefined = 0] = "Undefined", e16[e16.DefinedSize = 1] = "DefinedSize", e16[e16.DefinedScale = 2] = "DefinedScale";
}(h2 || (h2 = {})), function(e16) {
  e16[e16.Undefined = 0] = "Undefined", e16[e16.DefinedAngle = 1] = "DefinedAngle";
}(y || (y = {}));
function W(t4, o12, i4) {
  if (!o12.vvSize) return o2(t4, 1, 1, 1), t4;
  for (let n9 = 0; n9 < 3; ++n9) {
    const s7 = o12.vvSize.offset[n9] + i4[0] * o12.vvSize.factor[n9];
    t4[n9] = r2(s7, o12.vvSize.minSize[n9], o12.vvSize.maxSize[n9]);
  }
  return t4;
}
var Y = e3();
var Z = n();
var ee = e3();

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js
var r5 = class {
  constructor() {
    this.id = e();
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js
var e13;
!function(e16) {
  e16[e16.Layer = 0] = "Layer", e16[e16.Object = 1] = "Object", e16[e16.Mesh = 2] = "Mesh", e16[e16.Line = 3] = "Line", e16[e16.Point = 4] = "Point", e16[e16.Material = 5] = "Material", e16[e16.Texture = 6] = "Texture", e16[e16.COUNT = 7] = "COUNT";
}(e13 || (e13 = {}));

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var O = /* @__PURE__ */ new Map([[e2.POSITION, 0], [e2.NORMAL, 1], [e2.NORMALCOMPRESSED, 1], [e2.UV0, 2], [e2.COLOR, 3], [e2.COLORFEATUREATTRIBUTE, 3], [e2.SIZE, 4], [e2.TANGENT, 4], [e2.CENTEROFFSETANDDISTANCE, 5], [e2.SYMBOLCOLOR, 5], [e2.FEATUREATTRIBUTE, 6], [e2.INSTANCEFEATUREATTRIBUTE, 6], [e2.INSTANCECOLOR, 7], [e2.OBJECTANDLAYERIDCOLOR, 7], [e2.INSTANCEOBJECTANDLAYERIDCOLOR, 7], [e2.ROTATION, 8], [e2.INSTANCEMODEL, 8], [e2.INSTANCEMODELNORMAL, 12], [e2.INSTANCEMODELORIGINHI, 11], [e2.INSTANCEMODELORIGINLO, 15]]);

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js
function u2(e16) {
  return Math.abs(e16 * e16 * e16);
}
function f4(e16, t4, a7) {
  const r6 = a7.parameters;
  return C.scale = Math.min(r6.divisor / (t4 - r6.offset), 1), C.factor = u2(e16), C;
}
function m5(t4, a7) {
  return o(t4 * Math.max(a7.scale, a7.minScaleFactor), t4, a7.factor);
}
function h3(e16, t4, a7) {
  const r6 = f4(e16, t4, a7);
  return r6.minScaleFactor = 0, m5(1, r6);
}
function d2(e16, t4, a7, r6) {
  r6.scale = h3(e16, t4, a7), r6.factor = 0, r6.minScaleFactor = a7.minScaleFactor;
}
function p3(e16, t4, a7 = [0, 0]) {
  const r6 = Math.min(Math.max(t4.scale, t4.minScaleFactor), 1);
  return a7[0] = e16[0] * r6, a7[1] = e16[1] * r6, a7;
}
function v3(e16, t4, a7, r6) {
  return m5(e16, f4(t4, a7, r6));
}
var g3 = { curvatureDependent: { min: { curvature: s(10), tiltAngle: s(12), scaleFallOffFactor: 0.5 }, max: { curvature: s(70), tiltAngle: s(40), scaleFallOffFactor: 0.8 } }, scaleStart: 0.3, scaleFallOffRange: 0.65, minPixelSize: 0 };
var C = { scale: 0, factor: 0, minScaleFactor: 0 };
var D = E2();

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js
function i3(r6, i4, n9, o12, l5) {
  let s7 = (n9.screenLength || 0) * r6.pixelRatio;
  null != l5 && (s7 = v3(s7, o12, i4, l5));
  const a7 = s7 * Math.tan(0.5 * r6.fovY) / (0.5 * r6.fullHeight);
  return r2(a7 * i4, n9.minWorldLength || 0, null != n9.maxWorldLength ? n9.maxWorldLength : 1 / 0);
}
function n7(t4, e16) {
  let i4 = false;
  for (const n9 in e16) {
    const o12 = e16[n9];
    void 0 !== o12 && (Array.isArray(o12) ? Array.isArray(t4[n9]) && c(o12, t4[n9]) || (t4[n9] = o12.slice(), i4 = true) : t4[n9] !== o12 && (i4 = true, t4[n9] = o12));
  }
  return i4;
}
var o11 = { multiply: 1, ignore: 2, replace: 3, tint: 4 };

// node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var n8 = class extends r5 {
  constructor(r6, t4) {
    super(), this.type = e13.Material, this.supportsEdges = false, this._renderPriority = 0, this.vertexAttributeLocations = O, this._pp0 = r3(0, 0, 1), this._pp1 = r3(0, 0, 0), this._parameters = new t4(), n7(this._parameters, r6), this.validateParameters(this._parameters);
  }
  get parameters() {
    return this._parameters;
  }
  update(e16) {
    return false;
  }
  setParameters(e16, r6 = true) {
    n7(this._parameters, e16) && (this.validateParameters(this._parameters), r6 && this._parametersChanged());
  }
  validateParameters(e16) {
  }
  shouldRender(e16) {
    return this.visible && this.isVisibleForOutput(e16.output) && (!this.parameters.isDecoration || e16.bind.decorations) && !!(this.parameters.renderOccluded & e16.renderOccludedMask);
  }
  isVisibleForOutput(e16) {
    return true;
  }
  get renderPriority() {
    return this._renderPriority;
  }
  set renderPriority(e16) {
    e16 !== this._renderPriority && (this._renderPriority = e16, this._parametersChanged());
  }
  _parametersChanged() {
    var _a;
    (_a = this.repository) == null ? void 0 : _a.materialChanged(this);
  }
  queryRenderOccludedState(e16) {
    return this.visible && this.parameters.renderOccluded === e16;
  }
  get hasEmissions() {
    return false;
  }
  intersectDraped(e16, r6, t4, s7, i4, a7) {
    return this._pp0[0] = this._pp1[0] = s7[0], this._pp0[1] = this._pp1[1] = s7[1], this.intersect(e16, r6, t4, this._pp0, this._pp1, i4);
  }
};
var p4;
!function(e16) {
  e16[e16.None = 0] = "None", e16[e16.Occlude = 1] = "Occlude", e16[e16.Transparent = 2] = "Transparent", e16[e16.OccludeAndTransparent = 4] = "OccludeAndTransparent", e16[e16.OccludeAndTransparentStencil = 8] = "OccludeAndTransparentStencil", e16[e16.Opaque = 16] = "Opaque";
}(p4 || (p4 = {}));

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js
var e14 = 8;

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js
function l4(l5, n9) {
  const { vertex: s7, attributes: u3 } = l5;
  n9.hasVvInstancing && (n9.vvSize || n9.vvColor) && u3.add(e2.INSTANCEFEATUREATTRIBUTE, "vec4"), n9.vvSize ? (s7.uniforms.add(new e4("vvSizeMinSize", (e16) => e16.vvSize.minSize)), s7.uniforms.add(new e4("vvSizeMaxSize", (e16) => e16.vvSize.maxSize)), s7.uniforms.add(new e4("vvSizeOffset", (e16) => e16.vvSize.offset)), s7.uniforms.add(new e4("vvSizeFactor", (e16) => e16.vvSize.factor)), s7.uniforms.add(new e5("vvSymbolRotationMatrix", (e16) => e16.vvSymbolRotationMatrix)), s7.uniforms.add(new e4("vvSymbolAnchor", (e16) => e16.vvSymbolAnchor)), s7.code.add(o3`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`), s7.code.add(o3`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${n9.hasVvInstancing ? o3`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }` : ""}
    `)) : s7.code.add(o3`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`), n9.vvColor ? (s7.constants.add("vvColorNumber", "int", e14), s7.uniforms.add(new o9("vvColorValues", (e16) => e16.vvColor.values, e14), new e11("vvColorColors", (e16) => e16.vvColor.colors, e14)), s7.code.add(o3`
      vec4 interpolateVVColor(float value) {
        if (value <= vvColorValues[0]) {
          return vvColorColors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (vvColorValues[i] >= value) {
            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
            return mix(vvColorColors[i-1], vvColorColors[i], f);
          }
        }
        return vvColorColors[vvColorNumber - 1];
      }

      vec4 vvGetColor(vec4 featureAttribute) {
        return interpolateVVColor(featureAttribute.y);
      }

      ${n9.hasVvInstancing ? o3`
            vec4 vvColor() {
              return vvGetColor(instanceFeatureAttribute);
            }` : "vec4 vvColor() { return vec4(1.0); }"}
    `)) : s7.code.add(o3`vec4 vvColor() { return vec4(1.0); }`);
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js
function a6(a7, { occlusionPass: n9, terrainDepthTest: i4, cullAboveTerrain: o12 }) {
  i4 ? (a7.fragment.include(a4), a7.fragment.uniforms.add(new s3("terrainDepthTexture", (e16, t4) => {
    var _a;
    return (_a = t4.terrainDepth) == null ? void 0 : _a.attachment;
  })).code.add(o3`
   ${n9 ? "bool" : "void"} terrainDepthTest(float fragmentDepth) {
      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;
      float linearDepth = linearizeDepth(depth);
      ${n9 ? o3`return fragmentDepth < linearDepth && depth < 1.0;` : o3`if(fragmentDepth ${o12 ? ">" : "<="} linearDepth) discard;`}
    }`)) : n9 ? a7.fragment.code.add(o3`#define terrainDepthTest(fragmentDepth) false`) : a7.fragment.code.add(o3`#define terrainDepthTest(fragmentDepth) {}`);
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js
function e15(e16) {
  e16.code.add(o3`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`);
}

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js
var s6 = class extends a3 {
  constructor(o12, s7) {
    super(o12, "bool", a2.Pass, (r6, e16, t4) => r6.setUniform1b(o12, s7(e16, t4)));
  }
};

export {
  t3 as t,
  O,
  r5 as r,
  m5 as m,
  d2 as d,
  p3 as p,
  i3 as i,
  o11 as o,
  e13 as e,
  n8 as n,
  p4 as p2,
  o6 as o2,
  P,
  f,
  d as d2,
  p2 as p3,
  w,
  e10 as e2,
  s4 as s,
  t2,
  o8 as o3,
  a5 as a,
  f2,
  e8 as e3,
  g2 as g,
  W,
  l4 as l,
  s6 as s2,
  a6 as a2,
  e15 as e4
};
//# sourceMappingURL=chunk-2NNPNUGA.js.map
