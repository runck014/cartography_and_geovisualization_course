import {
  a as a4
} from "./chunk-3DVL3O3F.js";
import {
  m as m3,
  p as p2
} from "./chunk-RN66FJAW.js";
import {
  d as d2
} from "./chunk-NXGNMEHZ.js";
import {
  a as a3,
  a2 as a6
} from "./chunk-TWYDW6LU.js";
import {
  i as i2
} from "./chunk-MLATPUII.js";
import {
  l
} from "./chunk-NVFQGMP6.js";
import {
  v
} from "./chunk-XX37BOHH.js";
import {
  a as a5,
  e,
  i as i3,
  t
} from "./chunk-5CRXWQ3Y.js";
import {
  B,
  h3 as h,
  h4 as h2,
  h5 as h3,
  j2 as j,
  w2
} from "./chunk-JFI4ESYU.js";
import {
  n as n5,
  r as r4
} from "./chunk-ZICJB3ML.js";
import {
  n2 as n4
} from "./chunk-AVBIV2K3.js";
import {
  i
} from "./chunk-NYLBGE62.js";
import {
  d
} from "./chunk-W6D3ECTZ.js";
import {
  h as h4,
  i as i4,
  w as w3
} from "./chunk-BWTCR2DR.js";
import {
  o as o2
} from "./chunk-YVSEBNS4.js";
import {
  r as r3
} from "./chunk-TSVUPARM.js";
import {
  b as b2
} from "./chunk-SEG3PRUR.js";
import {
  m as m2,
  p
} from "./chunk-AIYFWM42.js";
import {
  o
} from "./chunk-GN5RE63N.js";
import {
  r as r2
} from "./chunk-2WXAPZBK.js";
import {
  s as s3
} from "./chunk-WTNHDCCU.js";
import {
  n as n3
} from "./chunk-7O7KFKCG.js";
import {
  f
} from "./chunk-HAF6QJ32.js";
import {
  b2 as b,
  m
} from "./chunk-H77COA2S.js";
import {
  a4 as a2,
  s4 as s2,
  u3 as u,
  u4 as u2,
  w,
  x
} from "./chunk-7LJCT7EA.js";
import {
  r
} from "./chunk-MV5XBD6C.js";
import {
  a,
  n,
  n2,
  s2 as s
} from "./chunk-PKLD5YJF.js";
import {
  F
} from "./chunk-XKQWTZMW.js";

// node_modules/@arcgis/core/renderers/support/AuthoringInfoClassBreakInfo.js
var t2;
var p3 = t2 = class extends f {
  constructor(r5) {
    super(r5), this.minValue = 0, this.maxValue = 0;
  }
  clone() {
    return new t2({ minValue: this.minValue, maxValue: this.maxValue });
  }
};
r([m({ type: Number, json: { write: true } })], p3.prototype, "minValue", void 0), r([m({ type: Number, json: { write: true } })], p3.prototype, "maxValue", void 0), p3 = t2 = r([a2("esri.renderers.support.AuthoringInfoClassBreakInfo")], p3);

// node_modules/@arcgis/core/renderers/support/AuthoringInfoFieldInfo.js
var n6;
var a7 = n6 = class extends f {
  constructor(o3) {
    super(o3), this.field = "", this.normalizationField = "", this.label = "", this.classBreakInfos = new Array();
  }
  clone() {
    return new n6({ field: this.field, normalizationField: this.normalizationField, label: this.label, classBreakInfos: a(this.classBreakInfos) });
  }
};
r([m({ type: String, json: { write: true } })], a7.prototype, "field", void 0), r([m({ type: String, json: { write: true } })], a7.prototype, "normalizationField", void 0), r([m({ type: String, json: { write: true } })], a7.prototype, "label", void 0), r([m({ type: [p3], json: { write: true } })], a7.prototype, "classBreakInfos", void 0), a7 = n6 = r([a2("esri.renderers.support.AuthoringInfoFieldInfo")], a7);

// node_modules/@arcgis/core/renderers/support/AuthoringInfoSizeStop.js
var t3;
var p4 = t3 = class extends f {
  constructor(r5) {
    super(r5), this.label = null, this.size = null, this.value = null;
  }
  clone() {
    return new t3({ label: this.label, value: this.value, size: this.size });
  }
};
r([m({ type: String, json: { write: true } })], p4.prototype, "label", void 0), r([m({ type: Number, json: { write: true } })], p4.prototype, "size", void 0), r([m({ type: Number, json: { write: true } })], p4.prototype, "value", void 0), p4 = t3 = r([a2("esri.renderers.support.AuthoringInfoSizeStop")], p4);
var i5 = p4;

// node_modules/@arcgis/core/renderers/support/AuthoringInfoVisualVariable.js
var a8;
var p5 = new n3({ percentTotal: "percent-of-total", ratio: "ratio", percent: "percent" });
var u3 = new n3({ sizeInfo: "size", colorInfo: "color", transparencyInfo: "opacity", rotationInfo: "rotation" });
var m4 = { key: (e4) => "number" == typeof e4 ? "number" : "string", typeMap: { number: Number, string: String }, base: null };
var c = ["high-to-low", "above-and-below", "centered-on", "extremes"];
var y = [.../* @__PURE__ */ new Set([...["high-to-low", "above-and-below", "centered-on", "extremes", "above", "below"], ...["high-to-low", "above-and-below", "above", "below", "reference-size"]])];
var h5 = ["seconds", "minutes", "hours", "days", "months", "years"];
var S = ["circle", "diamond", "hexagon-flat", "hexagon-pointy", "square"];
var d3 = a8 = class extends f {
  constructor(e4) {
    super(e4), this.endTime = null, this.field = null, this.maxSliderValue = null, this.minSliderValue = null, this.startTime = null, this.type = null, this.units = null;
  }
  castEndTime(e4) {
    return "string" == typeof e4 || "number" == typeof e4 ? e4 : null;
  }
  get normalizationField() {
    return "reference-size" === this.theme ? this._get("normalizationField") : null;
  }
  set normalizationField(e4) {
    this._set("normalizationField", e4);
  }
  get referenceSizeScale() {
    return "reference-size" === this.theme ? this._get("referenceSizeScale") : null;
  }
  set referenceSizeScale(e4) {
    this._set("referenceSizeScale", e4);
  }
  get referenceSizeSymbolStyle() {
    return "reference-size" === this.theme ? this._get("referenceSizeSymbolStyle") : null;
  }
  set referenceSizeSymbolStyle(e4) {
    this._set("referenceSizeSymbolStyle", e4);
  }
  castStartTime(e4) {
    return "string" == typeof e4 || "number" == typeof e4 ? e4 : null;
  }
  get sizeStops() {
    return "reference-size" === this.theme ? this._get("sizeStops") : null;
  }
  set sizeStops(e4) {
    this._set("sizeStops", e4);
  }
  get style() {
    return "color" === this.type ? this._get("style") : null;
  }
  set style(e4) {
    this._set("style", e4);
  }
  get theme() {
    return "color" === this.type || "size" === this.type ? this._get("theme") || "high-to-low" : null;
  }
  set theme(e4) {
    this._set("theme", e4);
  }
  clone() {
    return new a8({ endTime: this.endTime, field: this.field, maxSliderValue: this.maxSliderValue, minSliderValue: this.minSliderValue, normalizationField: this.normalizationField, referenceSizeScale: this.referenceSizeScale, referenceSizeSymbolStyle: this.referenceSizeSymbolStyle, sizeStops: a(this.sizeStops), startTime: this.startTime, style: this.style, theme: this.theme, type: this.type, units: this.units });
  }
};
r([m({ types: m4, json: { write: true } })], d3.prototype, "endTime", void 0), r([s3("endTime")], d3.prototype, "castEndTime", null), r([m({ type: String, json: { write: true } })], d3.prototype, "field", void 0), r([m({ type: Number, json: { write: true } })], d3.prototype, "maxSliderValue", void 0), r([m({ type: Number, json: { write: true } })], d3.prototype, "minSliderValue", void 0), r([m({ type: String, json: { origins: { "web-scene": { write: false } }, write: true } })], d3.prototype, "normalizationField", null), r([m({ type: Number, value: null, json: { origins: { "web-scene": { write: false } }, write: true } })], d3.prototype, "referenceSizeScale", null), r([m({ type: S, value: null, json: { origins: { "web-scene": { write: false } }, write: true } })], d3.prototype, "referenceSizeSymbolStyle", null), r([m({ types: m4, json: { write: true } })], d3.prototype, "startTime", void 0), r([s3("startTime")], d3.prototype, "castStartTime", null), r([m({ type: [i5], json: { origins: { "web-scene": { write: false } }, write: true } })], d3.prototype, "sizeStops", null), r([m({ type: p5.apiValues, value: null, json: { type: p5.jsonValues, read: p5.read, write: p5.write } })], d3.prototype, "style", null), r([m({ type: y, value: null, json: { type: y, origins: { "web-scene": { type: c, write: { writer: (e4, t6) => {
  c.includes(e4) && (t6.theme = e4);
} } } }, write: true } })], d3.prototype, "theme", null), r([m({ type: u3.apiValues, json: { type: u3.jsonValues, read: u3.read, write: u3.write } })], d3.prototype, "type", void 0), r([m({ type: h5, json: { type: h5, write: true } })], d3.prototype, "units", void 0), d3 = a8 = r([a2("esri.renderers.support.AuthoringInfoVisualVariable")], d3);
var f2 = d3;

// node_modules/@arcgis/core/renderers/support/AuthoringInfo.js
var c2;
var h6 = new n3({ esriClassifyDefinedInterval: "defined-interval", esriClassifyEqualInterval: "equal-interval", esriClassifyManual: "manual", esriClassifyNaturalBreaks: "natural-breaks", esriClassifyQuantile: "quantile", esriClassifyStandardDeviation: "standard-deviation" });
var y2 = new n3({ classedSize: "class-breaks-size", classedColor: "class-breaks-color", univariateColorSize: "univariate-color-size", relationship: "relationship", predominance: "predominance", dotDensity: "dot-density", flow: "flow" });
var m5 = new n3({ classedSize: "class-breaks-size", classedColor: "class-breaks-color", univariateColorSize: "univariate-color-size", relationship: "relationship", predominance: "predominance", dotDensity: "dot-density" });
var f3 = ["inches", "feet", "yards", "miles", "nautical-miles", "millimeters", "centimeters", "decimeters", "meters", "kilometers"];
var v2 = ["high-to-low", "above-and-below", "above", "below"];
var w4 = ["flow-line", "wave-front"];
var b3 = ["caret", "circle-caret", "arrow", "circle-arrow", "plus-minus", "circle-plus-minus", "square", "circle", "triangle", "happy-sad", "thumb", "custom"];
var g = c2 = class extends f {
  constructor(e4) {
    super(e4), this.colorRamp = null, this.fadeRatio = null, this.isAutoGenerated = false, this.lengthUnit = null, this.maxSliderValue = null, this.minSliderValue = null, this.visualVariables = null;
  }
  get classificationMethod() {
    const e4 = this._get("classificationMethod"), t6 = this.type;
    return t6 && "relationship" !== t6 ? "class-breaks-size" === t6 || "class-breaks-color" === t6 ? e4 || "manual" : null : e4;
  }
  set classificationMethod(e4) {
    this._set("classificationMethod", e4);
  }
  readColorRamp(e4) {
    return e4 ? p2(e4) : void 0;
  }
  get fields() {
    return this.type && "predominance" !== this.type ? null : this._get("fields");
  }
  set fields(e4) {
    this._set("fields", e4);
  }
  get field1() {
    return this.type && "relationship" !== this.type ? null : this._get("field1");
  }
  set field1(e4) {
    this._set("field1", e4);
  }
  get field2() {
    return this.type && "relationship" !== this.type ? null : this._get("field2");
  }
  set field2(e4) {
    this._set("field2", e4);
  }
  get flowTheme() {
    return "flow" === this.type ? this._get("flowTheme") : null;
  }
  set flowTheme(e4) {
    this._set("flowTheme", e4);
  }
  get focus() {
    return this.type && "relationship" !== this.type ? null : this._get("focus");
  }
  set focus(e4) {
    this._set("focus", e4);
  }
  get numClasses() {
    return this.type && "relationship" !== this.type ? null : this._get("numClasses");
  }
  set numClasses(e4) {
    this._set("numClasses", e4);
  }
  get statistics() {
    return "univariate-color-size" === this.type && "above-and-below" === this.univariateTheme ? this._get("statistics") : null;
  }
  set statistics(e4) {
    this._set("statistics", e4);
  }
  get standardDeviationInterval() {
    const e4 = this.type;
    return e4 && "relationship" !== e4 && "class-breaks-size" !== e4 && "class-breaks-color" !== e4 || this.classificationMethod && "standard-deviation" !== this.classificationMethod ? null : this._get("standardDeviationInterval");
  }
  set standardDeviationInterval(e4) {
    this._set("standardDeviationInterval", e4);
  }
  get type() {
    return this._get("type");
  }
  set type(e4) {
    let t6 = e4;
    "classed-size" === e4 ? t6 = "class-breaks-size" : "classed-color" === e4 && (t6 = "class-breaks-color"), this._set("type", t6);
  }
  get univariateSymbolStyle() {
    return "univariate-color-size" === this.type && "above-and-below" === this.univariateTheme ? this._get("univariateSymbolStyle") : null;
  }
  set univariateSymbolStyle(e4) {
    this._set("univariateSymbolStyle", e4);
  }
  get univariateTheme() {
    return "univariate-color-size" === this.type ? this._get("univariateTheme") : null;
  }
  set univariateTheme(e4) {
    this._set("univariateTheme", e4);
  }
  clone() {
    var _a;
    return new c2({ classificationMethod: this.classificationMethod, colorRamp: a(this.colorRamp), fadeRatio: a(this.fadeRatio), fields: (_a = this.fields) == null ? void 0 : _a.slice(), field1: a(this.field1), field2: a(this.field2), isAutoGenerated: this.isAutoGenerated, focus: this.focus, numClasses: this.numClasses, maxSliderValue: this.maxSliderValue, minSliderValue: this.minSliderValue, lengthUnit: this.lengthUnit, statistics: this.statistics, standardDeviationInterval: this.standardDeviationInterval, type: this.type, visualVariables: this.visualVariables && this.visualVariables.map((e4) => e4.clone()), univariateSymbolStyle: this.univariateSymbolStyle, univariateTheme: this.univariateTheme, flowTheme: this.flowTheme });
  }
};
r([m({ type: h6.apiValues, value: null, json: { type: h6.jsonValues, read: h6.read, write: h6.write, origins: { "web-document": { default: "manual", type: h6.jsonValues, read: h6.read, write: h6.write } } } })], g.prototype, "classificationMethod", null), r([m({ types: m3, json: { write: true } })], g.prototype, "colorRamp", void 0), r([o("colorRamp")], g.prototype, "readColorRamp", null), r([m({ json: { write: true, origins: { "web-scene": { write: false, read: false } } } })], g.prototype, "fadeRatio", void 0), r([m({ type: [String], value: null, json: { write: true } })], g.prototype, "fields", null), r([m({ type: a7, value: null, json: { write: true } })], g.prototype, "field1", null), r([m({ type: a7, value: null, json: { write: true } })], g.prototype, "field2", null), r([m({ type: w4, value: null, json: { write: true, origins: { "web-scene": { write: false } } } })], g.prototype, "flowTheme", null), r([m({ type: ["HH", "HL", "LH", "LL"], value: null, json: { write: true } })], g.prototype, "focus", null), r([m({ type: Boolean, json: { write: true, default: false, origins: { "web-scene": { write: false } } } })], g.prototype, "isAutoGenerated", void 0), r([m({ type: Number, value: null, json: { type: x, write: true } })], g.prototype, "numClasses", null), r([m({ type: f3, json: { type: f3, read: false, write: false, origins: { "web-scene": { read: true, write: true } } } })], g.prototype, "lengthUnit", void 0), r([m({ type: Number, json: { write: true, origins: { "web-scene": { write: false, read: false } } } })], g.prototype, "maxSliderValue", void 0), r([m({ type: Number, json: { write: true, origins: { "web-scene": { write: false, read: false } } } })], g.prototype, "minSliderValue", void 0), r([m({ type: Object, value: null, json: { write: true, origins: { "web-scene": { write: false, read: false } } } })], g.prototype, "statistics", null), r([m({ type: [0.25, 0.33, 0.5, 1], value: null, json: { type: [0.25, 0.33, 0.5, 1], write: true } })], g.prototype, "standardDeviationInterval", null), r([m({ type: y2.apiValues, value: null, json: { type: y2.jsonValues, read: y2.read, write: y2.write, origins: { "web-scene": { type: m5.jsonValues, write: { writer: m5.write, overridePolicy: (e4) => ({ enabled: "flow" !== e4 }) } } } } })], g.prototype, "type", null), r([m({ type: [f2], json: { write: true } })], g.prototype, "visualVariables", void 0), r([m({ type: b3, value: null, json: { write: true, origins: { "web-scene": { write: false } } } })], g.prototype, "univariateSymbolStyle", null), r([m({ type: v2, value: null, json: { write: true, origins: { "web-scene": { write: false } } } })], g.prototype, "univariateTheme", null), g = c2 = r([a2("esri.renderers.support.AuthoringInfo")], g);
var j2 = g;

// node_modules/@arcgis/core/renderers/Renderer.js
var n7 = new n3({ simple: "simple", uniqueValue: "unique-value", classBreaks: "class-breaks", heatmap: "heatmap", dotDensity: "dot-density", dictionary: "dictionary", pieChart: "pie-chart" }, { ignoreUnknown: true });
var a9 = class extends f {
  constructor(r5) {
    super(r5), this.authoringInfo = null, this.type = null;
  }
  async getRequiredFields(r5) {
    if (!this.collectRequiredFields) return [];
    const e4 = /* @__PURE__ */ new Set();
    return await this.collectRequiredFields(e4, r5), Array.from(e4).sort();
  }
  getSymbol(r5, e4) {
  }
  async getSymbolAsync(r5, e4) {
  }
  getSymbols() {
    return [];
  }
  getAttributeHash() {
    return JSON.stringify(this);
  }
  getMeshHash() {
    return JSON.stringify(this);
  }
};
r([m({ type: j2, json: { write: true } })], a9.prototype, "authoringInfo", void 0), r([m({ type: n7.apiValues, readOnly: true, json: { type: n7.jsonValues, read: false, write: { writer: n7.write, ignoreOrigin: true } } })], a9.prototype, "type", void 0), a9 = r([a2("esri.renderers.Renderer")], a9);
var p6 = a9;

// node_modules/@arcgis/core/renderers/support/randomRotationExpression.js
function e2(e4) {
  var _a, _b;
  return ((_b = (_a = e4.match(t4)) == null ? void 0 : _a[1]) == null ? void 0 : _b.replace(/\\'/g, "'")) ?? null;
}
var t4 = /^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;

// node_modules/@arcgis/core/renderers/visualVariables/support/VisualVariableLegendOptions.js
var p7 = class extends i(f) {
  constructor() {
    super(...arguments), this.showLegend = null, this.title = null;
  }
};
r([m({ type: Boolean, json: { write: true } })], p7.prototype, "showLegend", void 0), r([m({ type: String, json: { write: true } })], p7.prototype, "title", void 0), p7 = r([a2("esri.renderers.visualVariables.support.VisualVariableLegendOptions")], p7);
var i6 = p7;

// node_modules/@arcgis/core/renderers/visualVariables/VisualVariable.js
var a10 = new n3({ colorInfo: "color", transparencyInfo: "opacity", rotationInfo: "rotation", sizeInfo: "size" });
var u4 = class extends f {
  constructor(e4) {
    super(e4), this.index = null, this.type = null, this.field = null, this.valueExpression = null, this.valueExpressionTitle = null, this.legendOptions = null;
  }
  castField(e4) {
    return null == e4 ? e4 : "function" == typeof e4 ? (n2.getLogger(this).error(".field: field must be a string value"), null) : u(e4);
  }
  get arcadeRequired() {
    return !!this.valueExpression;
  }
  clone() {
  }
  getAttributeHash() {
    return `${this.type}-${this.field}-${this.valueExpression}`;
  }
};
r([m()], u4.prototype, "index", void 0), r([m({ type: a10.apiValues, readOnly: true, json: { read: a10.read, write: a10.write } })], u4.prototype, "type", void 0), r([m({ type: String, json: { write: true } })], u4.prototype, "field", void 0), r([s3("field")], u4.prototype, "castField", null), r([m({ type: String, json: { write: true } })], u4.prototype, "valueExpression", void 0), r([m({ type: String, json: { write: true } })], u4.prototype, "valueExpressionTitle", void 0), r([m({ readOnly: true })], u4.prototype, "arcadeRequired", null), r([m({ type: i6, json: { write: true } })], u4.prototype, "legendOptions", void 0), u4 = r([a2("esri.renderers.visualVariables.VisualVariable")], u4);
var c3 = u4;

// node_modules/@arcgis/core/renderers/visualVariables/ColorVariable.js
var i7;
var a11 = i7 = class extends c3 {
  constructor(t6) {
    super(t6), this.type = "color", this.normalizationField = null;
  }
  get cache() {
    return { ipData: this._interpolateData(), hasExpression: !!this.valueExpression, compiledFunc: null };
  }
  set stops(t6) {
    t6 && Array.isArray(t6) && (t6 = t6.filter((t7) => !!t7)).sort((t7, o3) => t7.value - o3.value), this._set("stops", t6);
  }
  clone() {
    var _a;
    return new i7({ field: this.field, normalizationField: this.normalizationField, valueExpression: this.valueExpression, valueExpressionTitle: this.valueExpressionTitle, stops: this.stops && this.stops.map((t6) => t6.clone()), legendOptions: (_a = this.legendOptions) == null ? void 0 : _a.clone() });
  }
  getAttributeHash() {
    return `${super.getAttributeHash()}-${this.normalizationField}`;
  }
  _interpolateData() {
    return this.stops && this.stops.map((t6) => t6.value || 0);
  }
};
r([m({ readOnly: true })], a11.prototype, "cache", null), r([m({ type: ["color"], json: { type: ["colorInfo"] } })], a11.prototype, "type", void 0), r([m({ type: String, json: { write: true } })], a11.prototype, "normalizationField", void 0), r([m({ type: [a3], json: { write: true } })], a11.prototype, "stops", null), a11 = i7 = r([a2("esri.renderers.visualVariables.ColorVariable")], a11);
var p8 = a11;

// node_modules/@arcgis/core/renderers/visualVariables/support/OpacityStop.js
var l2;
var u5 = l2 = class extends f {
  constructor(r5) {
    super(r5), this.label = null, this.opacity = null, this.value = null;
  }
  readOpacity(r5, o3) {
    return r4(o3.transparency);
  }
  writeOpacity(r5, o3, t6) {
    o3[t6] = n5(r5);
  }
  clone() {
    return new l2({ label: this.label, opacity: this.opacity, value: this.value });
  }
};
r([m({ type: String, json: { write: true } })], u5.prototype, "label", void 0), r([m({ type: Number, json: { type: x, write: { target: "transparency" } } })], u5.prototype, "opacity", void 0), r([o("opacity", ["transparency"])], u5.prototype, "readOpacity", null), r([r2("opacity")], u5.prototype, "writeOpacity", null), r([m({ type: Number, json: { write: true } })], u5.prototype, "value", void 0), u5 = l2 = r([a2("esri.renderers.visualVariables.support.OpacityStop")], u5);
var n8 = u5;

// node_modules/@arcgis/core/renderers/visualVariables/OpacityVariable.js
var i8;
var a12 = i8 = class extends c3 {
  constructor(t6) {
    super(t6), this.type = "opacity", this.normalizationField = null;
  }
  get cache() {
    return { ipData: this._interpolateData(), hasExpression: !!this.valueExpression, compiledFunc: null };
  }
  set stops(t6) {
    t6 && Array.isArray(t6) && (t6 = t6.filter((t7) => !!t7)).sort((t7, s5) => t7.value - s5.value), this._set("stops", t6);
  }
  clone() {
    var _a;
    return new i8({ field: this.field, normalizationField: this.normalizationField, valueExpression: this.valueExpression, valueExpressionTitle: this.valueExpressionTitle, stops: this.stops && this.stops.map((t6) => t6.clone()), legendOptions: (_a = this.legendOptions) == null ? void 0 : _a.clone() });
  }
  getAttributeHash() {
    return `${super.getAttributeHash()}-${this.normalizationField}`;
  }
  _interpolateData() {
    return this.stops && this.stops.map((t6) => t6.value || 0);
  }
};
r([m({ readOnly: true })], a12.prototype, "cache", null), r([m({ type: ["opacity"], json: { type: ["transparencyInfo"] } })], a12.prototype, "type", void 0), r([m({ type: String, json: { write: true } })], a12.prototype, "normalizationField", void 0), r([m({ type: [n8], json: { write: true } })], a12.prototype, "stops", null), a12 = i8 = r([a2("esri.renderers.visualVariables.OpacityVariable")], a12);
var p9 = a12;

// node_modules/@arcgis/core/renderers/visualVariables/RotationVariable.js
var s4;
var i9 = s4 = class extends c3 {
  constructor(e4) {
    super(e4), this.axis = null, this.type = "rotation", this.rotationType = "geographic";
  }
  get cache() {
    return { hasExpression: !!this.valueExpression, compiledFunc: null };
  }
  clone() {
    var _a;
    return new s4({ axis: this.axis, rotationType: this.rotationType, field: this.field, valueExpression: this.valueExpression, valueExpressionTitle: this.valueExpressionTitle, legendOptions: (_a = this.legendOptions) == null ? void 0 : _a.clone() });
  }
};
r([m({ readOnly: true })], i9.prototype, "cache", null), r([m({ type: ["heading", "tilt", "roll"], json: { origins: { "web-scene": { default: "heading", write: true } } } })], i9.prototype, "axis", void 0), r([m({ type: ["rotation"], json: { type: ["rotationInfo"] } })], i9.prototype, "type", void 0), r([m({ type: ["geographic", "arithmetic"], json: { write: true, origins: { "web-document": { write: true, default: "geographic" } } } })], i9.prototype, "rotationType", void 0), i9 = s4 = r([a2("esri.renderers.visualVariables.RotationVariable")], i9);
var a13 = i9;

// node_modules/@arcgis/core/renderers/visualVariables/support/castSizeVariable.js
function e3(e4) {
  return o2(e4);
}

// node_modules/@arcgis/core/renderers/visualVariables/support/SizeVariableLegendOptions.js
var t5 = class extends i6 {
  constructor() {
    super(...arguments), this.customValues = null;
  }
};
r([m({ type: [Number], json: { write: true } })], t5.prototype, "customValues", void 0), t5 = r([a2("esri.renderers.visualVariables.support.SizeVariableLegendOptions")], t5);
var p10 = t5;

// node_modules/@arcgis/core/renderers/visualVariables/SizeVariable.js
var z;
var v3 = new n3({ width: "width", depth: "depth", height: "height", widthAndDepth: "width-and-depth", all: "all" });
var w5 = new n3({ unknown: "unknown", inch: "inches", foot: "feet", yard: "yards", mile: "miles", "nautical-mile": "nautical-miles", millimeter: "millimeters", centimeter: "centimeters", decimeter: "decimeters", meter: "meters", kilometer: "kilometers" });
function g2(e4) {
  if (null != e4) return "string" == typeof e4 || "number" == typeof e4 ? e3(e4) : "size" === e4.type ? e(e4) ? e4 : (delete (e4 = { ...e4 }).type, new f4(e4)) : void 0;
}
function V(e4, t6, i11) {
  if ("object" != typeof e4) return e4;
  const s5 = new f4();
  return s5.read(e4, i11), s5;
}
var f4 = z = class extends c3 {
  constructor(e4) {
    super(e4), this.axis = null, this.legendOptions = null, this.normalizationField = null, this.scaleBy = null, this.target = null, this.type = "size", this.useSymbolValue = null, this.valueExpression = null, this.valueRepresentation = null, this.valueUnit = null;
  }
  get cache() {
    return { ipData: this._interpolateData(), hasExpression: !!this.valueExpression, compiledFunc: null, isScaleDriven: null != this.valueExpression && v.test(this.valueExpression) };
  }
  set index(e4) {
    e(this.maxSize) && (this.maxSize.index = `visualVariables[${e4}].maxSize`), e(this.minSize) && (this.minSize.index = `visualVariables[${e4}].minSize`), this._set("index", e4);
  }
  get inputValueType() {
    return t(this);
  }
  set maxDataValue(e4) {
    e4 && this.stops && (n2.getLogger(this).warn("cannot set maxDataValue when stops is not null."), e4 = null), this._set("maxDataValue", e4);
  }
  set maxSize(e4) {
    e4 && this.stops && (n2.getLogger(this).warn("cannot set maxSize when stops is not null."), e4 = null), this._set("maxSize", e4);
  }
  castMaxSize(e4) {
    return g2(e4);
  }
  readMaxSize(e4, t6, i11) {
    return V(e4, t6, i11);
  }
  set minDataValue(e4) {
    e4 && this.stops && (n2.getLogger(this).warn("cannot set minDataValue when stops is not null."), e4 = null), this._set("minDataValue", e4);
  }
  set minSize(e4) {
    e4 && this.stops && (n2.getLogger(this).warn("cannot set minSize when stops is not null."), e4 = null), this._set("minSize", e4);
  }
  castMinSize(e4) {
    return g2(e4);
  }
  readMinSize(e4, t6, i11) {
    return V(e4, t6, i11);
  }
  get arcadeRequired() {
    return !!this.valueExpression || (null != this.minSize && "object" == typeof this.minSize && this.minSize.arcadeRequired || null != this.maxSize && "object" == typeof this.maxSize && this.maxSize.arcadeRequired);
  }
  set stops(e4) {
    null == this.minDataValue && null == this.maxDataValue && null == this.minSize && null == this.maxSize ? e4 && Array.isArray(e4) && (e4 = e4.filter((e5) => !!e5)).sort((e5, t6) => e5.value - t6.value) : e4 && (n2.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."), e4 = null), this._set("stops", e4);
  }
  get transformationType() {
    return a5(this, this.inputValueType);
  }
  readValueExpression(e4, t6) {
    return e4 || t6.expression && "$view.scale";
  }
  writeValueExpressionWebScene(e4, i11, s5, r5) {
    if ("$view.scale" === e4) {
      if (r5 == null ? void 0 : r5.messages) {
        const e5 = this.index, i12 = "string" == typeof e5 ? e5 : `visualVariables[${e5}]`;
        r5.messages.push(new s("property:unsupported", this.type + "VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.", { instance: this, propertyName: i12 + ".valueExpression", context: r5 }));
      }
    } else i11[s5] = e4;
  }
  readValueUnit(e4) {
    return e4 ? w5.read(e4) : null;
  }
  clone() {
    var _a, _b;
    return new z({ axis: this.axis, field: this.field, valueExpression: this.valueExpression, valueExpressionTitle: this.valueExpressionTitle, maxDataValue: this.maxDataValue, maxSize: e(this.maxSize) ? this.maxSize.clone() : this.maxSize, minDataValue: this.minDataValue, minSize: e(this.minSize) ? this.minSize.clone() : this.minSize, normalizationField: this.normalizationField, stops: (_a = this.stops) == null ? void 0 : _a.map((e4) => e4.clone()), target: this.target, useSymbolValue: this.useSymbolValue, valueRepresentation: this.valueRepresentation, valueUnit: this.valueUnit, legendOptions: (_b = this.legendOptions) == null ? void 0 : _b.clone() });
  }
  flipSizes() {
    if (this.transformationType === i3.ClampedLinear) {
      const { minSize: e4, maxSize: t6 } = this;
      return this.minSize = t6, this.maxSize = e4, this;
    }
    if (this.transformationType === i3.Stops) {
      const e4 = this.stops;
      if (!e4) return this;
      const t6 = e4.map((e5) => e5.size).reverse(), i11 = e4.length;
      for (let s5 = 0; s5 < i11; s5++) e4[s5].size = t6[s5];
      return this;
    }
    return this;
  }
  getAttributeHash() {
    return `${super.getAttributeHash()}-${this.target}-${this.normalizationField}`;
  }
  _interpolateData() {
    var _a;
    return (_a = this.stops) == null ? void 0 : _a.map((e4) => e4.value || 0);
  }
};
r([m({ readOnly: true })], f4.prototype, "cache", null), r([m({ type: v3.apiValues, json: { type: v3.jsonValues, origins: { "web-map": { read: false } }, read: v3.read, write: v3.write } })], f4.prototype, "axis", void 0), r([m()], f4.prototype, "index", null), r([m({ type: String, readOnly: true })], f4.prototype, "inputValueType", null), r([m({ type: p10, json: { write: true } })], f4.prototype, "legendOptions", void 0), r([m({ type: Number, value: null, json: { write: true } })], f4.prototype, "maxDataValue", null), r([m({ type: Number, value: null, json: { write: true } })], f4.prototype, "maxSize", null), r([s3("maxSize")], f4.prototype, "castMaxSize", null), r([o("maxSize")], f4.prototype, "readMaxSize", null), r([m({ type: Number, value: null, json: { write: true } })], f4.prototype, "minDataValue", null), r([m({ type: Number, value: null, json: { write: true } })], f4.prototype, "minSize", null), r([s3("minSize")], f4.prototype, "castMinSize", null), r([o("minSize")], f4.prototype, "readMinSize", null), r([m({ type: String, json: { write: true } })], f4.prototype, "normalizationField", void 0), r([m({ readOnly: true })], f4.prototype, "arcadeRequired", null), r([m({ type: String })], f4.prototype, "scaleBy", void 0), r([m({ type: [a4], value: null, json: { write: true } })], f4.prototype, "stops", null), r([m({ type: ["outline"], json: { write: true } })], f4.prototype, "target", void 0), r([m({ type: String, readOnly: true })], f4.prototype, "transformationType", null), r([m({ type: ["size"], json: { type: ["sizeInfo"] } })], f4.prototype, "type", void 0), r([m({ type: Boolean, json: { write: true, origins: { "web-map": { read: false } } } })], f4.prototype, "useSymbolValue", void 0), r([m({ type: String, json: { write: true } })], f4.prototype, "valueExpression", void 0), r([o("valueExpression", ["valueExpression", "expression"])], f4.prototype, "readValueExpression", null), r([r2("web-scene", "valueExpression")], f4.prototype, "writeValueExpressionWebScene", null), r([m({ type: ["radius", "diameter", "area", "width", "distance"], json: { write: true } })], f4.prototype, "valueRepresentation", void 0), r([m({ type: w5.apiValues, json: { write: w5.write, origins: { "web-map": { read: false }, "web-scene": { write: true }, "portal-item": { write: true } } } })], f4.prototype, "valueUnit", void 0), r([o("valueUnit")], f4.prototype, "readValueUnit", null), f4 = z = r([a2("esri.renderers.visualVariables.SizeVariable")], f4);
var b4 = f4;

// node_modules/@arcgis/core/renderers/visualVariables/VisualVariableFactory.js
var b5 = { color: p8, size: b4, opacity: p9, rotation: a13 };
var u6 = new n3({ colorInfo: "color", transparencyInfo: "opacity", rotationInfo: "rotation", sizeInfo: "size" });
var h7 = /^\[([^\]]+)\]$/i;
var m6 = class extends b {
  constructor() {
    super(...arguments), this.colorVariables = null, this.opacityVariables = null, this.rotationVariables = null, this.sizeVariables = null;
  }
  set visualVariables(r5) {
    if (this._resetVariables(), r5 = r5 == null ? void 0 : r5.filter((r6) => !!r6), r5 == null ? void 0 : r5.length) {
      for (const s5 of r5) switch (s5.type) {
        case "color":
          this.colorVariables.push(s5);
          break;
        case "opacity":
          this.opacityVariables.push(s5);
          break;
        case "rotation":
          this.rotationVariables.push(s5);
          break;
        case "size":
          this.sizeVariables.push(s5);
      }
      if (this.sizeVariables.length) {
        this.sizeVariables.some((r6) => !!r6.target) && r5.sort((r6, s5) => {
          let o3 = null;
          return o3 = r6.target === s5.target ? 0 : r6.target ? 1 : -1, o3;
        });
      }
      for (let s5 = 0; s5 < r5.length; s5++) {
        r5[s5].index = s5;
      }
      this._set("visualVariables", r5);
    } else this._set("visualVariables", r5);
  }
  readVariables(r5, s5, o3) {
    const { rotationExpression: a15, rotationType: i11 } = s5, l5 = a15 == null ? void 0 : a15.match(h7), n12 = l5 == null ? void 0 : l5[1];
    if (n12 && (r5 || (r5 = []), r5.push({ type: "rotationInfo", rotationType: i11, field: n12 })), r5) return r5.map((r6) => {
      const s6 = u6.read(r6.type), a16 = b5[s6];
      a16 || (n2.getLogger(this).warn(`Unknown variable type: ${s6}`), (o3 == null ? void 0 : o3.messages) && o3.messages.push(new s2("visual-variable:unsupported", `visualVariable of type '${s6}' is not supported`, { definition: r6, context: o3 })));
      const i12 = new a16();
      return i12.read(r6, o3), i12;
    });
  }
  writeVariables(r5, s5) {
    const o3 = [];
    for (const e4 of r5) {
      const r6 = e4.toJSON(s5);
      r6 && o3.push(r6);
    }
    return o3;
  }
  _resetVariables() {
    this.colorVariables = [], this.opacityVariables = [], this.rotationVariables = [], this.sizeVariables = [];
  }
};
r([m()], m6.prototype, "visualVariables", null), m6 = r([a2("esri.renderers.visualVariables.VisualVariableFactory")], m6);
var V2 = m6;

// node_modules/@arcgis/core/renderers/mixins/VisualVariablesMixin.js
var m7 = { base: c3, key: "type", typeMap: { opacity: p9, color: p8, rotation: a13, size: b4 } };
var v4 = (l5) => {
  let u8 = class extends l5 {
    constructor() {
      super(...arguments), this._vvFactory = new V2();
    }
    set visualVariables(r5) {
      this._vvFactory.visualVariables = r5, this._set("visualVariables", this._vvFactory.visualVariables);
    }
    readVisualVariables(r5, a15, s5) {
      return this._vvFactory.readVariables(r5, a15, s5);
    }
    writeVisualVariables(r5, a15, s5, i11) {
      a15[s5] = this._vvFactory.writeVariables(r5, i11);
    }
    get arcadeRequiredForVisualVariables() {
      if (!this.visualVariables) return false;
      for (const r5 of this.visualVariables) if (r5.arcadeRequired) return true;
      return false;
    }
    hasVisualVariables(r5, a15) {
      return r5 ? this.getVisualVariablesForType(r5, a15).length > 0 : this.getVisualVariablesForType("size", a15).length > 0 || this.getVisualVariablesForType("color", a15).length > 0 || this.getVisualVariablesForType("opacity", a15).length > 0 || this.getVisualVariablesForType("rotation", a15).length > 0;
    }
    getVisualVariablesForType(r5, a15) {
      const s5 = this.visualVariables;
      return s5 ? s5.filter((s6) => s6.type === r5 && ("string" == typeof a15 ? s6.target === a15 : false !== a15 || !s6.target)) : [];
    }
    async collectVVRequiredFields(r5, a15) {
      let s5 = [];
      this.visualVariables && (s5 = s5.concat(this.visualVariables));
      for (const i11 of s5) i11 && (i11.field && w3(r5, a15, i11.field), i11.normalizationField && w3(r5, a15, i11.normalizationField), i11.valueExpression && (y3(i11.valueExpression, r5, a15) || await h4(r5, a15, i11.valueExpression)));
    }
  };
  return r([m({ types: [m7], value: null, json: { write: true } })], u8.prototype, "visualVariables", null), r([o("visualVariables", ["visualVariables", "rotationType", "rotationExpression"])], u8.prototype, "readVisualVariables", null), r([r2("visualVariables")], u8.prototype, "writeVisualVariables", null), u8 = r([a2("esri.renderers.mixins.VisualVariablesMixin")], u8), u8;
};
function y3(r5, a15, s5) {
  const i11 = e2(r5);
  return null != i11 && (w3(a15, s5, i11), true);
}

// node_modules/@arcgis/core/renderers/support/commonProperties.js
var y4 = { types: h3, json: { write: { writer: l }, origins: { "web-scene": { types: w2, write: { writer: l }, read: { reader: u2({ types: w2 }) } } } } };
var m8 = n({ json: { origins: { "web-scene": { write: { isRequired: true } } } } }, y4);
var n9 = { types: { base: n4, key: "type", typeMap: { "simple-fill": j.typeMap["simple-fill"], "picture-fill": j.typeMap["picture-fill"], "polygon-3d": j.typeMap["polygon-3d"], cim: j.typeMap.cim } }, json: { write: { writer: l }, origins: { "web-scene": { type: h, write: { writer: l } } } } };
var a14 = { cast: (e4) => null == e4 || "string" == typeof e4 || "number" == typeof e4 ? e4 : `${e4}`, json: { type: String, write: { writer: (e4, r5) => {
  r5.value = e4 == null ? void 0 : e4.toString();
} } } };

// node_modules/@arcgis/core/renderers/support/UniqueValue.js
var c4 = class extends i(f) {
  constructor(o3) {
    super(o3), this.value = null, this.value2 = null, this.value3 = null;
  }
};
r([m(a14)], c4.prototype, "value", void 0), r([m(a14)], c4.prototype, "value2", void 0), r([m(a14)], c4.prototype, "value3", void 0), c4 = r([a2("esri.renderers.support.UniqueValue")], c4);
var l3 = c4;

// node_modules/@arcgis/core/renderers/support/UniqueValueClass.js
var n10 = class extends i(f) {
  constructor(r5) {
    super(r5), this.description = null, this.label = null, this.symbol = null, this.values = null;
  }
  castValues(r5) {
    if (null == r5) return null;
    const o3 = typeof (r5 = Array.isArray(r5) ? r5 : [r5])[0];
    return "string" === o3 || "number" === o3 ? r5.map((r6) => new l3({ value: r6 })) : "object" === o3 ? r5[0] instanceof l3 ? r5 : r5.map((r6) => new l3(r6)) : null;
  }
};
r([m({ type: String, json: { write: true } })], n10.prototype, "description", void 0), r([m({ type: String, json: { write: true } })], n10.prototype, "label", void 0), r([m(y4)], n10.prototype, "symbol", void 0), r([m({ type: [l3], json: { type: [[String]], read: { reader: (r5) => r5 ? r5.map((r6) => new l3({ value: r6[0], value2: r6[1], value3: r6[2] })) : null }, write: { writer: (r5, e4) => {
  const t6 = [];
  for (const s5 of r5) {
    const r6 = [s5.value, s5.value2, s5.value3].filter(F).map((r7) => r7.toString());
    t6.push(r6);
  }
  e4.values = t6;
} } } })], n10.prototype, "values", void 0), r([s3("values")], n10.prototype, "castValues", null), n10 = r([a2("esri.renderers.support.UniqueValueClass")], n10);
var u7 = n10;

// node_modules/@arcgis/core/renderers/support/UniqueValueGroup.js
var i10 = class extends i(f) {
  constructor(o3) {
    super(o3), this.heading = null, this.classes = null;
  }
};
r([m({ type: String, json: { write: true } })], i10.prototype, "heading", void 0), r([m({ type: [u7], json: { write: true } })], i10.prototype, "classes", void 0), i10 = r([a2("esri.renderers.support.UniqueValueGroup")], i10);
var c5 = i10;

// node_modules/@arcgis/core/renderers/support/UniqueValueInfo.js
var l4;
var p11 = l4 = class extends f {
  constructor(o3) {
    super(o3), this.description = null, this.label = null, this.symbol = null, this.value = null;
  }
  clone() {
    return new l4({ value: this.value, description: this.description, label: this.label, symbol: this.symbol ? this.symbol.clone() : null });
  }
  getMeshHash() {
    var _a;
    const o3 = JSON.stringify((_a = this.symbol) == null ? void 0 : _a.toJSON());
    return `${this.value}.${o3}`;
  }
};
r([m({ type: String, json: { write: true } })], p11.prototype, "description", void 0), r([m({ type: String, json: { write: true } })], p11.prototype, "label", void 0), r([m(m8)], p11.prototype, "symbol", void 0), r([m(a14)], p11.prototype, "value", void 0), p11 = l4 = r([a2("esri.renderers.support.UniqueValueInfo")], p11);
var n11 = p11;

// node_modules/@arcgis/core/renderers/UniqueValueRenderer.js
var E;
var M = "esri.renderers.UniqueValueRenderer";
var N = () => n2.getLogger(M);
var R = "uvInfos-watcher";
var P = "uvGroups-watcher";
var C = ",";
var $ = w(n11);
function z2(e4) {
  const { field1: t6, field2: s5, field3: i11, fieldDelimiter: o3, uniqueValueInfos: l5, valueExpression: r5 } = e4, u8 = !(!t6 || !s5);
  return [{ classes: (l5 ?? []).map((e5) => {
    var _a;
    const { symbol: l6, label: n12, value: a15, description: p12 } = e5, [f5, d4, c6] = u8 ? ((_a = a15 == null ? void 0 : a15.toString()) == null ? void 0 : _a.split(o3 || "")) || [] : [a15], h8 = [];
    return (t6 || r5) && h8.push(f5), s5 && h8.push(d4), i11 && h8.push(c6), { symbol: l6, label: n12, values: [h8], description: p12 };
  }) }];
}
function L(e4) {
  return null != e4 && "" !== e4 && ("string" != typeof e4 || "" !== e4.trim() && "<null>" !== e4.toLowerCase()) || (e4 = null), e4 + "";
}
var k = E = class extends v4(p6) {
  constructor(e4) {
    super(e4), this._valueInfoMap = {}, this._isDefaultSymbolDerived = false, this._isInfosSource = null, this.type = "unique-value", this.backgroundFillSymbol = null, this.orderByClassesEnabled = false, this.valueExpressionTitle = null, this.legendOptions = null, this.defaultLabel = null, this.portal = null, this.styleOrigin = null, this.diff = { uniqueValueInfos(e5, t6) {
      if (!e5 && !t6) return;
      if (!e5 || !t6) return { type: "complete", oldValue: e5, newValue: t6 };
      let s5 = false;
      const i11 = { type: "collection", added: [], removed: [], changed: [], unchanged: [] };
      for (let o3 = 0; o3 < t6.length; o3++) {
        const l5 = e5.find((e6) => e6.value === t6[o3].value);
        l5 ? d2(l5, t6[o3]) ? (i11.changed.push({ type: "complete", oldValue: l5, newValue: t6[o3] }), s5 = true) : i11.unchanged.push({ oldValue: l5, newValue: t6[o3] }) : (i11.added.push(t6[o3]), s5 = true);
      }
      for (let o3 = 0; o3 < e5.length; o3++) {
        t6.find((t7) => t7.value === e5[o3].value) || (i11.removed.push(e5[o3]), s5 = true);
      }
      return s5 ? i11 : void 0;
    } }, this._set("uniqueValueInfos", []), this._set("uniqueValueGroups", []);
  }
  get _cache() {
    return { compiledFunc: null };
  }
  set field(e4) {
    this._set("field", e4), this._updateFieldDelimiter(), this._updateUniqueValues();
  }
  castField(e4) {
    return null == e4 || "function" == typeof e4 ? e4 : u(e4);
  }
  writeField(e4, t6, i11, o3) {
    "string" == typeof e4 ? t6[i11] = e4 : (o3 == null ? void 0 : o3.messages) ? o3.messages.push(new s("property:unsupported", "UniqueValueRenderer.field set to a function cannot be written to JSON")) : N().error(".field: cannot write field to JSON since it's not a string value");
  }
  set field2(e4) {
    this._set("field2", e4), this._updateFieldDelimiter(), this._updateUniqueValues();
  }
  set field3(e4) {
    this._set("field3", e4), this._updateUniqueValues();
  }
  set valueExpression(e4) {
    this._set("valueExpression", e4), this._updateUniqueValues();
  }
  set defaultSymbol(e4) {
    this._isDefaultSymbolDerived = false, this._set("defaultSymbol", e4);
  }
  set fieldDelimiter(e4) {
    this._set("fieldDelimiter", e4), this._updateUniqueValues();
  }
  readPortal(e4, t6, s5) {
    return s5.portal || b2.getDefault();
  }
  readStyleOrigin(e4, t6, s5) {
    if (t6.styleName) return Object.freeze({ styleName: t6.styleName });
    if (t6.styleUrl) {
      const e5 = p(t6.styleUrl, s5);
      return Object.freeze({ styleUrl: e5 });
    }
  }
  writeStyleOrigin(e4, t6, s5, i11) {
    e4.styleName ? t6.styleName = e4.styleName : e4.styleUrl && (t6.styleUrl = m2(e4.styleUrl, i11));
  }
  set uniqueValueGroups(e4) {
    this.styleOrigin ? N().error("#uniqueValueGroups=", "Cannot modify unique value groups of a UniqueValueRenderer created from a web style") : (this._set("uniqueValueGroups", e4), this._updateInfosFromGroups(), this._isInfosSource = false, this._watchUniqueValueGroups());
  }
  set uniqueValueInfos(e4) {
    this.styleOrigin ? N().error("#uniqueValueInfos=", "Cannot modify unique value infos of a UniqueValueRenderer created from a web style") : (this._set("uniqueValueInfos", e4), this._updateValueInfoMap(), this._updateGroupsFromInfos(), this._isInfosSource = true, this._watchUniqueValueInfos());
  }
  addUniqueValueInfo(e4, s5) {
    var _a;
    if (this.styleOrigin) return void N().error("#addUniqueValueInfo()", "Cannot modify unique value infos of a UniqueValueRenderer created from a web style");
    let i11;
    i11 = "object" == typeof e4 ? $(e4) : new n11({ value: e4, symbol: B(s5) }), (_a = this.uniqueValueInfos) == null ? void 0 : _a.push(i11), this._valueInfoMap[L(i11.value)] = i11, this._updateGroupsFromInfos(), this._isInfosSource = true, this._watchUniqueValueInfos();
  }
  removeUniqueValueInfo(e4) {
    if (this.styleOrigin) return void N().error("#removeUniqueValueInfo()", "Cannot modify unique value infos of a UniqueValueRenderer created from a web style");
    const t6 = this.uniqueValueInfos;
    if (t6) for (let s5 = 0; s5 < t6.length; s5++) {
      const i11 = t6[s5];
      if (String(i11.value) === String(e4)) {
        delete this._valueInfoMap[L(e4)], t6.splice(s5, 1);
        break;
      }
    }
    this._updateGroupsFromInfos(), this._isInfosSource = true, this._watchUniqueValueInfos();
  }
  async getUniqueValueInfo(e4, t6) {
    let s5 = t6;
    return this.valueExpression && null == (t6 == null ? void 0 : t6.arcade) && (s5 = { ...s5, arcade: await i4() }), this._getUniqueValueInfo(e4, s5);
  }
  getSymbol(e4, t6) {
    if (this.valueExpression && null == (t6 == null ? void 0 : t6.arcade)) return void N().error("#getSymbol()", "Please use getSymbolAsync if valueExpression is used");
    const s5 = this._getUniqueValueInfo(e4, t6);
    return (s5 == null ? void 0 : s5.symbol) || this.defaultSymbol;
  }
  async getSymbolAsync(e4, t6) {
    let s5 = t6;
    if (this.valueExpression && null == (s5 == null ? void 0 : s5.arcade)) {
      const e5 = await i4(), { arcadeUtils: t7 } = e5;
      t7.hasGeometryOperations(this.valueExpression) && await t7.enableGeometryOperations(), s5 = { ...s5, arcade: e5 };
    }
    const i11 = this._getUniqueValueInfo(e4, s5);
    return (i11 == null ? void 0 : i11.symbol) || this.defaultSymbol;
  }
  getSymbols() {
    const e4 = [];
    for (const t6 of this.uniqueValueInfos ?? []) t6.symbol && e4.push(t6.symbol);
    return this.defaultSymbol && e4.push(this.defaultSymbol), e4;
  }
  getAttributeHash() {
    var _a;
    return ((_a = this.visualVariables) == null ? void 0 : _a.reduce((e4, t6) => e4 + t6.getAttributeHash(), "")) ?? "";
  }
  getMeshHash() {
    var _a;
    const e4 = JSON.stringify(this.backgroundFillSymbol), t6 = JSON.stringify(this.defaultSymbol), s5 = (_a = this.uniqueValueInfos) == null ? void 0 : _a.reduce((e5, t7) => e5 + t7.getMeshHash(), "");
    return `${e4}.${t6}.${s5}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`;
  }
  clone() {
    const e4 = new E({ field: this.field, field2: this.field2, field3: this.field3, defaultLabel: this.defaultLabel, defaultSymbol: a(this.defaultSymbol), orderByClassesEnabled: this.orderByClassesEnabled, valueExpression: this.valueExpression, valueExpressionTitle: this.valueExpressionTitle, fieldDelimiter: this.fieldDelimiter, visualVariables: a(this.visualVariables), legendOptions: a(this.legendOptions), authoringInfo: a(this.authoringInfo), backgroundFillSymbol: a(this.backgroundFillSymbol) });
    this._isDefaultSymbolDerived && (e4._isDefaultSymbolDerived = true), e4._set("portal", this.portal);
    const t6 = a(this.uniqueValueInfos), s5 = a(this.uniqueValueGroups);
    return this.styleOrigin && (e4._set("styleOrigin", Object.freeze(a(this.styleOrigin))), Object.freeze(t6), Object.freeze(s5)), e4._set("uniqueValueInfos", t6), e4._updateValueInfoMap(), e4._set("uniqueValueGroups", s5), e4._isInfosSource = this._isInfosSource, e4._watchUniqueValueInfosAndGroups(), e4;
  }
  get arcadeRequired() {
    return this.arcadeRequiredForVisualVariables || !!this.valueExpression;
  }
  async collectRequiredFields(e4, t6) {
    const s5 = [this.collectVVRequiredFields(e4, t6), this.collectSymbolFields(e4, t6)];
    await Promise.all(s5);
  }
  async collectSymbolFields(e4, t6) {
    const s5 = [...this.getSymbols().map((s6) => s6.collectRequiredFields(e4, t6)), h4(e4, t6, this.valueExpression)];
    w3(e4, t6, this.field), w3(e4, t6, this.field2), w3(e4, t6, this.field3), await Promise.all(s5);
  }
  populateFromStyle() {
    return i2(this.styleOrigin, { portal: this.portal }).then((e4) => {
      var _a;
      const t6 = [];
      return this._valueInfoMap = {}, (e4 == null ? void 0 : e4.data) && Array.isArray(e4.data.items) && e4.data.items.forEach((s5) => {
        const i11 = new h2({ styleUrl: e4.styleUrl, styleName: e4.styleName, portal: this.portal, name: s5.name });
        this.defaultSymbol || s5.name !== e4.data.defaultItem || (this.defaultSymbol = i11, this._isDefaultSymbolDerived = true);
        const o3 = new n11({ value: s5.name, symbol: i11 });
        t6.push(o3), this._valueInfoMap[L(s5.name)] = o3;
      }), this._set("uniqueValueInfos", Object.freeze(t6)), this._updateGroupsFromInfos(true), this._isInfosSource = null, this._watchUniqueValueInfos(), !this.defaultSymbol && ((_a = this.uniqueValueInfos) == null ? void 0 : _a.length) && (this.defaultSymbol = this.uniqueValueInfos[0].symbol, this._isDefaultSymbolDerived = true), this;
    });
  }
  _updateFieldDelimiter() {
    this.field && this.field2 && !this.fieldDelimiter && this._set("fieldDelimiter", C);
  }
  _updateUniqueValues() {
    null != this._isInfosSource && (this._isInfosSource ? this._updateGroupsFromInfos() : this._updateInfosFromGroups());
  }
  _updateValueInfoMap() {
    this._valueInfoMap = {};
    const { uniqueValueInfos: e4 } = this;
    if (e4) for (const t6 of e4) this._valueInfoMap[L(t6.value)] = t6;
  }
  _watchUniqueValueInfosAndGroups() {
    this._watchUniqueValueInfos(), this._watchUniqueValueGroups();
  }
  _watchUniqueValueInfos() {
    this.removeHandles(R);
    const { uniqueValueInfos: e4 } = this;
    if (e4) {
      const t6 = [];
      for (const s5 of e4) t6.push(d(() => ({ symbol: s5.symbol, value: s5.value, label: s5.label, description: s5.description }), (e5, t7) => {
        e5 !== t7 && (this._updateGroupsFromInfos(), this._isInfosSource = true);
      }, { sync: true }));
      this.addHandles(t6, R);
    }
  }
  _watchUniqueValueGroups() {
    this.removeHandles(P);
    const { uniqueValueGroups: e4 } = this;
    if (e4) {
      const t6 = [];
      for (const s5 of e4) {
        t6.push(d(() => ({ classes: s5.classes }), (e5, t7) => {
          e5 !== t7 && (this._updateInfosFromGroups(), this._isInfosSource = false);
        }, { sync: true }));
        for (const e5 of s5.classes ?? []) t6.push(d(() => ({ symbol: e5.symbol, values: e5.values, label: e5.label, description: e5.description }), (e6, t7) => {
          e6 !== t7 && (this._updateInfosFromGroups(), this._isInfosSource = false);
        }, { sync: true }));
      }
      this.addHandles(t6, P);
    }
  }
  _updateInfosFromGroups() {
    if (!this.uniqueValueGroups) return this._set("uniqueValueInfos", null), this._updateValueInfoMap(), void this._watchUniqueValueInfos();
    const e4 = [], { field: t6, field2: s5, field3: i11, fieldDelimiter: o3, uniqueValueGroups: l5, valueExpression: r5 } = this;
    if (!t6 && !r5) return this._set("uniqueValueInfos", e4), this._updateValueInfoMap(), void this._watchUniqueValueInfos();
    const u8 = !(!t6 || !s5);
    for (const n12 of l5) for (const t7 of n12.classes ?? []) {
      const { symbol: l6, label: r6, values: n13, description: a15 } = t7;
      for (const t8 of n13 ?? []) {
        const { value: n14, value2: p12, value3: f5 } = t8, d4 = [n14];
        s5 && d4.push(p12), i11 && d4.push(f5);
        const c6 = u8 ? d4.join(o3 || "") : d4[0] ?? void 0;
        e4.push(new n11({ symbol: l6, label: r6, value: c6, description: a15 }));
      }
    }
    this._set("uniqueValueInfos", e4), this._updateValueInfoMap(), this._watchUniqueValueInfos();
  }
  _updateGroupsFromInfos(e4 = false) {
    if (!this.uniqueValueInfos) return this._set("uniqueValueGroups", null), void this._watchUniqueValueGroups();
    const { field: t6, field2: s5, valueExpression: i11, fieldDelimiter: o3, uniqueValueInfos: l5 } = this;
    if (!t6 && !i11 || !l5.length) return this._set("uniqueValueGroups", []), void this._watchUniqueValueGroups();
    const r5 = !(!t6 || !s5), u8 = l5.map((e5) => {
      var _a;
      const { symbol: t7, label: s6, value: i12, description: l6 } = e5, [u9, n13, a15] = r5 ? ((_a = i12 == null ? void 0 : i12.toString()) == null ? void 0 : _a.split(o3 || "")) || [] : [i12];
      return new u7({ symbol: t7, label: s6, description: l6, values: [new l3({ value: u9, value2: n13, value3: a15 })] });
    }), n12 = [new c5({ classes: u8 })];
    e4 && Object.freeze(n12), this._set("uniqueValueGroups", n12), this._watchUniqueValueGroups();
  }
  _getUniqueValueInfo(e4, t6) {
    return this.valueExpression ? this._getUnqiueValueInfoForExpression(e4, t6) : this._getUnqiueValueInfoForFields(e4);
  }
  _getUnqiueValueInfoForExpression(e4, t6) {
    const { viewingMode: s5, scale: i11, spatialReference: o3, arcade: l5, timeZone: r5 } = t6 ?? {};
    let u8 = this._cache.compiledFunc;
    const n12 = l5.arcadeUtils;
    if (!u8) {
      const e5 = n12.createSyntaxTree(this.valueExpression);
      u8 = n12.createFunction(e5), this._cache.compiledFunc = u8;
    }
    const a15 = n12.executeFunction(u8, n12.createExecContext(e4, n12.getViewInfo({ viewingMode: s5, scale: i11, spatialReference: o3 }), r5));
    return this._valueInfoMap[L(a15)];
  }
  _getUnqiueValueInfoForFields(e4) {
    const t6 = this.field, s5 = e4.attributes;
    let i11;
    if (this.field2) {
      const e5 = this.field2, o3 = this.field3, l5 = [];
      t6 && l5.push(s5[t6]), e5 && l5.push(s5[e5]), o3 && l5.push(s5[o3]), i11 = l5.join(this.fieldDelimiter || "");
    } else t6 && (i11 = s5[t6]);
    return this._valueInfoMap[L(i11)];
  }
  static fromPortalStyle(e4, t6) {
    const s5 = new E(t6 == null ? void 0 : t6.properties);
    s5._set("styleOrigin", Object.freeze({ styleName: e4 })), s5._set("portal", (t6 == null ? void 0 : t6.portal) || b2.getDefault());
    const i11 = s5.populateFromStyle();
    return i11.catch((t7) => {
      N().error(`#fromPortalStyle('${e4}'[, ...])`, "Failed to create unique value renderer from style name", t7);
    }), i11;
  }
  static fromStyleUrl(e4, t6) {
    const s5 = new E(t6 == null ? void 0 : t6.properties);
    s5._set("styleOrigin", Object.freeze({ styleUrl: e4 }));
    const i11 = s5.populateFromStyle();
    return i11.catch((t7) => {
      N().error(`#fromStyleUrl('${e4}'[, ...])`, "Failed to create unique value renderer from style URL", t7);
    }), i11;
  }
};
r([m({ readOnly: true })], k.prototype, "_cache", null), r([r3({ uniqueValue: "unique-value" })], k.prototype, "type", void 0), r([m(n9)], k.prototype, "backgroundFillSymbol", void 0), r([m({ value: null, json: { type: String, read: { source: "field1" }, write: { target: "field1" } } })], k.prototype, "field", null), r([s3("field")], k.prototype, "castField", null), r([r2("field")], k.prototype, "writeField", null), r([m({ type: String, value: null, json: { write: true } })], k.prototype, "field2", null), r([m({ type: String, value: null, json: { write: true } })], k.prototype, "field3", null), r([m({ type: Boolean, json: { name: "drawInClassOrder", default: false, write: true, origins: { "web-scene": { write: false } } } })], k.prototype, "orderByClassesEnabled", void 0), r([m({ type: String, value: null, json: { write: true } })], k.prototype, "valueExpression", null), r([m({ type: String, json: { write: true } })], k.prototype, "valueExpressionTitle", void 0), r([m({ type: a6, json: { write: true } })], k.prototype, "legendOptions", void 0), r([m({ type: String, json: { write: true } })], k.prototype, "defaultLabel", void 0), r([m(n({ ...y4 }, { json: { write: { overridePolicy() {
  return { enabled: !this._isDefaultSymbolDerived };
} }, origins: { "web-scene": { write: { overridePolicy() {
  return { enabled: !this._isDefaultSymbolDerived };
} } } } } }))], k.prototype, "defaultSymbol", null), r([m({ type: String, value: null, json: { write: true } })], k.prototype, "fieldDelimiter", null), r([m({ type: b2, readOnly: true })], k.prototype, "portal", void 0), r([o("portal", ["styleName"])], k.prototype, "readPortal", null), r([m({ readOnly: true, json: { write: { enabled: false, overridePolicy: () => ({ enabled: true }) } } })], k.prototype, "styleOrigin", void 0), r([o("styleOrigin", ["styleName", "styleUrl"])], k.prototype, "readStyleOrigin", null), r([r2("styleOrigin", { styleName: { type: String }, styleUrl: { type: String } })], k.prototype, "writeStyleOrigin", null), r([m({ type: [c5], json: { read: { source: ["uniqueValueGroups", "uniqueValueInfos"], reader: (e4, t6, s5) => (t6.uniqueValueGroups || z2(t6)).map((e5) => c5.fromJSON(e5, s5)) }, write: { overridePolicy() {
  return this.styleOrigin ? { enabled: false } : { enabled: true };
} } } })], k.prototype, "uniqueValueGroups", null), r([m({ type: [n11], json: { read: false, write: { overridePolicy() {
  return this.styleOrigin ? { enabled: false } : { enabled: true };
} } } })], k.prototype, "uniqueValueInfos", null), k = E = r([a2(M)], k);
var A = k;

export {
  j2 as j,
  p6 as p,
  c3 as c,
  p9 as p2,
  a13 as a,
  b4 as b,
  v4 as v,
  y4 as y,
  m8 as m,
  n9 as n,
  n11 as n2,
  A
};
//# sourceMappingURL=chunk-PNVXSHN2.js.map
