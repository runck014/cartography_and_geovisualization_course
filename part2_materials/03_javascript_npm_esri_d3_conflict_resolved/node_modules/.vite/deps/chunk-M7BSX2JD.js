import {
  d as d2,
  e as e2,
  f as f3,
  n as n6,
  t as t3
} from "./chunk-N7UV77NP.js";
import {
  c,
  e,
  l,
  o as o3,
  t as t2
} from "./chunk-KZYGXJYH.js";
import {
  n as n5
} from "./chunk-VEUN2EF3.js";
import {
  A,
  d,
  p
} from "./chunk-W6D3ECTZ.js";
import {
  h
} from "./chunk-E2RPCJOE.js";
import {
  o as o2
} from "./chunk-DOTSJZHK.js";
import {
  n as n4
} from "./chunk-2M53HYNY.js";
import {
  g
} from "./chunk-P5H5PJSC.js";
import {
  s as s2
} from "./chunk-WTNHDCCU.js";
import {
  n as n3
} from "./chunk-TVTRNT6K.js";
import {
  _
} from "./chunk-YFGQMO6E.js";
import {
  m,
  s4 as s,
  t
} from "./chunk-H77COA2S.js";
import {
  a4 as a2,
  f
} from "./chunk-7LJCT7EA.js";
import {
  r
} from "./chunk-MV5XBD6C.js";
import {
  f as f2,
  k,
  n as n2,
  o2 as o
} from "./chunk-GRW2QIBT.js";
import {
  u
} from "./chunk-R2PAF6JT.js";
import {
  a,
  n2 as n
} from "./chunk-PKLD5YJF.js";
import {
  stampVersion
} from "./chunk-R4AWRGAT.js";
import {
  isBrowser
} from "./chunk-5674S6ZB.js";
import {
  autoMode,
  darkMode
} from "./chunk-V2NNZQEU.js";
import {
  getAssetPath,
  setAssetPath
} from "./chunk-V6OQZUXX.js";

// node_modules/@esri/calcite-components/dist/components/index.js
function initModeChangeEvent() {
  const { classList } = document.body;
  const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
  const getMode = () => classList.contains(darkMode) || classList.contains(autoMode) && prefersDark ? "dark" : "light";
  const emitModeChange = (mode) => document.body.dispatchEvent(new CustomEvent("calciteModeChange", { bubbles: true, detail: { mode } }));
  const modeChangeHandler = (newMode) => {
    currentMode !== newMode && emitModeChange(newMode);
    currentMode = newMode;
  };
  let currentMode = getMode();
  emitModeChange(currentMode);
  window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (event) => modeChangeHandler(event.matches ? "dark" : "light"));
  new MutationObserver(() => modeChangeHandler(getMode())).observe(document.body, {
    attributes: true,
    attributeFilter: ["class"]
  });
}
function appGlobalScript() {
  if (isBrowser()) {
    if (document.readyState === "interactive") {
      initModeChangeEvent();
    } else {
      document.addEventListener("DOMContentLoaded", () => initModeChangeEvent(), { once: true });
    }
  }
  stampVersion();
}
var globalScripts = appGlobalScript;
globalScripts();

// node_modules/@arcgis/core/widgets/support/componentsUtils.js
var c2;
function n7() {
  try {
    getAssetPath(".");
  } catch {
    setAssetPath(_(n3(c2)));
  }
}
function r2(t5) {
  var _a;
  const o5 = [];
  for (const s4 of Object.keys(t5)) customElements.get(`calcite-${s4}`) || o5.push((_a = t5[s4]) == null ? void 0 : _a.call(t5));
  return o5.length > 0 ? Promise.all(o5) : null;
}
c2 = "components/assets";

// node_modules/@arcgis/core/core/domUtils.js
function n8(n11) {
  return "string" == typeof n11 ? document.getElementById(n11) : n11 ?? null;
}
function t4(n11, t5) {
  for (; ; ) {
    const e7 = n11.firstChild;
    if (!e7) break;
    t5.appendChild(e7);
  }
}

// node_modules/@arcgis/core/libs/maquette-advanced-projector/advanced-projector-options.js
var e3 = { handleInterceptedEvent: (e7, p2, t5, n11) => (e7.scheduleRender(), p2.properties[`on${n11.type}`].apply(p2.properties.bind || t5, [n11])) };

// node_modules/@arcgis/core/libs/maquette-advanced-projector/utils.js
var e4 = { namespace: void 0, performanceLogger: () => {
}, eventHandlerInterceptor: void 0, styleApplyer: (e7, r4, t5) => {
  "-" === r4.charAt(0) ? e7.style.setProperty(r4, t5) : e7.style[r4] = t5;
} };
var r3 = (r4) => ({ ...e4, ...r4 });

// node_modules/@arcgis/core/libs/maquette-advanced-projector/projector.js
var o4 = (e7, r4) => {
  const t5 = [];
  for (; e7 && e7 !== r4; ) t5.push(e7), e7 = e7.parentNode;
  return t5;
};
var n9 = (e7, r4) => e7.find(r4);
var d3 = (e7, r4, t5 = false) => {
  let o5 = e7;
  return r4.forEach((e8, d4) => {
    const s4 = (o5 == null ? void 0 : o5.children) ? n9(o5.children, (r5) => r5.domNode === e8) : void 0;
    t5 && !s4 && d4 !== r4.length - 1 || (o5 = s4);
  }), o5;
};
var s3 = (n11) => {
  let s4;
  const c3 = { ...e3, ...n11 }, i = r3(c3), a3 = i.performanceLogger;
  let m2, p2 = true, l2 = false;
  const f4 = [], u2 = [], h2 = (e7, r4, t5) => {
    var _a;
    let n12;
    i.eventHandlerInterceptor = (e8, r5, t6, i2) => function(e9) {
      let r6;
      a3("domEvent", e9);
      const t7 = o4(e9.currentTarget, n12.domNode), i3 = t7.some((e10) => {
        var _a2;
        return customElements.get((_a2 = e10 == null ? void 0 : e10.tagName) == null ? void 0 : _a2.toLowerCase());
      });
      if (e9.eventPhase === Event.CAPTURING_PHASE || !i3) t7.reverse(), r6 = d3(n12.getLastRender(), t7);
      else {
        const t8 = e9.composedPath(), o5 = t8.slice(t8.indexOf(e9.currentTarget), t8.indexOf(n12.domNode)).reverse();
        r6 = d3(n12.getLastRender(), o5, true);
      }
      let m4;
      return r6 && (m4 = c3.handleInterceptedEvent(s4, r6, this, e9)), a3("domEventProcessed", e9), m4;
    }, (_a = c3.postProcessProjectionOptions) == null ? void 0 : _a.call(c3, i);
    const m3 = t5();
    n12 = e7(r4, m3, i), i.eventHandlerInterceptor = void 0, f4.push(n12), u2.push(t5), c3.afterFirstVNodeRendered && c3.afterFirstVNodeRendered(n12, m3);
  };
  let v = () => {
    if (m2 = void 0, p2) {
      p2 = false, a3("renderStart", void 0);
      for (let r4 = 0; r4 < f4.length; r4++) {
        const t5 = u2[r4]();
        a3("rendered", void 0);
        try {
          f4[r4].update(t5);
        } catch (e7) {
          console.error(e7);
        }
        a3("patched", void 0);
      }
      a3("renderDone", void 0), p2 = true;
    }
  };
  return c3.modifyDoRenderImplementation && (v = c3.modifyDoRenderImplementation(v, f4, u2)), s4 = { renderNow: v, scheduleRender: () => {
    m2 || l2 || (m2 = requestAnimationFrame(v));
  }, stop: () => {
    m2 && (cancelAnimationFrame(m2), m2 = void 0), l2 = true;
  }, resume: () => {
    l2 = false, p2 = true, s4.scheduleRender();
  }, append: (r4, t5) => {
    h2(n6.append, r4, t5);
  }, insertBefore: (r4, t5) => {
    h2(n6.insertBefore, r4, t5);
  }, merge: (r4, t5) => {
    h2(n6.merge, r4, t5);
  }, replace: (r4, t5) => {
    h2(n6.replace, r4, t5);
  }, detach: (e7) => {
    for (let r4 = 0; r4 < u2.length; r4++) if (u2[r4] === e7) return u2.splice(r4, 1), f4.splice(r4, 1)[0];
    throw new Error("renderFunction was not found");
  } }, s4;
};

// node_modules/@arcgis/core/widgets/support/tests.js
var e5 = /* @__PURE__ */ new Set();
function n10(n11) {
  e5.add(n11), n11.finally(() => e5.delete(n11));
}

// node_modules/@arcgis/core/widgets/Widget.js
var $;
var U = "esri.widgets.Widget";
var z = 0;
function W(e7, t5) {
  const r4 = Object.prototype.hasOwnProperty;
  for (const s4 in t5) r4.call(t5, s4) && r4.call(e7, s4) && (null != e7[s4] && null != t5[s4] && "object" == typeof e7[s4] && "object" == typeof t5[s4] ? W(e7[s4], t5[s4]) : e7[s4] = t5[s4]);
  return e7;
}
var x = s3({ postProcessProjectionOptions(e7) {
  const t5 = e7.eventHandlerInterceptor, r4 = /capture$/i;
  e7.eventHandlerInterceptor = (e8, s4, o5, i) => {
    const n11 = t5 == null ? void 0 : t5(e8, s4, o5, i), a3 = r4.test(e8);
    if (!((e8 = e8.replace(r4, "")).toLowerCase() in o5) || a3) {
      const t6 = e8[2].toLowerCase() + e8.slice(3), r5 = (e9) => n11 == null ? void 0 : n11.call(o5, e9);
      o5.addEventListener(t6, r5, a3);
      const s5 = () => o5.removeEventListener(t6, r5, a3), d4 = i.afterRemoved;
      i.afterRemoved = (e9) => {
        d4 == null ? void 0 : d4(e9), s5();
      };
    }
    return n11;
  };
}, handleInterceptedEvent(e7, t5, r4, s4) {
  const { eventPhase: o5, type: i } = s4, n11 = o5 === Event.CAPTURING_PHASE;
  let a3 = `on${i}${n11 ? "capture" : ""}`;
  const d4 = t5.properties;
  (d4 && a3 in d4 || (a3 = `on${i[0].toUpperCase()}${i.slice(1)}${n11 ? "Capture" : ""}`, d4 && a3 in d4)) && (t2(), e7.scheduleRender(), d4[a3].call(d4.bind || r4, s4));
} });
var A2 = false;
var O = class extends n4(o2.EventedAccessor) {
  constructor(e7, t5) {
    super(e7, t5), this._attached = false, this._projector = x, this._readyForTrueRender = false, this.key = this, this.autoRenderingEnabled = true, this._loadLocale = k(async () => {
      var _a;
      if ((_a = this._messageBundleProps) == null ? void 0 : _a.length) {
        const e8 = await Promise.allSettled(this._messageBundleProps.map(async ({ bundlePath: e9, propertyName: t6 }) => {
          if (this.destroyed) return;
          let r5 = await h(e9);
          this.uiStrings && Object.keys(this.uiStrings) && (r5 = W(a(r5), this.uiStrings)), this[t6] = r5;
        }));
        if (this.destroyed) return;
        for (const t6 of e8) "rejected" === t6.status && n.getLogger(this).error("widget-intl:locale-error", this.declaredClass, t6.reason);
      }
      await this.loadLocale();
    }), n7();
    const r4 = "esri-widget-uid-" + n5(), s4 = this.render.bind(this);
    this._trackingTarget = new s(() => {
      this.autoRenderingEnabled && this.scheduleRender();
    });
    const o5 = () => ({ vnodeSelector: "div", properties: { key: `${r4}-hidden`, class: "", styles: { display: "none" } }, domNode: null, children: void 0, text: void 0 }), i = () => {
      var _a, _b;
      if (!this._readyForTrueRender || this.destroyed) return null;
      const e8 = s4() ?? o5(), t6 = e8.properties ?? (e8.properties = {});
      if (t6.key ?? (t6.key = r4), f3(e8.vnodeSelector)) {
        if (!this.visible) return o5();
      } else this.visible ? t6.styles || (t6.styles = {}) : (t6.class = "", t6.styles = { display: "none" }), (_a = t6.styles).display ?? (_a.display = "");
      let i2 = 0;
      return (_b = e8.children) == null ? void 0 : _b.forEach((e9) => {
        var _a2;
        f3(e9.vnodeSelector) || (e9.properties ?? (e9.properties = {}), (_a2 = e9.properties).key ?? (_a2.key = `${this.id}--${i2++}`));
      }), d2(this, e8);
    };
    this.render = () => {
      if (A2) return i();
      let e8 = e(this) ?? null;
      if (e8) return e8;
      this._trackingTarget.clear(), A2 = true;
      try {
        e8 = f(this._trackingTarget, i);
      } catch (t6) {
        throw n.getLogger(this).error(t6), t6;
      } finally {
        A2 = false;
      }
      return e8 && c(this, e8), e8;
    };
    const d4 = this.beforeFirstRender();
    d4 ? this._resourcesFetch = d4.then(() => {
      this._readyForTrueRender = true, this._postInitialize();
    }) : (this._resourcesFetch = Promise.resolve().then(() => {
      this._postInitialize();
    }), this._readyForTrueRender = true), this.addResolvingPromise(this._resourcesFetch), n10(this._resourcesFetch);
  }
  normalizeCtorArgs(e7, t5) {
    const r4 = { ...e7 };
    return t5 && (r4.container = t5), r4;
  }
  postInitialize() {
  }
  beforeFirstRender() {
    var _a;
    const e7 = this.loadDependencies();
    return ((_a = this._messageBundleProps) == null ? void 0 : _a.length) || e7 ? Promise.all([e7, this._loadLocale()]).then(() => {
    }).catch(f2) : null;
  }
  loadDependencies() {
    return null;
  }
  loadLocale() {
    return null;
  }
  destroy() {
    this.destroyed || (u(this._trackingTarget), u(this.viewModel), this._detach(this.container), this._set("container", null), this._emitter.clear(), this.render = () => null, this._projector = null, o3(this));
  }
  set container(e7) {
    this._get("container") || this._set("container", e7);
  }
  castContainer(e7) {
    return n8(e7);
  }
  get domNode() {
    return this.container;
  }
  set domNode(e7) {
    this.container = e7;
  }
  get icon() {
    return null;
  }
  set icon(e7) {
    this._overrideIfSome("icon", e7);
  }
  get id() {
    var _a;
    return this._get("id") || ((_a = this.container) == null ? void 0 : _a.id) || Date.now().toString(16) + "-widget-" + z++;
  }
  set id(e7) {
    e7 && this._set("id", e7);
  }
  get label() {
    return this.declaredClass.split(".").pop();
  }
  set label(e7) {
    this._overrideIfSome("label", e7);
  }
  get renderable() {
    return this._resourcesFetch;
  }
  get visible() {
    return this._get("visible");
  }
  set visible(e7) {
    this._set("visible", e7);
  }
  get [($ = t3, e2)]() {
    return { projector: this._projector };
  }
  render() {
    throw new Error("not implemented");
  }
  scheduleRender() {
    this.destroyed || (o3(this), this._projector.scheduleRender());
  }
  own(e7) {
    t(n.getLogger(this), "`Widget.own()` is deprecated in favor of 'Widget.addHandles()'", { replacement: "Widget.addHandles()", version: "4.28" }), this.addHandles(e7);
  }
  classes(...e7) {
    return l.apply(this, e7);
  }
  renderNow() {
    o3(this), this._projector.renderNow();
  }
  _postInitialize() {
    var _a;
    if (this.destroyed) return;
    this.scheduleRender(), ((_a = this._delegatedEventNames) == null ? void 0 : _a.length) && this.addHandles(d(() => this.viewModel, (e8, t5) => {
      t5 && this.removeHandles("delegated-events"), e8 && n2(e8) && this.addHandles(this._delegatedEventNames.map((t6) => o(e8, t6, (e9) => {
        this.emit(t6, e9);
      })), "delegated-events");
    }, A)), this.postInitialize();
    const e7 = async () => {
      await this._loadLocale().catch(f2), this.scheduleRender();
    };
    this.addHandles([g(e7), d(() => this.uiStrings, e7), p(() => this.container, (e8) => {
      this.destroyed || this._attach(e8);
    }, { initial: true, once: true })]);
  }
  _attach(e7) {
    e7 && (this._projector.merge(e7, this.render), this._attached = true);
  }
  _detach(e7) {
    var _a;
    this._attached && (this._projector.detach(this.render), this._attached = false), (_a = e7 == null ? void 0 : e7.parentNode) == null ? void 0 : _a.removeChild(e7);
  }
};
O[$] = true, O.vnodeSelector = "div", r([m()], O.prototype, "_readyForTrueRender", void 0), r([m({ value: null })], O.prototype, "container", null), r([s2("container")], O.prototype, "castContainer", null), r([m()], O.prototype, "icon", null), r([m()], O.prototype, "id", null), r([m()], O.prototype, "label", null), r([m()], O.prototype, "renderable", null), r([m()], O.prototype, "uiStrings", void 0), r([m()], O.prototype, "viewModel", void 0), r([m({ value: true })], O.prototype, "visible", null), r([m()], O.prototype, "key", void 0), r([m()], O.prototype, "children", void 0), r([m()], O.prototype, "afterCreate", void 0), r([m()], O.prototype, "afterUpdate", void 0), r([m()], O.prototype, "afterRemoved", void 0), O = r([a2(U)], O);
var B = O;

// node_modules/@arcgis/core/widgets/support/decorators/messageBundle.js
function e6(e7) {
  return (s4, r4) => {
    s4.hasOwnProperty("_messageBundleProps") || (s4._messageBundleProps = s4._messageBundleProps ? s4._messageBundleProps.slice() : []);
    s4._messageBundleProps.push({ bundlePath: e7, propertyName: r4 });
  };
}

export {
  n8 as n,
  t4 as t,
  r2 as r,
  B,
  e6 as e
};
/*! Bundled license information:

@esri/calcite-components/dist/components/index.js:
  (*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
   * v2.13.2
   *)
*/
//# sourceMappingURL=chunk-M7BSX2JD.js.map
