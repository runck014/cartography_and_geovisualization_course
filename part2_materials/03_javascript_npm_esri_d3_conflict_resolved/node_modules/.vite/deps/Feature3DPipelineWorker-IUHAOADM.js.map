{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/graphics/pipeline/Tile3DManager.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/featureSet/TiledFeatureStore.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/Tile.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/featureSet/PBFPointFeatureSetView.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/fetching/Tile3DFetcher.js", "../../@arcgis/core/views/3d/webgl-engine/lib/FontMetrics.js", "../../@arcgis/core/views/3d/webgl-engine/lib/TextRenderer.js", "../../@arcgis/core/views/3d/layers/graphics/placementUtils.js", "../../@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js", "../../@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js", "../../@arcgis/core/views/3d/webgl-engine/materials/DrawParameters.js", "../../@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js", "../../@arcgis/core/views/3d/webgl-engine/materials/renderers/BufferRange.js", "../../@arcgis/core/views/3d/webgl-engine/materials/renderers/Instance.js", "../../@arcgis/core/views/3d/webgl-engine/materials/renderers/DrawCommand.js", "../../@arcgis/core/views/3d/webgl-engine/materials/renderers/PerBufferData.js", "../../@arcgis/core/views/3d/webgl-engine/materials/renderers/PerOriginData.js", "../../@arcgis/core/views/3d/webgl-engine/materials/renderers/MergedRenderer.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/rendering/DirectRenderer.js", "../../@arcgis/core/views/3d/webgl-engine/lib/fov.js", "../../@arcgis/core/views/3d/webgl-engine/lib/rendererUtils.js", "../../@arcgis/core/views/3d/webgl/RenderCamera.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js", "../../@arcgis/core/views/3d/webgl-engine/lib/Intersector.js", "../../@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js", "../../@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js", "../../@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodResources.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/rendering/LodRenderer.js", "../../@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js", "../../@arcgis/core/core/libs/gl-matrix-2/types/mat4.js", "../../@arcgis/core/views/3d/webgl-engine/materials/ScaleInfo.js", "../../@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechnique.js", "../../@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechniqueConfiguration.js", "../../@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/rendering/FeaturePipelineRenderManager.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/rendering/RenderGeometryBufferWriter.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/rendering/RenderCommandEncoder.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/rendering/RenderCommandContext.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/featureData/interfaces.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/featureData/processingUtils.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/featureData/FeatureData.js", "../../@arcgis/core/views/3d/layers/graphics/graphicUtils.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/symbolizationUtils.js", "../../@arcgis/core/views/3d/webgl-engine/lib/BufferVectorMath.js", "../../@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/primitiveObjectUtils.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/TestObjectSymbol.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/TestSymbol.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/UniqueValueFeatureRenderer.js", "../../@arcgis/core/geometry/projection/projectVectorToPoint.js", "../../@arcgis/core/geometry/support/coordinateSystem.js", "../../@arcgis/core/layers/graphics/dehydratedFeatureUtils.js", "../../@arcgis/core/views/3d/support/RenderCoordsHelper.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/symbolization/Symbolizer.js", "../../@arcgis/core/views/3d/layers/graphics/pipeline/Feature3DPipelineWorker.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import o from\"../../../../../core/Accessor.js\";import{createTask as r}from\"../../../../../core/asyncUtils.js\";import{throwIfAborted as s}from\"../../../../../core/promiseUtils.js\";import t from\"../../../../../core/ReactiveMap.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../../core/accessorSupport/decorators/subclass.js\";let a=class extends o{constructor(e){super(e),this._removing=0,this._tiles=new t}destroy(){for(const e of this._tiles.values())e.remove();this._tiles.clear()}get updating(){if(this._removing>0)return!0;for(const e of this._tiles.values())if(!e.finished)return!0;return!1}async onTileTreeChange(e){const{added:o,removed:s}=e,t=this._tiles,i=[];for(const r of s){const e=t.get(r);null!=e&&(e.abort(),t.delete(r),i.push({tileId:r}))}for(const c of o)t.has(c.id)||t.set(c.id,r((e=>this._addTile(c,e))));await this._removeTiles(i)}async _addTile(e,o){const r=await this.addTile(e,o);return s(o),r}async _removeTiles(e){this._removing++,await this.removeTiles(e),this._removing--}};e([i()],a.prototype,\"updating\",null),e([i({constructOnly:!0})],a.prototype,\"addTile\",void 0),e([i({constructOnly:!0})],a.prototype,\"removeTiles\",void 0),e([i()],a.prototype,\"_removing\",void 0),a=e([c(\"esri.views.3d.layers.graphics.pipeline.Tile3DManager\")],a);export{a as Tile3DManager};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Evented.js\";import{PooledRBush as t,BBox as i}from\"../../../../../../core/libs/rbush/PooledRBush.js\";import{getCentroidOptimizedGeometry as r}from\"../../../../../../layers/graphics/centroid.js\";import s from\"../../../../../../layers/graphics/OptimizedGeometry.js\";class n{constructor(e,t){this._index=e,this._view=t}getObjectId(){return this._view.getObjectId(this._index)}getAttribute(e){return this._view.getAttribute(this._index,e)}getAttributeAsTimestamp(e){return this._view.getAttributeAsTimestamp(this._index,e)}getAttributes(){return this._view.getAttributes(this._index)}getOptimizedGeometry(){return this._view.getOptimizedGeometry(this._index)}getCentroid(e){return this._view.getCentroid(this._index,e)}getBounds(){return this._view.getBounds(this._index)}getBoundingBox(){return this._view.getBoundingBox(this._index)}cloneWithGeometry(e){return new o(this._index,this._view,e)}}class o extends n{constructor(e,t,i){super(e,t),this._geometryOverride=i}getOptimizedGeometry(){return this._geometryOverride}getCentroid(e){return r(new s,this._geometryOverride,e.hasZ,e.hasM)}}class d{constructor(){this._storedTiles=new Map,this._pageBounds=new Map,this.events=new e,this.featureAdapter=a.shared}addTile(e){this._storedTiles.set(e.descriptor.id,e);for(const t of e.pages)this._addPage(t)}removeTile(e){const t=this._storedTiles,i=t.get(e);if(null!=i){t.delete(e);for(const e of i.pages)this._removePage(e)}}_addPage(e){const{featureCount:i}=e;if(0===i)return;const r=new t(9,(t=>e.getBounds(t))),s=new Array;for(let t=0;t<i;++t)s[t]=t;r.load(s),this._pageBounds.set(e,r),this.events.emit(\"changed\")}_removePage(e){this._pageBounds.delete(e),this.events.emit(\"changed\")}clear(){this._storedTiles.clear(),this._pageBounds.clear(),this.events.emit(\"changed\")}forEach(e){for(const[t,i]of this._pageBounds)i.all((i=>e(new n(i,t))))}forEachInBounds(e,t){h.minX=e[0],h.minY=e[1],h.maxX=e[2],h.maxY=e[3];for(const[i,r]of this._pageBounds)r.search(h,(e=>t(new n(e,i))))}forEachBounds(e,t){for(const i of e)t(i.getBoundingBox())}getFullExtent(e){let t=1/0,i=1/0,r=-1/0,s=-1/0;for(const n of this._pageBounds.values()){const{minX:e,minY:o,maxX:d,maxY:a}=n.toJSON();t=Math.min(t,e),i=Math.min(i,o),r=Math.min(r,d),s=Math.min(s,a)}return{xmin:t,ymin:i,xmax:r,ymax:s,spatialReference:e}}}class a{getObjectId(e){return e.getObjectId()}getAttribute(e,t){return e.getAttribute(t)}getAttributeAsTimestamp(e,t){return e.getAttributeAsTimestamp(t)}getAttributes(e){return e.getAttributes()}getGeometry(e){return e.getOptimizedGeometry()}getCentroid(e,t){return e.getCentroid(t)}cloneWithGeometry(e,t){return e.cloneWithGeometry(t)}}a.shared=new a;const h=new i;export{n as FeatureHandle,d as TiledFeatureStore};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass s{constructor(s,t){this.descriptor=s,this.pages=t}}export{s as Tile};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/Error.js\";import t from\"../../../../../../core/pbf.js\";import{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{BBox as s}from\"../../../../../../core/libs/rbush/PooledRBush.js\";import{fromValues as n}from\"../../../../../../geometry/support/aaBoundingBox.js\";import{normalizeTransform as o}from\"../../../../../../geometry/support/quantizationUtils.js\";import i from\"../../../../../../layers/graphics/OptimizedGeometry.js\";import a from\"../../../../../../layers/support/FieldsIndex.js\";import{parseField as c,parseTransform as d}from\"../../../../../../rest/query/operations/pbfFeatureServiceParser.js\";class u{constructor(e){const r=new t(new Uint8Array(e),new DataView(e));this._reader=r,this._index=g(r)}get featureCount(){return this._index.featureIndices.length}get exceededTransferLimit(){return this._index.exceededTransferLimit}getObjectId(e){return this.getAttribute(e,this._index.objectIdFieldName)}getAttribute(e,t){const{_index:{fieldsIndex:r,attributeIndices:s}}=this,n=r.get(t)?.index;if(null==n)return;const o=s[e*r.fields.length+n],i=this._reader;return i.move(o),m(i)}getAttributeAsTimestamp(e,t){const r=this.getAttribute(e,t);return\"string\"==typeof r?new Date(r).getTime():\"number\"==typeof r||null==r?r:null}getAttributes(e){const{_index:{fieldsIndex:t,attributeIndices:r}}=this,s=e*t.fields.length,n=this._reader,o={};for(const i of t.fields){const e=r[s+i.index];n.move(e),o[i.name]=m(n)}return o}getCoordinates(e,t,r=0){const s=this._reader,{transform:n,featureIndices:o}=this._index,{scale:i,translate:a}=n;s.move(o[e]),this._readCoordinates(i,a,t,r)}getOptimizedGeometry(e){const t=r();return this.getCoordinates(e,t),new i([],t)}getCentroid(e,{hasZ:t,hasM:r}){this.getCoordinates(e,h);const[s,n,o]=h,a=[s,n];return t&&(a[3]=o),r&&(a[t?4:3]=0),new i([],a)}getBounds(e){this.getCoordinates(e,h);const[t,r]=h,n=new s;return n.minX=t,n.minY=r,n.maxX=t,n.maxY=r,n}getBoundingBox(e){this.getCoordinates(e,h);const[t,r,s]=h;return n(t,r,s,t,r,s)}readAllObjectIds(e,t=0){const r=this._reader,{_index:s,featureCount:n}=this,{objectIdFieldName:o,attributeIndices:i,fieldsIndex:a}=s,c=a.get(o).index,d=a.fields.length;for(let u=0;u<n;++u){const s=i[u*d+c];r.move(s),e[t++]=m(r)}return t}readAllCoordinates(e,t=0){const r=this._reader,{transform:s,featureIndices:n}=this._index,{scale:o,translate:i}=s;for(const a of n)r.move(a),t=this._readCoordinates(o,i,e,t);return t}_readCoordinates([e,t,r],[s,n,o],i,a){const c=2,d=3,u=this._reader,g=u.getLength(),f=u.pos()+g;for(;u.pos()<f&&u.next();)switch(u.tag()){case c:{const c=u.getLength(),g=u.pos()+c;for(;u.pos()<g&&u.next();)if(u.tag()===d)u.getUInt32(),i[a++]=s+e*u.getSInt64(),i[a++]=n+t*u.getSInt64(),i[a++]=o+r*u.getSInt64();else u.skip();break}default:u.skip()}return a}}function g(e){const t=2;for(;e.next();){if(e.tag()===t)return f(e.getMessage());e.skip()}p()}function f(e){const t=1;for(;e.next();){if(e.tag()===t)return l(e.getMessage());e.skip()}p()}function l(e){const t=9,r=12,s=13,n=15,i=7,u=0,g=10,f=1,l=1;let m,h,x=!1,b=!1,I=0;const w=new Array,_=new Array,k=new Array;for(;e.next();)switch(e.tag()){case l:h=e.getString();break;case i:e.getEnum()!==u&&p();break;case t:x=e.getBool()??!1;break;case r:m=o(e.processMessage(d));break;case s:{const t=e.processMessage(c);t.index=I++,w.push(t);break}case n:{_.push(e.pos());const t=e.getUInt32(),r=e.pos()+t;for(;e.pos()<r&&e.next();)if(e.tag()===f)k.push(e.pos()),e.skip();else e.skip();break}case g:b=e.getBool()??!1;break;default:e.skip()}const j=new a(w);return null!=m&&b&&null!=h&&j.has(h)||p(),{transform:m,exceededTransferLimit:x,fieldsIndex:j,objectIdFieldName:h,featureIndices:_,attributeIndices:k}}function p(){const t=new e(\"pbf-parsing-failed\",\"Error while parsing PBF\",new Error);throw console.error(t),t}function m(e){const t=1,r=2,s=3,n=4,o=5,i=6,a=7,c=8,d=9,u=e.getLength(),g=e.pos()+u;for(;e.pos()<g&&e.next();)switch(e.tag()){case t:return e.getString();case r:return e.getFloat();case s:return e.getDouble();case n:return e.getSInt32();case o:return e.getUInt32();case i:return e.getInt64();case a:return e.getUInt64();case c:return e.getSInt64();case d:return e.getBool();default:return e.skip(),null}return null}const h=r();export{u as PBFPointFeatureSetView};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{throwIfAborted as e}from\"../../../../../../core/promiseUtils.js\";import{toExtent as t}from\"../../../../../../geometry/support/aaBoundingRect.js\";import{executeQueryPBFBuffer as r}from\"../../../../../../rest/query/operations/query.js\";import{Tile as o}from\"../Tile.js\";import{PBFPointFeatureSetView as s}from\"../featureSet/PBFPointFeatureSetView.js\";const i=8e3,a=4,n=4;class c{constructor(e,t,r,o,s){this.spatialReference=e,this.url=r,this.objectIdField=o,this.capabilities=s;const{supportsMaxRecordCountFactor:n,maxRecordCount:c}=this.capabilities.query,u=n?a:1,p=(c??i)*u;this._pageSize=Math.min(i,p);const l=t.clone();l.cacheHint=!0,l.resultType=\"tile\",l.outSpatialReference=e,l.returnGeometry=!0,l.returnZ=!0,l.maxRecordCountFactor=u,l.num=this._pageSize,l.outFields=[o],this._baseQuery=l}async fetch(r,s){const{spatialReference:i}=this,a=t(r.extent,i),c=this._baseQuery.clone();c.geometry=a;const u=new Array;let p=0,l=!1,h=1;for(;!l;){const t=[];for(let e=0;e<h;++e)t.push(this._fetchPage(c,p++,s));const r=await Promise.all(t);e(s);for(const e of r){const t=0!==e.featureCount;l||=!e.exceededTransferLimit||!t,t&&u.push(e)}h=Math.min(h+1,n)}return new o(r,u)}async _fetchPage(t,o,i){const a=t.clone();a.start=o*this._pageSize;const n=(await r(this.url,a,{signal:i})).data;return e(i),new s(n)}}export{c as Tile3DFetcher};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getTextHelperCanvas as t}from\"./TextHelperCanvas.js\";function e(e){const{size:c}=e.definition,a=e.fontString(c);let i=n.get(a);if(!i){const u=t(o,0,0).getContext(\"2d\");e.setFontProperties(u,c);const x=u.measureText(r);i=new s(x.actualBoundingBoxAscent,x.actualBoundingBoxDescent),n.set(a,i)}return i}const n=new Map;class s{get maxHeight(){return this.maxAscent+this.maxDescent}constructor(t,e){this.maxAscent=t,this.maxDescent=e}}const o={canvas:null},r=(()=>{let t=\"\";for(let e=32;e<127;e++)t+=String.fromCharCode(e);return t})();export{e as getFontMetrics};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";import{debugFlags as e}from\"../../support/debugFlags.js\";import{getFontMetrics as i}from\"./FontMetrics.js\";import{getTextHelperCanvas as n}from\"./TextHelperCanvas.js\";const s=1;class r{constructor(t,e,i,n){this.text=t,this._alignment=e,this._parameters=i,this._maxSize=n,this._textWidths=[],this._lineWidths=[],this._renderPixelRatio=null,this._metricsCached=null,this.key=`${t}--${this._parameters.key}-${this._alignment}`,this._lines=t.replaceAll(\" \",\" \").split(/\\r?\\n/)}get displayWidth(){return Math.ceil(this._displayWidth+2*this._horizontalPadding)}get displayHeight(){let t=this._metrics.firstLineAscent;for(let e=0;e<this._lines.length-1;e++)t+=this._lineSpacing;return t+=this._metrics.lastLineDescent,Math.ceil(t+2*this._haloSize+2*this._verticalPadding)}get renderedWidth(){return this._toRoundedRenderUnit(this.displayWidth)}get renderedHeight(){return this._toRoundedRenderUnit(this.displayHeight)}get firstRenderedBaselinePosition(){return this._toRenderUnit(this._firstLineYOffset+this._metrics.firstLineAscent)}get _firstLineYOffset(){return this._verticalPadding+this._haloSize}get _metrics(){if(null==this._metricsCached){const t=n(a,l,l).getContext(\"2d\"),e=this._parameters.definition.pixelRatio,s=this._fontSize*e;this._parameters.setFontProperties(t,s);let r=2*this._haloSize;const h=this._parameters.definition.font;\"italic\"!==h.style&&\"oblique\"!==h.style&&\"bold\"!==h.weight&&\"bolder\"!==h.weight||(r+=.3*t.measureText(\"A\").width),this._textWidths.length=0,this._lineWidths.length=0;let o=0,d=0,_=0,g=0,m=0;this._lines.forEach(((i,n)=>{const s=t.measureText(i),h=s.width/e,a=h+r;this._textWidths.push(h),this._lineWidths.push(a),o=Math.max(o,a),g=Math.max(g,s.actualBoundingBoxAscent/e),m=Math.max(m,s.actualBoundingBoxDescent/e),0===n&&(d=s.actualBoundingBoxAscent/e),n===this._lines.length-1&&(_=s.actualBoundingBoxDescent/e)}));const f=i(this._parameters),u=Math.max(g,f.maxAscent),p=Math.max(m,f.maxDescent),x=d,R=\"underline\"===this._parameters.definition.font.decoration?p:_,S=o;this._metricsCached=new c(x,R,u,p,S)}return this._metricsCached}get _lineSpacing(){return(this._midLineHeight+this._linePadding)*this._parameters.definition.lineSpacingFactor}get _midLineHeight(){return this._metrics.midLineHeight}get _linePadding(){return this._midLineHeight*d}get _midLineAscent(){return this._metrics.maxLineAscent}get _renderedFontSize(){return this._toRenderUnit(this._fontSize)}get _fontSize(){return this._parameters.definition.size}get _renderedHaloSize(){return this._toRenderUnit(this._haloSize)}get _haloSize(){return this._parameters.haloSize}get _horizontalPadding(){return this._hasBackground?this._parameters.definition.background.padding[0]:0}get _verticalPadding(){return Math.max(this._hasBackground?this._parameters.definition.background.padding[1]:0,s)}get _hasBackground(){return!!this._parameters.backgroundStyle}get renderPixelRatio(){if(null==this._renderPixelRatio){const t=this._parameters.definition.pixelRatio;this._renderPixelRatio=Math.min(t,Math.min(this._maxSize[0]/this.displayWidth,this._maxSize[1]/this.displayHeight))}return this._renderPixelRatio}_getLineXOffset(t){switch(this._alignment){case o.Left:return this._horizontalPadding;case o.Center:return(this.displayWidth-this._lineWidths[t])/2;case o.Right:return this.displayWidth-this._horizontalPadding-this._lineWidths[t]}}render(t,i,n){t.save();const s=i/=this.renderPixelRatio,r=n/=this.renderPixelRatio,h=this._haloSize,o=this._firstLineYOffset+this._metrics.firstLineAscent;i+=h,n+=o;const a=this._haloSize>0;a&&this._renderHalo(t,s,r,h,o),this._parameters.setFontProperties(t,this._renderedFontSize);for(let e=0;e<this._lines.length;++e){const s=this._lines[e],r=this._getLineXOffset(e);a&&(t.globalCompositeOperation=\"destination-out\",t.fillStyle=\"rgb(0, 0, 0)\",this._fillText(t,s,i+r,n),this._renderLineDecoration(t,i+r,n,this._textWidths[e])),t.globalCompositeOperation=\"source-over\",t.fillStyle=this._parameters.textStyle,this._fillText(t,s,i+this._getLineXOffset(e),n),this._renderLineDecoration(t,i+r,n,this._textWidths[e]),n+=this._lineSpacing}if(e.TEXT_SHOW_BASELINE){t.strokeStyle=_,t.setLineDash([2,2]),t.lineWidth=1;let e=r+o;for(let i=0;i<this._lines.length;++i)this._drawLine(t,[s,e],[s+this.displayWidth,e]),e+=this._lineSpacing}if(e.TEXT_SHOW_BORDER&&(t.strokeStyle=_,t.setLineDash([]),t.lineWidth=1,this._drawBox(t,[s,r],[this.displayWidth,this.displayHeight])),this._hasBackground){const e=this._parameters.definition.background.borderRadius*this.renderPixelRatio;this._roundedRect(t,s,r,e),t.globalCompositeOperation=\"destination-over\",t.fillStyle=this._parameters.backgroundStyle,t.fill()}t.restore()}_renderLineDecoration(t,e,i,n,s=!1){if(\"none\"===this._parameters.definition.font.decoration||0===n)return;const r=1,h=Math.max(this._parameters.definition.size/16,r);switch(this._parameters.definition.font.decoration){case\"underline\":i+=2*h;break;case\"line-through\":i-=.33*this._midLineAscent}const o=s?this._haloSize:0;t.strokeStyle=s?this._parameters.haloStyle:this._parameters.textStyle,t.lineWidth=this._toRenderUnit(h+2*o),t.beginPath(),t.moveTo(this._toRenderUnit(e-o),this._toRenderUnit(i)),t.lineTo(this._toRenderUnit(e+n+o),this._toRenderUnit(i)),t.stroke()}_roundedRect(e,i,n,s){i=this._toRenderUnit(i),n=this._toRenderUnit(n);const r=this.renderedWidth,h=this.renderedHeight;0!==s?(s=t(s,0,Math.floor(h/2)),e.beginPath(),e.moveTo(i,n+s),e.arcTo(i,n,i+s,n,s),e.lineTo(i+r-s,n),e.arcTo(i+r,n,i+r,n+s,s),e.lineTo(i+r,n+h-s),e.arcTo(i+r,n+h,i+r-s,n+h,s),e.lineTo(i+s,n+h),e.arcTo(i,n+h,i,n+h-s,s),e.closePath()):e.rect(i,n,r,h)}_renderHalo(t,e,i,s,r){const h=this.renderedWidth,o=this.renderedHeight,d=n(a,Math.max(h,l),Math.max(o,l)),_=d.getContext(\"2d\");_.clearRect(0,0,h,o),this._parameters.setFontProperties(_,this._renderedFontSize),_.fillStyle=this._parameters.haloStyle,_.strokeStyle=this._parameters.haloStyle;const c=this._renderedHaloSize<3;_.lineJoin=c?\"miter\":\"round\",c?this._renderHaloEmulated(_,s,r):this._renderHaloNative(_,s,r);let g=r;for(let n=0;n<this._lines.length;++n){const t=this._getLineXOffset(n);this._renderLineDecoration(_,s+t,g,this._textWidths[n],!0),g+=this._lineSpacing}t.globalAlpha=this._parameters.definition.halo.color[3],t.drawImage(d,0,0,h,o,this._toRenderUnit(e),this._toRenderUnit(i),h,o),t.globalAlpha=1}_renderHaloEmulated(t,e,i){for(let n=0;n<this._lines.length;++n){const s=this._lines[n],r=this._getLineXOffset(n);for(const[n,o]of h)this._fillText(t,s,e+r+this._haloSize*n,i+this._haloSize*o);i+=this._lineSpacing}}_renderHaloNative(t,e,i){const n=2*this._haloSize;for(let s=0;s<this._lines.length;++s){const r=this._lines[s],h=this._getLineXOffset(s),o=5,a=.1;for(let s=0;s<o;s++){const d=1-(o-1)*a+s*a;t.lineWidth=this._toRenderUnit(d*n),this._strokeText(t,r,e+h,i)}i+=this._lineSpacing}}get _displayWidth(){return this._metrics.displayWidth}_toRenderUnit(t){return t*this.renderPixelRatio}_toRoundedRenderUnit(t){return Math.round(t*this.renderPixelRatio)}_fillText(t,e,i,n){t.fillText(e,this._toRenderUnit(i),this._toRenderUnit(n))}_strokeText(t,e,i,n){t.strokeText(e,this._toRenderUnit(i),this._toRenderUnit(n))}_drawLine(t,e,i){t.beginPath(),t.moveTo(this._toRoundedRenderUnit(e[0])+.5,this._toRoundedRenderUnit(e[1])+.5),t.lineTo(this._toRoundedRenderUnit(i[0])+.5,this._toRoundedRenderUnit(i[1])+.5),t.stroke()}_drawBox(t,e,i){const n=this._toRenderUnit(e[0]),s=this._toRenderUnit(e[1]),r=this._toRenderUnit(i[0]),h=this._toRenderUnit(i[1]),o=Math.floor(n)+.5,a=Math.ceil(n+r)-.5,d=Math.floor(s)+.5,l=Math.ceil(s+h)-.5;t.beginPath(),t.moveTo(o,d),t.lineTo(a,d),t.lineTo(a,l),t.lineTo(o,l),t.lineTo(o,d),t.stroke()}}const h=[];{const t=16;for(let e=0;e<360;e+=360/t)h.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}var o;!function(t){t[t.Left=0]=\"Left\",t[t.Center=1]=\"Center\",t[t.Right=2]=\"Right\"}(o||(o={}));const a={canvas:null},d=.2,l=512,_=\"rgb(255, 0, 255, 0.5)\";class c{get firstLineHeight(){return this.firstLineAscent+this.maxLineDescent}get midLineHeight(){return this.maxLineAscent+this.maxLineDescent}get lastLineHeight(){return this.maxLineAscent+this.lastLineDescent}constructor(t,e,i,n,s){this.firstLineAscent=t,this.lastLineDescent=e,this.maxLineAscent=i,this.maxLineDescent=n,this.displayWidth=s}}export{o as TextRenderAlignment,r as TextRenderer,s as textVerticalPaddingPx};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as t,set as e}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{fromValues as r,ZEROS as o}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{TextRenderAlignment as c,textVerticalPaddingPx as n}from\"../../webgl-engine/lib/TextRenderer.js\";const i=Object.freeze({left:0,center:.5,right:1}),s=Object.freeze({\"bottom-left\":r(0,0),bottom:r(.5,0),\"bottom-right\":r(1,0),left:r(0,.5),center:r(.5,.5),right:r(1,.5),\"top-left\":r(0,1),top:r(.5,1),\"top-right\":r(1,1)});function f(t){switch(t){case\"left\":return c.Left;case\"right\":return c.Right;default:return c.Center}}function a(t){switch(t){case\"bottom-left\":case\"left\":case\"top-left\":return\"left\";case\"bottom\":case\"center\":case\"top\":return\"center\";case\"bottom-right\":case\"right\":case\"top-right\":return\"right\"}}function l(t){switch(t){case\"bottom-left\":case\"bottom\":case\"bottom-right\":return\"bottom\";case\"left\":case\"center\":case\"right\":return\"center\";case\"top-left\":case\"top\":case\"top-right\":return\"top\"}}function m(t,e){switch(e){case\"bottom\":return\"left\"===t?\"bottom-left\":\"right\"===t?\"bottom-right\":\"bottom\";case\"center\":return t;case\"top\":return\"left\"===t?\"top-left\":\"right\"===t?\"top-right\":\"top\"}}function u(t){return\"middle\"===t?\"center\":t}function h(r,c){switch(r){case\"top\":return e(c,0,n);case\"bottom\":return e(c,0,-n);default:return t(c,o)}}export{m as anchorFromPlacements,a as horizontalPlacementFromAnchor,i as horizontalPlacementToAnchorX,s as namedAnchorToHUDMaterialAnchorPos,f as textRenderAlignmentFromHorizontalPlacement,u as verticalPlacementFromAlignment,l as verticalPlacementFromAnchor,h as verticalScreenOffsetFromAlignment};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Accessor.js\";import{ShaderOutput as r}from\"../core/shaderLibrary/ShaderOutput.js\";const t={required:[]},s={required:[r.Depth]};class n extends e{precompile(e){const r=this.acquireTechniques(e);return c(r),null!=r}consumes(){return t}get usedMemory(){return 0}get isDecoration(){return!1}get running(){return!1}modify(e){}get numGeometries(){return 0}get hasOccludees(){return!1}get hasEmissions(){return!1}forEachGeometry(e){}queryRenderOccludedState(e){return!1}}class u extends n{}class o extends n{}function c(e){Array.isArray(e)?e.forEach((e=>e?.release())):e?.release()}export{o as AsyncRenderPlugin,s as ConsumesDepth,t as ConsumesNone,u as SyncRenderPlugin,c as releaseTechniques};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ResourceState as s}from\"./basicInterfaces.js\";class t{constructor(s,t){this._material=s,this._repository=t,this._map=new Map}dispose(){this._map.forEach(((s,t)=>{null!=s&&this._repository.release(this._material,t)}))}load(t,e,r){const i=this._material.produces.get(e);if(!i?.(r))return null;this._map.has(r)||this._map.set(r,this._repository.acquire(this._material,e,r));const a=this._map.get(r);if(null!=a){if(a.ensureResources(t)===s.LOADED)return a;this._repository.requestRender()}return null}}export{t as GLMaterials};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{VertexNormalDrawParameters as e}from\"../core/shaderLibrary/attributes/VertexNormal.glsl.js\";class i extends e{constructor(e=r()){super(),this.origin=e}get slicePlaneLocalOrigin(){return this.origin}}export{i as DrawParameters};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar E,I;!function(E){E[E.ADD=0]=\"ADD\",E[E.UPDATE=1]=\"UPDATE\",E[E.REMOVE=2]=\"REMOVE\"}(E||(E={})),function(E){E[E.NONE=0]=\"NONE\",E[E.VISIBILITY=1]=\"VISIBILITY\",E[E.GEOMETRY=2]=\"GEOMETRY\",E[E.TRANSFORMATION=4]=\"TRANSFORMATION\",E[E.HIGHLIGHT=8]=\"HIGHLIGHT\",E[E.OCCLUDEE=16]=\"OCCLUDEE\"}(I||(I={}));export{E as DirtyOperation,I as DirtyState};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(t=0,o=0){this.from=t,this.to=o}get numElements(){return this.to-this.from}}function o(t){const o=new Map;t.forAll((t=>o.set(t.from,t)));let e=!0;for(;e;){e=!1;for(let r=0;r<t.length;++r){const n=t.data[r],s=o.get(n.to);if(!s)return;n.to=s.to,o.delete(s.from),t.removeUnordered(s),e=!0}}}export{t as BufferRange,o as mergeAdjacentRanges};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BufferRange as e}from\"./BufferRange.js\";class i extends e{constructor(e,i,s){super(i,s),this.geometry=e}get isVisible(){return this.geometry.visible}get hasHighlights(){return this.isVisible&&this.geometry.hasHighlights}foreachHighlightGroup(e){this.isVisible&&this.geometry.foreachHighlightGroup(e)}get hasOccludees(){return null!=this.geometry.occludees}}export{i as Instance};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(){this.first=0,this.count=0}}export{t as DrawCommand};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport s from\"../../../../../core/PooledArray.js\";import{BufferRange as t}from\"./BufferRange.js\";import{DrawCommand as e}from\"./DrawCommand.js\";class n{constructor(){this._numElements=0,this._instances=new Map,this.holes=new s({allocator:s=>s||new t,deallocator:null}),this.hasHiddenInstances=!1,this.hasOccludees=!1,this.drawCommandsDirty=!0,this.highlightGroups=new Set,this.drawCommandsDefault=h(),this.drawCommandsHighlights=new Map,this.drawCommandsOccludees=h(),this.drawCommandsShadowHighlightRest=h()}get numElements(){return this._numElements}get instances(){return this._instances}get hasHighlights(){return this.highlightGroups.size>0}resetInstanceSummary(){this.hasHiddenInstances=!1,this.hasOccludees=!1,this.highlightGroups.clear()}updateIfDrawCommandsDirty(s){if(this.drawCommandsDirty){this.resetInstanceSummary();for(const s of this.instances.values())this.updateDrawState(s);this.updateDrawCommands(s)}}addInstance(s,t){this.deleteInstance(s),this._instances.set(s,t),this._numElements+=t.numElements}deleteInstance(s){const t=this._instances.get(s);t&&(this._numElements-=t.numElements,this._instances.delete(s))}updateInstance(s,t,e){const n=this._instances.get(s);n&&(this._numElements-=n.numElements,n.from=t,n.to=e,this._numElements+=n.numElements)}updateDrawState(s){s.isVisible?(s.foreachHighlightGroup((s=>this.highlightGroups.add(s))),s.hasOccludees&&(this.hasOccludees=!0)):this.hasHiddenInstances=!0}updateDrawCommands(s){if(this.drawCommandsDefault.clear(),this.drawCommandsHighlights.clear(),this.drawCommandsOccludees.clear(),this.drawCommandsShadowHighlightRest.clear(),this.drawCommandsDirty=!1,0===this._instances.size)return;if(!this.needsMultipleCommands()){const t=this.drawCommandsDefault.pushNew(),e=this.holes.front();return null!=this.vao&&1===this.holes.length&&e.to===Math.floor(this.vao.byteSize/s)?(t.first=0,void(t.count=e.from)):(t.first=1/0,t.count=0,this._instances.forEach((s=>{t.first=Math.min(t.first,s.from),t.count=Math.max(t.count,s.to)})),void(t.count-=t.first))}const t=Array.from(this._instances.values()).sort(((s,t)=>s.from===t.from?s.to-t.to:s.from-t.from)),{drawCommandsHighlights:e}=this;for(const n of t)n.isVisible&&(o(n.hasOccludees?this.drawCommandsOccludees:this.drawCommandsDefault,n),n.hasHighlights?n.foreachHighlightGroup((s=>{let t=e.get(s);t||(t=h(),e.set(s,t)),o(t,n)})):o(this.drawCommandsShadowHighlightRest,n))}needsMultipleCommands(){return this.hasOccludees||this.hasHighlights||this.hasHiddenInstances}}class i extends n{}function a(s){return null!=s.vao}function h(){return new s({allocator:s=>s||new e,deallocator:s=>s})}function o(s,t){const e=s.back();if(null==e){const e=s.pushNew();return e.first=t.from,void(e.count=t.numElements)}if(r(e,t)){const s=t.from-e.first+t.numElements;e.count=s}else{const e=s.pushNew();e.first=t.from,e.count=t.numElements}}function r(s,t){return s.first+s.count>=t.from}export{n as PerBufferData,i as PerVaoData,a as hasVao};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass s{constructor(s){this.origin=s,this.buffers=new Array}dispose(){this.buffers.forEach((s=>s.vao.dispose())),this.buffers.length=0}findBuffer(s){return this.buffers.find((r=>r.instances.has(s)))}}export{s as PerOriginData};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{removeUnordered as t,filterInPlace as r}from\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import{nextHighestPowerOfTwo as i}from\"../../../../../core/mathUtils.js\";import{disposeMaybe as s}from\"../../../../../core/maybe.js\";import{NestedMap as o}from\"../../../../../core/NestedMap.js\";import a from\"../../../../../core/PooledArray.js\";import{addMany as n}from\"../../../../../core/SetUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import{subclass as u}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{copy as h,invert as f,transpose as c}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as m}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{glLayout as d}from\"../../../support/buffer/glUtil.js\";import{ShaderOutput as g}from\"../../core/shaderLibrary/ShaderOutput.js\";import{SyncRenderPlugin as p}from\"../../effects/RenderPlugin.js\";import{GLMaterials as y}from\"../../lib/GLMaterials.js\";import{DirtyState as _}from\"../../lib/ModelDirtyTypes.js\";import{RenderSlot as b}from\"../../lib/RenderSlot.js\";import{assert as w}from\"../../lib/Util.js\";import{DrawParameters as v}from\"../DrawParameters.js\";import{BufferRange as C,mergeAdjacentRanges as O}from\"./BufferRange.js\";import{Instance as A}from\"./Instance.js\";import{PerBufferData as E,hasVao as B}from\"./PerBufferData.js\";import{PerOriginData as S}from\"./PerOriginData.js\";let x=class extends p{get _hasAnyHighlight(){return this._highlightGroups.size>0}constructor(e){super(e),this._dataByOrigin=new Map,this._drawParameters=new v,this._highlightGroups=new Set,this.drapedPriority=0,this._produces=new Map,this._hasOccludees=!1}destroy(){this._glMaterials=s(this._glMaterials),this._dataByOrigin.forEach((e=>e.dispose())),this._dataByOrigin.clear(),this._vaoCache=null}initialize(){this.material.produces.forEach(((e,t)=>{this._produces.set(t,(t=>!(0===this._dataByOrigin.size||!(t!==g.Highlight&&t!==g.ShadowHighlight||this._hasAnyHighlight))&&e(t)))}))}initializeRenderContext(e,t){this._glMaterials=new y(this.material,t??e.materials),this._bufferWriter=this.material.createBufferWriter(),this._vaoCache=e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,d(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}get produces(){return this._produces}get hasOccludees(){return this._hasOccludees}get hasEmissions(){return this.material.hasEmissions}get isDecoration(){return this.material.parameters.isDecoration}queryRenderOccludedState(e){return this.material.queryRenderOccludedState(e)}get numGeometries(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.instances.size),0))),e}get usedMemory(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.vao.usedMemory),0))),e}forEachGeometry(e){this._dataByOrigin.forEach((t=>t.buffers.forEach((t=>t.instances.forEach((({geometry:t})=>e(t)))))))}modify(e){this._updateGeometries(e.updates),this._addAndRemoveGeometries(e.adds,e.removes),this._updateDrawCommands()}_updateGeometries(e){const t=this._bufferWriter;if(null==t)return;const r=t.vertexBufferLayout.stride/4;for(const i of e){const e=i.renderGeometry,s=this._dataByOrigin.get(e.localOrigin.id),o=s?.findBuffer(e.id);if(null==o)return;const a=o.instances.get(e.id);if(i.updateType&(_.GEOMETRY|_.TRANSFORMATION)){const i=W(t.elementCount(a.geometry.geometry.attributes)*r),s=t.vertexBufferLayout.createView(i.buffer);this._writeGeometry(e,s,0),o.vao.vertexBuffers.get(\"geometry\").setSubData(i,a.from*r,0,a.numElements*r)}i.updateType&(_.HIGHLIGHT|_.OCCLUDEE|_.VISIBILITY)&&(o.drawCommandsDirty=!0)}}_computeDeltas(e,t){const r=new o;for(const i of e){const e=i.localOrigin;if(null==e)continue;let t=r.get(e.id,null);null==t&&(t=new D(e.vec3),r.set(e.id,null,t)),t.changes.push(i)}for(const i of t){const e=i.localOrigin;if(null==e)continue;const t=this._dataByOrigin.get(e.id),s=t?.findBuffer(i.id);if(null==s)continue;let o=r.get(e.id,s);null==o&&(o=new D(e.vec3),r.set(e.id,s,o)),o.changes.push(i)}return r}_addAndRemoveGeometries(e,r){if(null==this._bufferWriter||null==this._vaoCache)return;const{_bufferWriter:i,_dataByOrigin:s}=this,o=i.vertexBufferLayout.stride/4,a=this._computeDeltas(e,r);a.forEach(((e,r)=>{const n=e.get(null),l=n?.changes??[];a.delete(r,null);let u=s.get(r);if(e.forEach(((e,n)=>{if(a.delete(r,n),null==n)return void w(!1,\"No VAO for removed geometries\");if(n.instances.size===e.changes.length)return this._vaoCache.deleteVao(n.vao),t(u.buffers,n),void(0===u.buffers.length&&0===l.length&&s.delete(r));const h=n.numElements,f=n.vao.byteSize/4,c=l.reduce(((e,t)=>e+i.elementCount(t.geometry.attributes)),0),m=e.changes.reduce(((e,t)=>e+i.elementCount(t.geometry.attributes)),0),d=Math.min((h+c-m)*o,z),g=d>f;d>H&&d<f/2?(e.changes.forEach((({id:e})=>n.deleteInstance(e))),n.instances.forEach((({geometry:e})=>l.push(e))),this._vaoCache.deleteVao(n.vao),t(u.buffers,n)):g?this._applyAndRebuild(n,l,e):this._applyRemoves(n,e)})),l.length>0)for(null==u&&(u=new S(n.origin),s.set(r,u)),u.buffers.forEach((e=>this._applyAdds(e,l)));l.length>0;)u.buffers.push(this._applyAndRebuild(new E,l,null))}))}_updateDrawCommands(){this._highlightGroups.clear(),this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.buffers.forEach((e=>{e.updateIfDrawCommandsDirty(this._bufferWriter.vertexBufferLayout.stride),e.hasHighlights&&n(this._highlightGroups,e.highlightGroups),this._hasOccludees=this._hasOccludees||e.hasOccludees}))}))}_applyAndRebuild(e,t,r){if(r)for(const m of r.changes)e.deleteInstance(m.id);const i=this._bufferWriter,s=i.vertexBufferLayout.stride,o=s/4,a=Math.floor(z/o);let n=e.numElements;for(;t.length>0;){const r=t.pop(),s=i.elementCount(r.geometry.attributes);if(n+s>a&&n>0){t.push(r);break}n+=s;const o=new A(r,0,0);w(null==e.instances.get(r.id)),e.addInstance(r.id,o)}const l=n*o,u=W(l),h=i.vertexBufferLayout.createView(u.buffer);let f=0;e.resetInstanceSummary(),e.instances.forEach(((t,r)=>{this._writeGeometry(t.geometry,h,f);const s=f;f+=i.elementCount(t.geometry.geometry.attributes),e.updateInstance(r,s,f),e.updateDrawState(t)})),this._vaoCache.deleteVao(e.vao),e.vao=this._vaoCache.newVao(V(l)),e.vao.vertexBuffers.get(\"geometry\").setSubData(u,0,0,f*o),e.holes.clear();const c=e.holes.pushNew();return c.from=f,c.to=Math.floor(e.vao.byteSize/s),e.updateDrawCommands(s),e}_applyRemoves(e,t){if(0===t.changes.length||null==this._bufferWriter)return;for(const a of t.changes){const t=a.id,r=e.instances.get(t);if(!r)continue;e.deleteInstance(t);const i=G.back();if(i){if(i.to===r.from){i.to=r.to;continue}if(i.from===r.to){i.from=r.from;continue}}const s=G.pushNew();s.from=r.from,s.to=r.to}O(G);const r=this._bufferWriter.vertexBufferLayout.stride/4,i=G.reduce(((e,t)=>Math.max(e,t.numElements)),0)*r,s=W(i);s.fill(0,0,i);const o=e.vao.vertexBuffers.get(\"geometry\");G.forAll((e=>o.setSubData(s,e.from*r,0,e.numElements*r))),e.holes.pushArray(G.data,G.length),G.forAll(((e,t)=>G.data[t]=null)),G.clear(),e.drawCommandsDirty=!0}_applyAdds(e,t){if(0===t.length||null==this._bufferWriter)return;if(!B(e))return void this._applyAndRebuild(e,t,null);const i=this._bufferWriter,s=i.vertexBufferLayout.stride/4,o=e.numElements,a=t.reduce(((e,t)=>e+i.elementCount(t.geometry.attributes)),0),n=Math.min((o+a)*s,z),l=4*n;if(e.vao.byteSize<V(z-H)&&l>e.vao.byteSize)return void this._applyAndRebuild(e,t,null);O(e.holes);const u=new Array;for(const r of t){const t=i.elementCount(r.geometry.attributes),s=R(e.holes,t);u.push(s)}const h=e.vao.vertexBuffers.get(\"geometry\");let f=0,c=0,m=0;const d=W(n),g=i.vertexBufferLayout.createView(d.buffer);t.forEach(((t,r)=>{const o=u[r];if(null==o)return;if(!(m===o)){const e=m-c;e>0&&h.setSubData(d,c*s,0,e*s),c=o,f=0}const a=i.elementCount(t.geometry.attributes);this._writeGeometry(t,g,f),f+=a,m=o+a;const n=new A(t,o,o+a);w(null==e.instances.get(t.id)),e.addInstance(t.id,n),e.drawCommandsDirty=!0}));const p=m-c;p>0&&h.setSubData(d,c*s,0,p*s),r(t,((e,t)=>null==u[t]))}_writeGeometry(e,t,r){null!=this._bufferWriter&&(h(j,e.transformation),j[12]-=e.localOrigin.vec3[0],j[13]-=e.localOrigin.vec3[1],j[14]-=e.localOrigin.vec3[2],f(M,j),c(M,M),this._bufferWriter.write(j,M,e.geometry.attributes,e.geometry.objectAndLayerIdColor,t,r))}updateAnimation(e){return this.material.update(e)}acquireTechniques(e){if(!this.material.shouldRender(e))return null;const{output:t,bind:r}=e,i=this.material.produces.get(r.slot);if(!i?.(t))return null;const{highlightGroupName:s,slot:o}=r,a=t===g.ShadowHighlight,n=t===g.Highlight,l=n||a,u=e=>l&&(0===this._highlightGroups.size||n&&!!s&&!e.has(s));if(u(this._highlightGroups))return null;const h=t===g.ShadowExcludeHighlight,f=!(l||h);for(const{buffers:c}of this._dataByOrigin.values())for(const i of c){if(u(i.highlightGroups))continue;const n=a?i.drawCommandsHighlights.size>0:l?s?i.drawCommandsHighlights.get(s):i.drawCommandsHighlights.size>0:((h&&i.needsMultipleCommands()?i.drawCommandsShadowHighlightRest:i.drawCommandsDefault)||null)?.length??!1,c=f&&i.drawCommandsOccludees||null;if(n||c?.length){const i=this._glMaterials.load(e.rctx,o,t),s=i?.beginSlot(r);if(s)return s}}return null}render(e,t){const{output:r,bind:i}=e,{slot:s,highlightGroupName:o}=i,a=r===g.Highlight;if(a&&!o)return;const n=r===g.ShadowHighlight,l=a||n,u=r===g.ShadowExcludeHighlight,h=!(l||u),f=s===b.OCCLUDER_MATERIAL||s===b.TRANSPARENT_OCCLUDER_MATERIAL?s:null,{rctx:c}=e;c.runAppleAmdDriverHelper();const m=c.bindTechnique(t,i,this.material.parameters);for(const d of this._dataByOrigin.values())for(const e of d.buffers){if(a&&(!e.hasHighlights||!e.drawCommandsHighlights.has(o)))continue;if(n&&!e.hasHighlights)continue;const r=()=>{const t=[];for(const r of e.drawCommandsHighlights.values())t.push(r);return t},s=l&&!n?e.drawCommandsHighlights.get(o)??null:null,g=n?r():l?s?[s]:N:(u&&e.needsMultipleCommands()?[e.drawCommandsShadowHighlightRest]:[e.drawCommandsDefault])||N,p=g.some((e=>e.length>0)),y=h&&e.drawCommandsOccludees||null;if(p||y?.length){if(this._drawParameters.origin=d.origin,m.bindDraw(i,this.material.parameters,this._drawParameters),t.ensureAttributeLocations(e.vao),c.bindVAO(e.vao),p)for(const e of g)c.setPipelineState(t.getPipeline(!1,f)),e.forAll((e=>c.drawArrays(t.primitiveType,e.first,e.count)));y?.length&&(c.setPipelineState(t.getPipeline(!0,f)),y.forAll((e=>c.drawArrays(t.primitiveType,e.first,e.count))))}}}get test(){}};e([l({constructOnly:!0})],x.prototype,\"material\",void 0),x=e([u(\"esri.views.3d.webgl-engine.materials.renderers.MergedRenderer\")],x);class D{constructor(e){this.origin=e,this.changes=new Array}}function R(e,t){const r=e.find((e=>e.numElements>=t));if(null==r)return null;const i=r.from;return r.from+=t,r.from>=r.to&&e.removeUnordered(r),i}const j=m(),M=m(),G=new a({allocator:e=>e||new C,deallocator:null}),H=65536,L=4*H,I=1024,T=16777216,z=T/4;let P=new Float32Array(H);function W(e){return P.length<e&&(P=new Float32Array(e)),P}function V(e){const t=4*e;return t<=I?I:t<L?i(t):Math.max(Math.min(Math.ceil(1.5*t/L)*L,T),t)}const N=[];export{x as MergedRenderer,V as sizeForVao};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{property as r}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{glLayout as i}from\"../../../../support/buffer/glUtil.js\";import{ShaderOutput as s}from\"../../../../webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SyncRenderPlugin as o}from\"../../../../webgl-engine/effects/RenderPlugin.js\";import{GLMaterials as a}from\"../../../../webgl-engine/lib/GLMaterials.js\";import{RenderSlot as n}from\"../../../../webgl-engine/lib/RenderSlot.js\";import{DrawParameters as l}from\"../../../../webgl-engine/materials/DrawParameters.js\";import{sizeForVao as h}from\"../../../../webgl-engine/materials/renderers/MergedRenderer.js\";let m=class extends o{constructor(e){super(e),this._hasHighlights=!1,this._glMaterials=null,this._produces=new Map,this._renderGeometries=new Map,this._vaoCache=null,this._drawParameters=new l,this._bufferWriter=null}get produces(){return this._produces}initialize(){this._bufferWriter=this.material.createBufferWriter(),this.material.produces.forEach(((e,r)=>{this._produces.set(r,(r=>!!(r!==s.Highlight&&r!==s.ShadowHighlight||this._hasHighlights)&&e(r)))}))}destroy(){this._glMaterials.dispose();const e=this._renderGeometries.keys();for(const r of e)this.removeRenderGeometry(r)}acquireTechniques(e){const r=this.material;if(!r.shouldRender(e))return null;const{output:t,bind:i}=e,o=r.produces.get(i.slot);if(!o?.(t))return null;if((t===s.Highlight||t===s.ShadowHighlight)&&!this._hasHighlights)return null;const a=this._glMaterials.load(e.rctx,i.slot,t);return a?.beginSlot(i)}render(e,r){const t=this._renderGeometries;if(0===t.size)return;const{bind:i}=e,s=i.slot===n.OCCLUDER_MATERIAL||i.slot===n.TRANSPARENT_OCCLUDER_MATERIAL?i.slot:null,o=e.rctx;o.runAppleAmdDriverHelper(),o.bindTechnique(r,i,this.material.parameters);const a=r.program;for(const[n,l]of t)this._drawParameters.origin=l.localOrigin,a.bindDraw(i,this.material.parameters,this._drawParameters),r.ensureAttributeLocations(l.vao),o.bindVAO(l.vao),o.setPipelineState(r.getPipeline(!1,s)),o.drawArrays(r.primitiveType,0,l.numElements)}initializeRenderContext(e,r){this._glMaterials=new a(this.material,e.materials);const t=e.renderContext.rctx.getVaoCache(this.material.vertexAttributeLocations,i(this._bufferWriter.vertexBufferLayout));this._vaoCache=t}uninitializeRenderContext(){}addRenderGeometry(e,r,t){this.removeRenderGeometry(e);const i=this._bufferWriter.vertexBufferLayout.stride,s=this._vaoCache.newVao(h(r.data.byteLength));s.vertexBuffers.get(\"geometry\").setSubData(new Uint8Array(r.data),0,0,r.elementCount*i);const o={localOrigin:t,vao:s,numElements:r.elementCount};return this._renderGeometries.set(e,o),o}removeRenderGeometry(e){const r=this._renderGeometries.get(e);null!=r&&(this._vaoCache.deleteVao(r.vao),this._renderGeometries.delete(e))}};e([r({constructOnly:!0})],m.prototype,\"material\",void 0),m=e([t(\"esri.views.3d.layers.graphics.pipeline.rendering.DirectRenderer\")],m);export{m as DirectRenderer};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/a)}function a(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/n)}function n(t,a,n){return 2*Math.atan(a*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}function r(t,a,n){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}export{n as fovd2fovx,r as fovd2fovy,t as fovx2fovd,a as fovy2fovd};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{MaterialChangeSet as e}from\"./ChangeSet.js\";var r,t;function n(r){const t=new Map,n=r=>{let n=t.get(r);return n||(n=new e,t.set(r,n)),n};return r.removes.forAll((e=>{o(e)&&n(e.material).removes.push(e)})),r.adds.forAll((e=>{o(e)&&n(e.material).adds.push(e)})),r.updates.forAll((e=>{o(e.renderGeometry)&&n(e.renderGeometry.material).updates.push(e)})),t}function o(e){return e.geometry.indexCount>=1}!function(e){e[e.Default=0]=\"Default\",e[e.Screenshot=1]=\"Screenshot\",e[e.ObjectAndLayerID=2]=\"ObjectAndLayerID\"}(r||(r={})),function(e){e[e.TOP=0]=\"TOP\",e[e.RIGHT=1]=\"RIGHT\",e[e.BOTTOM=2]=\"BOTTOM\",e[e.LEFT=3]=\"LEFT\"}(t||(t={}));export{t as PaddingSide,r as RendererTarget,n as splitRenderGeometryChangeSetByMaterial};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import i from\"../../../core/Accessor.js\";import e from\"../../../core/Logger.js\";import{lerp as r}from\"../../../core/mathUtils.js\";import{createScreenPointArray as s,createRenderScreenPointArray3 as o}from\"../../../core/screenUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{copy as a,multiply as p,invert as u,transpose as l,frustum as _,equals as c,lookAt as v}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as w}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{copy as d,exactEquals as y}from\"../../../core/libs/gl-matrix-2/math/vec2.js\";import{fromValues as g}from\"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{d as m,i as f,j as x,c as M,p as D,a as j,f as T,z as R,y as P,h as F,l as V,e as O,n as C,o as b}from\"../../../chunks/vec32.js\";import{create as S}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{d as I,e as E,a as L,c as H,f as A,t as G}from\"../../../chunks/vec42.js\";import{fromValues as B,create as U}from\"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{create as k,copy as z,fromMatrix as W}from\"../../../geometry/support/frustum.js\";import{create as X}from\"../../../geometry/support/ray.js\";import{projectPointSignedLength as Y}from\"../../../geometry/support/vector.js\";import{ViewingMode as q}from\"../../ViewingMode.js\";import{fovd2fovx as N,fovx2fovd as J,fovd2fovy as K,fovy2fovd as Q}from\"../webgl-engine/lib/fov.js\";import{PaddingSide as Z}from\"../webgl-engine/lib/rendererUtils.js\";var $;let tt=$=class extends i{constructor(t){super(t),this._ray=X(),this._viewport=B(0,0,1,1),this._padding=B(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=g(1,1e3),this._viewDirty=!0,this._viewMatrix=w(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=w(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=w(),this._frustumDirty=!0,this._frustum=k(),this._fullViewport=U(),this._pixelRatio=1,this.row=0,this.column=0,this._rows=1,this._columns=1,this._center=S(),this._up=S(),this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get rows(){return this._rows}set rows(t){this._rows=Math.max(1,t)}get columns(){return this._columns}set columns(t){this._columns=Math.max(1,t)}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,\"_center\")}get ray(){return m(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,\"_up\")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){a(this._viewMatrix,t),this.notifyChange(\"_viewMatrix\"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),f(S(),-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10])}get viewUp(){return this._ensureViewClean(),f(S(),this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9])}get viewRight(){return this._ensureViewClean(),f(S(),this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8])}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_nearFar\"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_nearFar\"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=I(U(),this._viewport,1/this.pixelRatio),i=this._get(\"screenViewport\");return i&&E(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=I(U(),this._padding,1/this.pixelRatio),i=this._get(\"screenPadding\");return i&&E(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[Z.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[Z.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_viewport\"))}get fullWidth(){return this._viewport[2]+this._padding[Z.RIGHT]+this._padding[Z.LEFT]}set fullWidth(t){this.width=t-(this._padding[Z.RIGHT]+this._padding[Z.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[Z.TOP]+this._padding[Z.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[Z.TOP]+this._padding[Z.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[Z.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[Z.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){L(this._padding,t)||(this._viewport[0]+=t[Z.LEFT]-this._padding[Z.LEFT],this._viewport[1]+=t[Z.BOTTOM]-this._padding[Z.BOTTOM],this._viewport[2]-=t[Z.RIGHT]+t[Z.LEFT]-(this._padding[Z.RIGHT]+this._padding[Z.LEFT]),this._viewport[3]-=t[Z.TOP]+t[Z.BOTTOM]-(this._padding[Z.TOP]+this._padding[Z.BOTTOM]),H(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange(\"_padding\"),this.notifyChange(\"_viewport\"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&(p(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){return this._projectionMatrixInternal}get inverseProjectionMatrix(){return u(w(),this.projectionMatrix)||this._get(\"inverseProjectionMatrix\")||w()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return N(this._fov,this.width,this.height)}set fovX(t){this._fov=J(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return K(this._fov,this.width,this.height)}set fovY(t){this._fov=Q(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return x(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&(u(this._viewInverseTransposeMatrix,this.viewMatrix),l(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const i=2*t-1;return 2*this.near*this.far/(this.far+this.near-i*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}get _projectionMatrixInternal(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2)*2,r=e*this._aspect,s=e/this.rows,o=r/this.columns,n=-r/2+this.column*o,h=n+o,a=-e/2+this.row*s,p=a+s,u=_(w(),n*(1+2*this._padding[Z.LEFT]/t),h*(1+2*this._padding[Z.RIGHT]/t),a*(1+2*this._padding[Z.BOTTOM]/i),p*(1+2*this._padding[Z.TOP]/i),this.near,this.far),l=this._get(\"projectionMatrix\");return l&&c(l,u)?l:u}copyFrom(t){M(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,H(this._viewport,t.viewport),this.notifyChange(\"_viewport\"),H(this._padding,t.padding),this.notifyChange(\"_padding\"),d(this._nearFar,t.nearFar),this.notifyChange(\"_nearFar\"),this._fov=t.fov,this.row=t.row,this.column=t.column,this.rows=t.rows,this.columns=t.columns,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||(a(this._viewMatrix,t.viewMatrix),this.notifyChange(\"_viewMatrix\")),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||(z(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(a(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),H(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up,this.fov=t.fov}clone(){return(new $).copyFrom(this)}equals(t){return D(this.eye,t.eye)&&D(this.center,t.center)&&D(this.up,t.up)&&L(this._viewport,t.viewport)&&L(this._padding,t.padding)&&y(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation&&this.row===t.row&&this.column===t.column&&this.rows===t.rows&&this.columns===t.columns}almostEquals(t){const i=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||A(t.screenPadding,this.screenPadding)>=i||A(this.screenViewport,t.screenViewport)>=i||this.row!==t.row||this.column!==t.column||this.rows!==t.rows||this.columns!==t.columns)return!1;j(st,t.eye,t.center),j(ot,this.eye,this.center);const e=T(st,ot),r=R(st),s=R(ot),o=5e-4;return e*e>=(1-1e-10)*r*s&&P(t.eye,this.eye)<Math.max(r,s)*o*o}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs(Y(this.viewForward,m(st,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=s()){return t[0]=(this.padding[Z.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[Z.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t[0]=this.padding[Z.LEFT]+this.width*i,t[1]=this.padding[Z.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==et&&M(et,t),et[3]=1,G(et,et,this.projectionMatrix);const e=Math.abs(et[3]);F(et,et,1/e);const s=this.fullViewport;i[0]=r(0,s[0]+s[2],.5+.5*et[0]),i[1]=r(0,s[1]+s[3],.5+.5*et[1]),i[2]=.5*(et[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;et[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],et[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],et[2]=(2*t[2]-1)*t[3],et[3]=t[3],null!=this.inverseProjectionMatrix&&(G(et,et,this.inverseProjectionMatrix),i[0]=et[0],i[1]=et[1],i[2]=et[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,nt),this.renderToScreen(nt,i),i}projectToRenderScreen(t,i){if(et[0]=t[0],et[1]=t[1],et[2]=t[2],et[3]=1,G(et,et,this.viewProjectionMatrix),0===et[3])return null;const e=et;F(e,e,1/Math.abs(et[3]));const s=this.fullViewport,o=r(0,s[0]+s[2],.5+.5*e[0]),n=r(0,s[1]+s[3],.5+.5*e[1]);return\"x\"in i?(i.x=o,i.y=n):(i[0]=o,i[1]=n,i.length>2&&(i[2]=.5*(e[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,nt),i)}unprojectFromRenderScreen(t,i){if(p(rt,this.projectionMatrix,this.viewMatrix),!u(rt,rt))return null;const e=this.fullViewport;return et[0]=2*(t[0]-e[0])/e[2]-1,et[1]=2*(t[1]-e[1])/e[3]-1,et[2]=2*t[2]-1,et[3]=1,G(et,et,rt),0===et[3]?null:(i[0]=et[0]/et[3],i[1]=et[1]/et[3],i[2]=et[2]/et[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,o=i*this.pixelRatio,n=Math.max(s-e/2,0),h=Math.max(this.fullHeight-o-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-o-r/2,0),u=e-a- -Math.min(this.fullWidth-s-e/2,0),l=r-p- -Math.min(o-r/2,0);return[Math.round(n),Math.round(h),Math.round(u),Math.round(l)]}computeUp(t){t===q.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){m(st,this.center,this.eye);const t=V(this.center);t<1?(f(this._up,0,0,1),this._markViewDirty(),this.notifyChange(\"_up\")):Math.abs(T(st,this.center))>.9999*V(st)*t||(O(this._up,st,this.center),O(this._up,this._up,st),C(this._up,this._up),this.notifyChange(\"_up\"),this._markViewDirty())}_computeUpLocal(){b(st,this.eye,this.center),Math.abs(st[2])<=.9999&&(F(st,st,st[2]),f(this._up,-st[0],-st[1],1-st[2]),C(this._up,this._up),this.notifyChange(\"_up\"),this._markViewDirty())}_compareAndSetView(t,i,r=\"\"){\"number\"==typeof t[0]&&isFinite(t[0])&&\"number\"==typeof t[1]&&isFinite(t[1])&&\"number\"==typeof t[2]&&isFinite(t[2])?D(t,i)||(M(i,t),this._markViewDirty(),r.length&&this.notifyChange(r)):e.getLogger(\"esri.views.3d.webgl-engine.lib.RenderCamera\").warn(\"RenderCamera vector contains invalid number, ignoring value\")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&(W(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&(v(this._viewMatrix,this.eye,this.center,this.up),this.notifyChange(\"_viewMatrix\"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};t([n()],tt.prototype,\"_viewport\",void 0),t([n()],tt.prototype,\"_padding\",void 0),t([n()],tt.prototype,\"_fov\",void 0),t([n()],tt.prototype,\"_nearFar\",void 0),t([n()],tt.prototype,\"_viewDirty\",void 0),t([n()],tt.prototype,\"_viewMatrix\",void 0),t([n()],tt.prototype,\"_pixelRatio\",void 0),t([n()],tt.prototype,\"pixelRatio\",null),t([n()],tt.prototype,\"row\",void 0),t([n()],tt.prototype,\"column\",void 0),t([n()],tt.prototype,\"_rows\",void 0),t([n()],tt.prototype,\"rows\",null),t([n()],tt.prototype,\"_columns\",void 0),t([n()],tt.prototype,\"columns\",null),t([n()],tt.prototype,\"eye\",null),t([n()],tt.prototype,\"center\",null),t([n()],tt.prototype,\"_center\",void 0),t([n()],tt.prototype,\"up\",null),t([n()],tt.prototype,\"_up\",void 0),t([n()],tt.prototype,\"viewMatrix\",null),t([n({readOnly:!0})],tt.prototype,\"viewForward\",null),t([n({readOnly:!0})],tt.prototype,\"viewUp\",null),t([n({readOnly:!0})],tt.prototype,\"viewRight\",null),t([n({readOnly:!0})],tt.prototype,\"nearFar\",null),t([n()],tt.prototype,\"near\",null),t([n()],tt.prototype,\"far\",null),t([n()],tt.prototype,\"viewport\",null),t([n({readOnly:!0})],tt.prototype,\"screenViewport\",null),t([n({readOnly:!0})],tt.prototype,\"screenPadding\",null),t([n()],tt.prototype,\"x\",null),t([n()],tt.prototype,\"y\",null),t([n()],tt.prototype,\"width\",null),t([n()],tt.prototype,\"height\",null),t([n()],tt.prototype,\"fullWidth\",null),t([n()],tt.prototype,\"fullHeight\",null),t([n({readOnly:!0})],tt.prototype,\"_aspect\",null),t([n()],tt.prototype,\"padding\",null),t([n({readOnly:!0})],tt.prototype,\"projectionMatrix\",null),t([n({readOnly:!0})],tt.prototype,\"inverseProjectionMatrix\",null),t([n()],tt.prototype,\"fov\",null),t([n()],tt.prototype,\"fovX\",null),t([n()],tt.prototype,\"fovY\",null),t([n()],tt.prototype,\"viewInverseTransposeMatrix\",null),t([n({readOnly:!0})],tt.prototype,\"_projectionMatrixInternal\",null),t([n()],tt.prototype,\"relativeElevation\",void 0),tt=$=t([h(\"esri.views.3d.webgl.RenderCamera\")],tt);const it=tt,et=U(),rt=w(),st=S(),ot=S(),nt=o();export{it as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BufferObject as e}from\"../../../../webgl/BufferObject.js\";import{Usage as t}from\"../../../../webgl/enums.js\";class r{constructor(r,i,s){this._elementSize=i,this._buffer=e.createVertex(r,t.STATIC_DRAW),this.resize(s)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get usedMemory(){return this._array.byteLength+this._buffer.usedMemory}copyRange(e,t,r,i=0){const s=new Uint8Array(this.array,e*this.elementSize,(t-e)*this.elementSize);new Uint8Array(r.array,i*this.elementSize).set(s)}transferAll(){this._buffer.setData(this._array)}transferRange(e,t){const r=e*this._elementSize,i=t*this._elementSize;this._buffer.setSubData(new Uint8Array(this._array),r,r,i)}resize(e){const t=e*this._elementSize,r=new ArrayBuffer(t);this._array&&(e>=this._capacity?new Uint8Array(r).set(new Uint8Array(this._array)):new Uint8Array(r).set(new Uint8Array(this._array).subarray(0,e*this._elementSize))),this._array=r,this._buffer.setSize(t),this._capacity=e}}export{r as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{reallocShrinkThreshold as t,reallocGrowthFactor as i,reallocShrinkFactor as e}from\"../../../../../core/arrayUtils.js\";import{BufferViewVec3f as s,BufferViewMat3f as a,BufferViewVec4f as r,BufferViewVec4u8 as n}from\"../../../../../geometry/support/buffer/BufferView.js\";import{assert as h}from\"../Util.js\";import{VertexAttribute as d}from\"../VertexAttribute.js\";import _ from\"./BackedBufferObject.js\";class c{constructor(t){this.modelOriginHi=t.getField(d.INSTANCEMODELORIGINHI,s),this.modelOriginLo=t.getField(d.INSTANCEMODELORIGINLO,s),this.model=t.getField(d.INSTANCEMODEL,a),this.modelNormal=t.getField(d.INSTANCEMODELNORMAL,a),this.featureAttribute=t.getField(d.INSTANCEFEATUREATTRIBUTE,r),this.color=t.getField(d.INSTANCECOLOR,n),this.objectAndLayerIdColor=t.getField(d.INSTANCEOBJECTANDLAYERIDCOLOR,n)}}class f{constructor(t,i){this._rctx=t,this._instanceBufferLayout=i,this._headIndex=0,this._tailIndex=0,this._firstIndex=null,this._captureFirstIndex=!0,this._updating=!1,this._prevHeadIndex=0,this._resized=!1,this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const t=this._headIndex,i=this._tailIndex;return t>=i?t-i:t+this._capacity-i}get isEmpty(){return this._headIndex===this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get usedMemory(){return this._buffer?.usedMemory??0}reset(){this._headIndex=0,this._tailIndex=0,this._firstIndex=null}startUpdateCycle(){this._captureFirstIndex=!0}beginUpdate(){h(!this._updating,\"already updating\"),this._updating=!0,this._prevHeadIndex=this._headIndex}endUpdate(){h(this._updating,\"not updating\"),this.size<t*this.capacity&&this._shrink(),this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex),this._updating=!1}allocateHead(){h(this._updating,\"not updating\"),this.isFull&&this._grow();const t=this.headIndex;return this._captureFirstIndex&&(this._firstIndex=t,this._captureFirstIndex=!1),this._incrementHead(),h(this._headIndex!==this._tailIndex,\"invalid pointers\"),t}freeTail(){h(this._updating,\"not updating\"),h(this.size>0,\"invalid size\");const t=this._tailIndex===this._firstIndex;this._incrementTail(),t&&(this._firstIndex=this._tailIndex)}_grow(){const t=Math.max(u,Math.floor(this._capacity*i));this._resize(t)}_shrink(){const t=Math.max(u,Math.floor(this._capacity*e));this._resize(t)}_resize(t){if(h(this._updating,\"not updating\"),t===this._capacity)return;const i=new _(this._rctx,this._instanceBufferLayout.stride,t);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const t=this.size,e=this._compactInstances(i);h(e===t,\"invalid compaction\"),this._buffer.destroy(),this._tailIndex=0,this._headIndex=e,this._prevHeadIndex=0}this._resized=!0,this._capacity=t,this._buffer=i,this._view=new c(this._instanceBufferLayout.createView(this._buffer.array))}_compactInstances(t){const i=this._headIndex,e=this._tailIndex;return e<i?(this._buffer.copyRange(e,i,t),i-e):e>i?(this._buffer.copyRange(e,this._capacity,t),i>0&&this._buffer.copyRange(0,i,t,this._capacity-e),i+(this._capacity-e)):0}_incrementHead(t=1){this._headIndex=(this._headIndex+t)%this._capacity}_incrementTail(t=1){this._tailIndex=(this._tailIndex+t)%this._capacity}_transferRange(t,i){t<i?this._buffer.transferRange(t,i):t>i&&(i>0&&this._buffer.transferRange(0,i),this._buffer.transferRange(t,this._capacity))}}const u=64;export{f as RenderInstanceData,c as RenderInstanceDataView,u as initialCapacity};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{reallocGrowthFactor as s}from\"../../../../../core/arrayUtils.js\";import i from\"../../../../../core/Evented.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{fromMat4 as o,invert as h,transpose as l}from\"../../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as n}from\"../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{multiply as c}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as g}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as m}from\"../../../../../chunks/vec32.js\";import{create as f}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{BufferViewMat4f64 as d,BufferViewVec3f64 as _,BufferViewMat3f as p,BufferViewVec2f as T,BufferViewVec4f64 as u,BufferViewVec4f as L,BufferViewVec4u8 as E,BufferViewUint8 as A}from\"../../../../../geometry/support/buffer/BufferView.js\";import{scaleFromMatrix as v}from\"../../../support/mathUtils.js\";import{newLayout as M}from\"../../../support/buffer/InterleavedLayout.js\";import{assert as O}from\"../Util.js\";import{VertexAttribute as I}from\"../VertexAttribute.js\";import{initialCapacity as S}from\"./RenderInstanceData.js\";var F;function C(t){let e=M().mat4f64(I.LOCALTRANSFORM).mat4f64(I.GLOBALTRANSFORM).vec4f64(I.BOUNDINGSPHERE).vec3f64(I.MODELORIGIN).mat3f(I.INSTANCEMODEL).mat3f(I.INSTANCEMODELNORMAL).vec2f(I.MODELSCALEFACTORS);return t.includes(I.FEATUREATTRIBUTE)&&(e=e.vec4f(I.FEATUREATTRIBUTE)),t.includes(I.COLOR)&&(e=e.vec4u8(I.COLOR)),t.includes(I.OBJECTANDLAYERIDCOLOR)&&(e=e.vec4u8(I.OBJECTANDLAYERIDCOLOR)),e=e.u8(I.STATE).u8(I.LODLEVEL),e}!function(t){t[t.ALLOCATED=1]=\"ALLOCATED\",t[t.DEFAULT_ACTIVE=2]=\"DEFAULT_ACTIVE\",t[t.VISIBLE=4]=\"VISIBLE\",t[t.HIGHLIGHT=8]=\"HIGHLIGHT\",t[t.HIGHLIGHT_ACTIVE=16]=\"HIGHLIGHT_ACTIVE\",t[t.REMOVE=32]=\"REMOVE\",t[t.TRANSFORM_CHANGED=64]=\"TRANSFORM_CHANGED\",t[t.ACTIVE=18]=\"ACTIVE\"}(F||(F={}));class R{constructor(t){this.localTransform=t.getField(I.LOCALTRANSFORM,d),this.globalTransform=t.getField(I.GLOBALTRANSFORM,d),this.modelOrigin=t.getField(I.MODELORIGIN,_),this.model=t.getField(I.INSTANCEMODEL,p),this.modelNormal=t.getField(I.INSTANCEMODELNORMAL,p),this.modelScaleFactors=t.getField(I.MODELSCALEFACTORS,T),this.boundingSphere=t.getField(I.BOUNDINGSPHERE,u),this.featureAttribute=t.getField(I.FEATUREATTRIBUTE,L),this.color=t.getField(I.COLOR,E),this.objectAndLayerIdColor=t.getField(I.OBJECTANDLAYERIDCOLOR,E),this.state=t.getField(I.STATE,A),this.lodLevel=t.getField(I.LODLEVEL,A)}}let b=class extends e{constructor(t,e){super(t),this.events=new i,this._capacity=0,this._size=0,this._next=0,this._highlightGroupMap=new Map,this._highlightGroupMapPrev=new Map,this._layout=C(e),this._capacity=S,this._buffer=this._layout.createBuffer(this._capacity),this._view=new R(this._buffer)}get capacity(){return this._capacity}get size(){return this._size}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const t=this._findSlot();return this._view.state.set(t,F.ALLOCATED),this._size++,this.events.emit(\"instances-changed\"),t}removeInstance(t){const e=this._view.state;O(t>=0&&t<this._capacity&&!!(e.get(t)&F.ALLOCATED),\"invalid instance handle\"),this._getStateFlag(t,F.ACTIVE)?this._setStateFlags(t,F.REMOVE):this.freeInstance(t),this.events.emit(\"instances-changed\")}freeInstance(t){const e=this._view.state;O(t>=0&&t<this._capacity&&!!(e.get(t)&F.ALLOCATED),\"invalid instance handle\"),e.set(t,0),this._size--}setLocalTransform(t,e,s=!0){this._view.localTransform.setMat(t,e),s&&this.updateModelTransform(t)}getLocalTransform(t,e){this._view.localTransform.getMat(t,e)}setGlobalTransform(t,e,s=!0){this._view.globalTransform.setMat(t,e),s&&this.updateModelTransform(t)}getGlobalTransform(t,e){this._view.globalTransform.getMat(t,e)}updateModelTransform(t){const e=this._view,s=G,i=y;e.localTransform.getMat(t,D),e.globalTransform.getMat(t,N);const a=c(N,N,D);m(s,a[12],a[13],a[14]),e.modelOrigin.setVec(t,s),o(i,a),e.model.setMat(t,i);const r=v(G,a);r.sort(),e.modelScaleFactors.set(t,0,r[1]),e.modelScaleFactors.set(t,1,r[2]),h(i,i),l(i,i),e.modelNormal.setMat(t,i),this._setStateFlags(t,F.TRANSFORM_CHANGED),this.events.emit(\"instance-transform-changed\",{index:t})}getModelTransform(t,e){const s=this._view;s.model.getMat(t,y),s.modelOrigin.getVec(t,G),e[0]=y[0],e[1]=y[1],e[2]=y[2],e[3]=0,e[4]=y[3],e[5]=y[4],e[6]=y[5],e[7]=0,e[8]=y[6],e[9]=y[7],e[10]=y[8],e[11]=0,e[12]=G[0],e[13]=G[1],e[14]=G[2],e[15]=1}applyShaderTransformation(t,e){null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedModelTransform(t,e){return this.getModelTransform(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e),e}getCombinedLocalTransform(t,e){this._view.localTransform.getMat(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedMaxScaleFactor(t){let e=this._view.modelScaleFactors.get(t,1);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(G,this,t),e*=Math.max(G[0],G[1],G[2])),e}getCombinedMedianScaleFactor(t){let e=this._view.modelScaleFactors.get(t,0);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(G,this,t),e*=w(G[0],G[1],G[2])),e}getModel(t,e){this._view.model.getMat(t,e)}setFeatureAttribute(t,e){this._view.featureAttribute.setVec(t,e)}getFeatureAttribute(t,e){this._view.featureAttribute.getVec(t,e)}setColor(t,e){this._view.color.setVec(t,e)}setObjectAndLayerIdColor(t,e){this._view.objectAndLayerIdColor.setVec(t,e)}setVisible(t,e){e!==this.getVisible(t)&&(this._setStateFlag(t,F.VISIBLE,e),this.events.emit(\"instance-visibility-changed\",{index:t}))}getVisible(t){return this._getStateFlag(t,F.VISIBLE)}setHighlight(t,e,s){let i=this._highlightGroupMap.get(t);e?(i||(i=new Set,this._highlightGroupMap.set(t,i)),i.add(s)&&(this._setStateFlag(t,F.HIGHLIGHT,!0),this.events.emit(\"instance-highlight-changed\"))):i?.delete(s)&&(0===i.size&&(this._highlightGroupMap.delete(t),this._setStateFlag(t,F.HIGHLIGHT,!1)),this.events.emit(\"instance-highlight-changed\"))}getHighlight(t){return this._getStateFlag(t,F.HIGHLIGHT)}foreachHighlightGroupPrev(t,e){this._highlightGroupMapPrev.get(t)?.forEach(e),this._highlightGroupMapPrev.delete(t)}foreachHighlightGroup(t,e){const s=this._highlightGroupMap.get(t);s?.forEach(e),s?this._highlightGroupMapPrev.set(t,new Set(s)):this._highlightGroupMapPrev.delete(t)}getState(t){return this._view.state.get(t)}getLodLevel(t){return this._view.lodLevel.get(t)}countFlags(t){let e=0;for(let s=0;s<this._capacity;++s){this.getState(s)&t&&++e}return e}_setStateFlags(t,e){const s=this._view.state;e=s.get(t)|e,s.set(t,e)}_clearStateFlags(t,e){const s=this._view.state;e=s.get(t)&~e,s.set(t,e)}_setStateFlag(t,e,s){s?this._setStateFlags(t,e):this._clearStateFlags(t,e)}_getStateFlag(t,e){return!!(this._view.state.get(t)&e)}_grow(){this._capacity=Math.max(S,Math.floor(this._capacity*s)),this._buffer=this._layout.createBuffer(this._capacity).copyFrom(this._buffer),this._view=new R(this._buffer)}_findSlot(){const t=this._view.state;let e=this._next;for(;t.get(e)&F.ALLOCATED;)e=e+1===this._capacity?0:e+1;return this._next=e+1===this._capacity?0:e+1,e}};function w(t,e,s){return Math.max(Math.min(t,e),Math.min(Math.max(t,e),s))}t([a({constructOnly:!0})],b.prototype,\"shaderTransformation\",void 0),t([a()],b.prototype,\"_size\",void 0),t([a({readOnly:!0})],b.prototype,\"size\",null),b=t([r(\"esri.views.3d.webgl-engine.lib.lodRendering.InstanceData\")],b);const G=f(),y=n(),D=g(),N=g();export{b as InstanceData,R as InstanceDataView,F as StateFlags};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as e}from\"../../../../../chunks/vec32.js\";import{w as s,c as i,a as r}from\"../../../../../chunks/sphere.js\";import{maxScale as a}from\"../../../support/mathUtils.js\";import h from\"../Octree.js\";class n extends h{constructor(e,r){super((t=>s(this._instanceData.view.boundingSphere.getVec(t,this._tmpSphere))),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=i(),this._tmpMat4=t()}addInstance(t){const s=this._instanceData.view.boundingSphere,i=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);e(r(this._tmpSphere),this._boundingSphere.center,i),this._tmpSphere[3]=this._boundingSphere.radius*a(i),s.setVec(t,this._tmpSphere),this.add([t])}removeInstance(t){this.remove([t])}}export{n as InstanceOctree};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass e{constructor(e,i){this._worldSpaceRadius=e,this._minScreenSpaceRadii=i}selectLevel(e,i,t){const c=t.computeScreenPixelSizeAt(e),r=this._worldSpaceRadius*i/c;let s=0;for(let a=1;a<this._minScreenSpaceRadii.length;++a)r>=this._minScreenSpaceRadii[a]&&(s=a);return s}}export{e as LevelSelector};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as t}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as r,IDENTITY as i}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{g as s,t as e,h as a,l as n,c as o,n as h}from\"../../../../chunks/vec32.js\";import{create as l,UNIT_Z as d}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{t as c}from\"../../../../chunks/vec42.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{create as m,fromPoints as y,copy as u}from\"../../../../geometry/support/ray.js\";import{ViewingMode as p}from\"../../../ViewingMode.js\";import{IntersectorOptions as g,StoreResults as _,IntersectorType as O}from\"./IntersectorInterfaces.js\";import{HudTarget as L}from\"./IntersectorTarget.js\";import{isValidIntersectorResult as v}from\"./intersectorUtils.js\";import{IntersectorTransform as j,getVerticalOffsetObject3D as w}from\"./verticalOffsetUtils.js\";const E=1e-5;class b{constructor(t){this.options=new g,this._results=new A,this.transform=new j,this.tolerance=E,this.verticalOffset=null,this._ray=m(),this._rayEnd=l(),this._rayBeginTransformed=l(),this._rayEndTransformed=l(),this.viewingMode=t??p.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,i){this.resetWithRay(y(t,r,this._ray),i)}resetWithRay(t,r){this.camera=r,t!==this._ray&&u(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===p.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,s(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(t=null,r,i,s,e){this.point=r,this.filterPredicate=s,this.tolerance=i??E;const a=w(this.verticalOffset);if(t&&t.length>0){const r=e?t=>{e(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const i of t){const t=i.getSpatialQueryAccelerator?.();null!=t?(null!=a?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,r,a):t.forEachAlongRay(this._ray.origin,this._ray.direction,r),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(r)):i.objects.forAll((t=>r(t)))}}this.sortResults()}intersectObject(t){const r=t.geometries;if(!r)return;const s=t.effectiveTransformation,a=w(this.verticalOffset);for(const n of r){if(!n.visible)continue;const{material:r,id:o}=n;if(!r.visible)continue;this.transform.setAndInvalidateLazyTransforms(s,n.transformation),e(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),e(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const h=this.transform.transform;null!=a&&(a.objectTransform=this.transform),r.intersect(n,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((r,s,e,a,n,l)=>{if(r>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,r))return;const d=a?this._results.hud:this._results,c=a?a=>{const h=new L(t,o,e,l);a.set(O.HUD,h,r,s,i,n)}:i=>i.set(O.OBJECT,{object:t,geometryId:o,triangleNr:e},r,s,h,n);if((null==d.min.drapedLayerOrder||n>=d.min.drapedLayerOrder)&&(null==d.min.dist||r<d.min.dist)&&c(d.min),this.options.store!==_.MIN&&(null==d.max.drapedLayerOrder||n<d.max.drapedLayerOrder)&&(null==d.max.dist||r>d.max.dist)&&c(d.max),this.options.store===_.ALL)if(a){const t=new I(this._ray);c(t),this._results.hud.all.push(t)}else{const t=new B(this._ray);c(t),this._results.all.push(t)}}}))}}sortResults(t=this._results.all){t.sort(((t,r)=>t.dist!==r.dist?(t.dist??0)-(r.dist??0):t.drapedLayerOrder!==r.drapedLayerOrder?x(t.drapedLayerOrder,r.drapedLayerOrder):x(t.drapedLayerGraphicOrder,r.drapedLayerGraphicOrder)))}}function x(t,r){return(r??-Number.MAX_VALUE)-(t??-Number.MAX_VALUE)}function T(t){return new b(t)}class A{constructor(){this.min=new B(m()),this.max=new B(m()),this.hud={min:new I(m()),max:new I(m()),all:new Array},this.ground=new B(m()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class B{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?(a(M,this.ray.direction,this.dist),n(M)):null}getIntersectionPoint(t){return!!v(this)&&(a(M,this.ray.direction,this.dist),s(t,this.ray.origin,M),!0)}getTransformedNormal(t){return o(R,this.normal),R[3]=0,c(R,R,this.transformation),o(t,R),h(t,t)}constructor(t){this.intersector=O.OBJECT,this.normal=l(),this.transformation=r(),this._ray=m(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=O.OBJECT,u(t,this._ray)}set(r,s,e,a,n,h,l){this.intersector=r,this.dist=e,o(this.normal,a??d),t(this.transformation,n??i),this.target=s,this.drapedLayerOrder=h,this.drapedLayerGraphicOrder=l}copy(r){u(r.ray,this._ray),this.intersector=r.intersector,this.dist=r.dist,this.target=r.target,this.drapedLayerOrder=r.drapedLayerOrder,this.drapedLayerGraphicOrder=r.drapedLayerGraphicOrder,o(this.normal,r.normal),t(this.transformation,r.transformation)}}class I extends B{constructor(){super(...arguments),this.intersector=O.HUD}}function G(t){return new B(t)}const M=l(),R=f();export{E as defaultTolerance,T as newIntersector,G as newIntersectorResult};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VertexArrayObject as e}from\"../../../webgl/VertexArrayObject.js\";class r extends e{}export{r as VertexArrayObject};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glLayout as t}from\"../../../support/buffer/glUtil.js\";import{ContentObject as e}from\"../ContentObject.js\";import{Default3D as r}from\"../DefaultVertexAttributeLocations.js\";import{GLMaterials as s}from\"../GLMaterials.js\";import{newIntersectorResult as o}from\"../Intersector.js\";import{IntersectorType as n,StoreResults as i}from\"../IntersectorInterfaces.js\";import{VertexArrayObject as a}from\"../VertexArrayObject.js\";import{LodTarget as u}from\"./Intersector.js\";import{BufferObject as m}from\"../../../../webgl/BufferObject.js\";import{Usage as l}from\"../../../../webgl/enums.js\";function f(t,e,r,s=null){const o=t.createBufferWriter(),n=o.vertexBufferLayout,i=o.elementCount(e),a=n.createBuffer(i);return o.write(null,null,e,s,a,0),{material:t,vertexBufferLayout:n,buffer:a.buffer,elementCount:i,boundingInfo:r}}class d{constructor(o,n){const i=o.renderContext.rctx,u=n.geometry;let d=null;d=u instanceof e?f(u.material,u.attributes,u.boundingInfo):u;const c=d.material;this._materials=o.materials,c.setParameters({instancedDoublePrecision:!0}),this.geometry=u,this.material=c,this.glMaterials=new s(c,this._materials),this.vertexBufferLayout=d.vertexBufferLayout,this.vbo=m.createVertex(i,l.STATIC_DRAW,d.buffer),this.vao=new a(i,r,new Map([[\"geometry\",t(d.vertexBufferLayout)]]),new Map([[\"geometry\",this.vbo]])),this.vertexCount=d.elementCount}destroy(){this.glMaterials.dispose(),this.vbo.dispose(),this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}intersect(t,r,s,a,m,l,f,d){if(!(this.geometry instanceof e))return;const c=this.geometry.id;this.material.intersect(this.geometry,t.transform.transform,t,s,a,((e,s,a,p,y)=>{if(e>=0){if(null!=r&&!r(t.rayBegin,t.rayEnd,e))return;const p=new u(l.layerUid,l.graphicUid(m),c,a,f,d);if((null==t.results.min.drapedLayerOrder||y>=t.results.min.drapedLayerOrder)&&(null==t.results.min.dist||e<t.results.min.dist)&&t.results.min.set(n.LOD,p,e,s,t.transform.transform,y),t.options.store!==i.MIN&&(null==t.results.max.drapedLayerOrder||y>=t.results.max.drapedLayerOrder)&&(null==t.results.max.dist||e>t.results.max.dist)&&t.results.max.set(n.LOD,p,e,s,t.transform.transform,y),t.options.store===i.ALL){const r=o(t.results.min.ray);r.set(n.LOD,p,e,s,t.transform.transform,y),t.results.all.push(r)}}}))}}export{d as LodComponentData,f as createLodComponentRenderGeometry};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../core/arrayUtils.js\";import{isAborted as n,throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as r,expandWithVec3 as i,center as s,diameter as c}from\"../../../../../geometry/support/aaBoundingBox.js\";import{LodComponentData as u}from\"./LodComponentData.js\";class a{static async create(e,r,i){const s=await Promise.allSettled(r.components.map((o=>e.controller.schedule((()=>new u(e,o)),i)))),c=s.map((o=>\"fulfilled\"===o.status?o.value:null)).filter(o);if(n(i)||c.length!==s.length){c.forEach((o=>o.destroy())),t(i);for(const o of s)if(\"rejected\"===o.status)throw o.reason}return new a(r.minScreenSpaceRadius,c)}constructor(o,n){this.minScreenSpaceRadius=o,this.components=n}destroy(){this.components.forEach((o=>o.destroy()))}intersect(o,n,t,e,r,i,s){this.components.forEach((c=>c.intersect(o,n,t,e,r,i,this.boundingSphere,s)))}get boundingBox(){if(null==this._boundingBox){const o=r();this.components.forEach((n=>{null!=n.boundingInfo&&(i(o,n.boundingInfo.bbMin),i(o,n.boundingInfo.bbMax))})),this._boundingBox=o}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const o=this.boundingBox,n=e();s(o,n),this._boundingSphere={center:n,radius:.5*c(o)}}return this._boundingSphere}get triangleCount(){return this.components.reduce(((o,n)=>o+n.triangleCount),0)}}export{a as LodLevel};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{encodeDoubleArray as e}from\"../../../../webgl/doublePrecisionUtils.js\";function n(t,e){return null==t&&(t=[]),t.push(e),t}function r(t,e){if(null==t)return null;const n=t.filter((t=>t!==e));return 0===n.length?null:n}function l(t,n,r,l,i){o[0]=t.get(n,0),o[1]=t.get(n,1),o[2]=t.get(n,2),e(o,s,3),r.set(i,0,s[0]),l.set(i,0,s[1]),r.set(i,1,s[2]),l.set(i,1,s[3]),r.set(i,2,s[4]),l.set(i,2,s[5])}const o=t(),s=new Float32Array(6);export{n as addObject3DStateID,l as encodeDoubleVec3,r as removeObject3DStateID};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../../../core/arrayUtils.js\";import r from\"../../../../../core/Error.js\";import{someMap as n}from\"../../../../../core/MapUtils.js\";import{destroyMaybe as a}from\"../../../../../core/maybe.js\";import{isAborted as s,throwIfAborted as i}from\"../../../../../core/promiseUtils.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as l}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as c}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{d as h,f as d,t as u}from\"../../../../../chunks/vec32.js\";import{create as f}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as m,fromValues as p}from\"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{debugFlags as _}from\"../../../support/debugFlags.js\";import{glLayout as g}from\"../../../support/buffer/glUtil.js\";import{newLayout as I}from\"../../../support/buffer/InterleavedLayout.js\";import y from\"../../../webgl/RenderCamera.js\";import{ShaderOutput as C}from\"../../core/shaderLibrary/ShaderOutput.js\";import{AsyncRenderPlugin as v}from\"../../effects/RenderPlugin.js\";import{Default3D as E}from\"../DefaultVertexAttributeLocations.js\";import{IntersectorType as R}from\"../IntersectorInterfaces.js\";import b from\"../Octree.js\";import{RenderSlot as D}from\"../RenderSlot.js\";import{assert as A}from\"../Util.js\";import{VertexAttribute as T}from\"../VertexAttribute.js\";import{InstanceData as L,StateFlags as S}from\"./InstanceData.js\";import{InstanceOctree as O}from\"./InstanceOctree.js\";import{LevelSelector as M}from\"./LevelSelector.js\";import{LodLevel as j}from\"./LodLevel.js\";import{RenderInstanceData as x}from\"./RenderInstanceData.js\";import{colorMixModes as N}from\"../../materials/internal/MaterialUtil.js\";import{encodeDoubleVec3 as w}from\"../../materials/renderers/utils.js\";import{DefaultMaterialDrawParameters as U}from\"../../shaders/DefaultMaterialTechnique.js\";import{TaskPriority as H,noBudget as F}from\"../../../../support/Scheduler.js\";import{bindVertexBufferLayout as V,unbindVertexBufferLayout as B}from\"../../../../webgl/Util.js\";const G=e=>{const t=e.baseBoundingSphere.radius,r=e.levels.map((e=>e.minScreenSpaceRadius));return new M(t,r)};let q=class extends v{constructor(e,t){super(e),this.type=R.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=new Array,this._highlightRenderInstanceDataMap=new Map,this._instanceIndex=0,this._cycleStartIndex=0,this._slicePlane=!1,this._camera=new y,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.produces=new Map([[D.OPAQUE_MATERIAL,e=>this._produces(e)],[D.TRANSPARENT_MATERIAL,e=>!!this._hasTransparentLevels()&&this._produces(e)]]),this._instanceData=new L({shaderTransformation:e.shaderTransformation},e.optionalFields),this.addHandles(t.registerTask(H.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=k(this.optionalFields),this._glInstanceBufferLayout=g(this._instanceBufferLayout,1),this.addHandles([this._instanceData.events.on(\"instances-changed\",(()=>this._requestUpdateCycle())),this._instanceData.events.on(\"instance-transform-changed\",(({index:e})=>{this._requestUpdateCycle(),this.metadata.notifyGraphicGeometryChanged(e)})),this._instanceData.events.on(\"instance-visibility-changed\",(({index:e})=>{this._requestUpdateCycle(!0),this.metadata.notifyGraphicVisibilityChanged(e)})),this._instanceData.events.on(\"instance-highlight-changed\",(()=>this._requestUpdateCycle(!0)))])}get _allRenderInstanceData(){const e=[this._defaultRenderInstanceData];for(const t of this._highlightRenderInstanceDataMap)e.push(t[1]);return e}get _enableLevelSelection(){return this.symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerUid(){return this.metadata.layerUid}get instanceData(){return this._instanceData}get hasEmissions(){return this.baseMaterial.hasEmissions}get usedMemory(){return this._allRenderInstanceData.reduce(((e,t)=>t.reduce(((e,t)=>e+t.usedMemory),e)),0)}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach(((e,r)=>{const n=this._allRenderInstanceData[0][r].size+this._allRenderInstanceData[1][r].size,a=e.triangleCount;t.push({renderedInstances:n,renderedTriangles:n*a,trianglesPerInstance:a})})),{totalInstances:e,renderedInstances:t.reduce(((e,t)=>e+t.renderedInstances),0),renderedTriangles:t.reduce(((e,t)=>e+t.renderedTriangles),0),levels:t}}_createRenderInstanceDataArray(e=[]){const{rctx:t}=this._context.renderContext;return this.symbol.levels.map((r=>{e.push(new x(t,this._instanceBufferLayout))})),e}async initializeRenderContext(e,r){this._context=e,this._createRenderInstanceDataArray(this._defaultRenderInstanceData);const n=await Promise.allSettled(this.symbol.levels.map((t=>j.create(e,t,r)))),a=n.map((e=>\"fulfilled\"===e.status?e.value:null)).filter(t);if(s(r)||a.length!==n.length){a.forEach((e=>e.destroy())),i(r);for(const e of n)if(\"rejected\"===e.status)throw e.reason}this._levels=a,this._levelSelector=G(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach((e=>e.destroy())),this._defaultRenderInstanceData.forEach((e=>e.destroy())),this._highlightRenderInstanceDataMap.forEach((e=>e.forEach((e=>e.destroy()))))}_hasTransparentLevels(){return this._levels.some((e=>e.components.some((e=>{const t=e.material.produces.get(D.TRANSPARENT_MATERIAL);return t?.(C.Color)}))))}hasHighlights(){return n(this._highlightRenderInstanceDataMap,(e=>e.some((e=>e.size>0))))}_produces(e){return e!==C.Highlight&&e!==C.ShadowHighlight||this.hasHighlights()}prepareRender(e){if(!_.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const t=e.bind.contentCamera.equals(this._camera);this._camera.copyFrom(e.bind.contentCamera),t||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(F),this._needFullCycle=!1)}}acquireTechniques(e){if(!this.baseMaterial.visible||!this.baseMaterial.isVisibleForOutput(e.output))return null;const t=this._getInstanceDatas(e);if(!t)return null;const r=new Array,n=this.levels;return t.forEach((t=>n.forEach((({components:n},a)=>n.forEach((n=>r.push(this._beginComponent(e,t[a],n)))))))),r}render(e,t){const r=this._getInstanceDatas(e);if(!r||null==t)return;let n=0;e.rctx.bindVAO();const a=this.levels;r.forEach((r=>a.forEach((({components:a},s)=>a.forEach((a=>this._renderComponent(e,t[n++],r[s],a,s)))))))}_getInstanceDatas(e){const{output:t,bind:r}=e,n=t===C.Highlight,a=!n&&t!==C.ShadowHighlight,s=t!==C.ShadowExcludeHighlight;if(a)return s?this._allRenderInstanceData:[this._defaultRenderInstanceData];if(s){if(n){const{highlightGroupName:e}=r;if(!e)return null;const t=this._highlightRenderInstanceDataMap.get(e);return t?[t]:null}const e=[];for(const t of this._highlightRenderInstanceDataMap)e.push(t[1]);return e}return null}intersect(e,t,r,n){if(!this.baseMaterial.visible||null==this._octree)return;const a=f();h(a,n,r);const s=a=>{this._instanceData.getCombinedModelTransform(a,Y),e.transform.set(Y),u(J,r,e.transform.inverse),u(Q,n,e.transform.inverse);const s=this._instanceData.getState(a),i=this._instanceData.getLodLevel(a),o=this._levels.length;A(!!(s&S.ACTIVE),\"invalid instance state\"),A(i>=0&&i<o,\"invaid lod level\"),this._levels[i].intersect(e,t,J,Q,a,this.metadata,o)};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(s):this._octree.forEachAlongRay(r,a,s)}notifyShaderTransformationChanged(){this._invalidateOctree(),this._requestUpdateCycle()}get _octree(){if(null==this._octreeCached){const e=this._instanceData,t=e.view?.state;if(!t)return null;this._octreeCached=new O(e,this.baseBoundingSphere);for(let r=0;r<e.capacity;++r)t.get(r)&S.ACTIVE&&this._octreeCached.addInstance(r)}return this._octreeCached}_invalidateOctree(){this._octreeCached=a(this._octreeCached)}queryDepthRange(e){if(null==this._octree)return{near:1/0,far:-1/0};const t=e.viewForward,r=this._octree.findClosest(t,b.DepthOrder.FRONT_TO_BACK,e.frustum),n=this._octree.findClosest(t,b.DepthOrder.BACK_TO_FRONT,e.frustum);if(null==r||null==n)return{near:1/0,far:-1/0};const a=e.eye,s=this._instanceData.view;s.boundingSphere.getVec(r,K),h(K,K,a);const i=d(K,t)-K[3];s.boundingSphere.getVec(n,K),h(K,K,a);const o=d(K,t)+K[3];return{near:Math.max(e.near,i),far:Math.min(e.far,o)}}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,this._cycleStartIndex=this._instanceIndex,e&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.startUpdateCycle()))))}get running(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}runTask(e){const{_enableLevelSelection:t,_camera:n,_levelSelector:a}=this;this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.beginUpdate()))));const s=this._instanceData,i=s.view;let o=s.size;const l=s.capacity;let c=this._instanceIndex;const h=Math.ceil(l/500);for(let d=0;d<o&&!e.done;++d){c===this._cycleStartIndex&&this._startUpdateCycle();const d=i.state.get(c);let u=0;if(!(d&S.ALLOCATED)){c=c+1===l?0:c+1,o++;continue}const f=i.lodLevel.get(c);if(d&S.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[f].freeTail(),d&S.HIGHLIGHT_ACTIVE&&s.foreachHighlightGroupPrev(c,(e=>{const t=this._highlightRenderInstanceDataMap.get(e);if(!t)throw new r(\"Internal error in lodRenderer\");t[f].freeTail()})),d&S.REMOVE)s.freeInstance(c);else if(d&S.VISIBLE){let e=0;t&&(i.modelOrigin.getVec(c,W),e=a.selectLevel(W,s.getCombinedMedianScaleFactor(c),n)),u=d&~(S.ACTIVE|S.TRANSFORM_CHANGED),e>=0&&(d&S.HIGHLIGHT?(s.foreachHighlightGroup(c,(t=>{let n=this._highlightRenderInstanceDataMap.get(t);if(n||(n=this._createRenderInstanceDataArray(),n.forEach((e=>e.beginUpdate())),this._highlightRenderInstanceDataMap.set(t,n)),e>=n.length)throw new r(`LodRenderer internal error - missing lodLevel ${e}`);P(n[e],i,c)})),u|=S.HIGHLIGHT_ACTIVE):(P(this._defaultRenderInstanceData[e],i,c),u|=S.DEFAULT_ACTIVE)),i.state.set(c,u),i.lodLevel.set(c,e)}else u=d&~(S.ACTIVE|S.TRANSFORM_CHANGED),i.state.set(c,u);if(null!=this._octreeCached){const e=!!(d&S.ACTIVE),t=!!(u&S.ACTIVE);!e&&t?this._octreeCached.addInstance(c):e&&!t?this._octreeCached.removeInstance(c):e&&t&&d&S.TRANSFORM_CHANGED&&(this._octreeCached.removeInstance(c),this._octreeCached.addInstance(c))}c=c+1===l?0:c+1,c%h==0&&e.madeProgress()}this._instanceIndex=c,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.endUpdate())))),this._context.requestRender()}_beginComponent(e,t,r){if(0===t.size)return null;const n=r.glMaterials.load(e.rctx,e.bind.slot,e.output);return n?.beginSlot(e.bind)}_renderComponent(e,t,r,n,a){if(!t)return;const{bind:s,rctx:i}=e;i.runAppleAmdDriverHelper();const o=i.bindTechnique(t,s,n.material.parameters,$);i.bindVAO(n.vao),t.ensureAttributeLocations(n.vao),_.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&e.output===C.Color&&(o.setUniform4fv(\"externalColor\",Z[Math.min(a,Z.length-1)]),o.setUniform1i(\"colorMixMode\",N.replace));const l=r.capacity,c=r.headIndex,h=r.tailIndex,d=r.firstIndex,u=this._glInstanceBufferLayout,f=(e,a)=>{V(i,E,r.buffer,u,e),i.drawArraysInstanced(t.primitiveType,0,n.vertexCount,a-e),B(i,E,r.buffer,u)};n.material.parameters.transparent&&null!=d?c>h?(A(d>=h&&d<=c,\"invalid firstIndex\"),f(d,c),f(h,d)):c<h&&(d<=c?(A(d>=0&&d<=c,\"invalid firstIndex\"),f(d,c),f(h,l),f(0,d)):(A(d>=h&&d<=l,\"invalid firstIndex\"),f(d,l),f(0,c),f(h,d))):c>h?f(h,c):c<h&&(f(0,c),f(h,l)),i.bindVAO(null)}};function P(e,t,r){const n=e.allocateHead();z(t,r,e.view,n)}function z(e,t,r,n){w(e.modelOrigin,t,r.modelOriginHi,r.modelOriginLo,n),r.model.copyFrom(n,e.model,t),r.modelNormal.copyFrom(n,e.modelNormal,t),e.color&&r.color&&r.color.copyFrom(n,e.color,t),e.objectAndLayerIdColor&&r.objectAndLayerIdColor&&r.objectAndLayerIdColor.copyFrom(n,e.objectAndLayerIdColor,t),e.featureAttribute&&r.featureAttribute&&r.featureAttribute.copyFrom(n,e.featureAttribute,t)}function k(e){let t=I().vec3f(T.INSTANCEMODELORIGINHI).vec3f(T.INSTANCEMODELORIGINLO).mat3f(T.INSTANCEMODEL).mat3f(T.INSTANCEMODELNORMAL);return null!=e&&e.includes(\"featureAttribute\")&&(t=t.vec4f(T.INSTANCEFEATUREATTRIBUTE)),null!=e&&e.includes(\"color\")&&(t=t.vec4u8(T.INSTANCECOLOR)),null!=e&&e.includes(\"objectAndLayerIdColor\")&&(t=t.vec4u8(T.INSTANCEOBJECTANDLAYERIDCOLOR)),t}e([o({constructOnly:!0})],q.prototype,\"symbol\",void 0),e([o({constructOnly:!0})],q.prototype,\"optionalFields\",void 0),e([o({constructOnly:!0})],q.prototype,\"metadata\",void 0),e([o({constructOnly:!0})],q.prototype,\"shaderTransformation\",void 0),e([o()],q.prototype,\"_instanceData\",void 0),e([o()],q.prototype,\"_cycleStartIndex\",void 0),e([o({readOnly:!0})],q.prototype,\"_enableLevelSelection\",null),e([o()],q.prototype,\"_updateCyclesWithStaticCamera\",void 0),e([o({readOnly:!0})],q.prototype,\"running\",null),q=e([l(\"esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer\")],q);const W=f(),K=m(),Y=c(),J=f(),Q=f(),Z=[p(1,0,1,1),p(0,0,1,1),p(0,1,0,1),p(1,1,0,1),p(1,0,0,1)],$=new U;export{q as LodRenderer};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{unique as e}from\"../../../../../core/arrayUtils.js\";import{ContentObject as t}from\"../ContentObject.js\";import{VertexAttribute as r}from\"../VertexAttribute.js\";class n{constructor(e,t=null){this.geometry=e,this.textures=t}get material(){return this.geometry.material}get numTriangles(){return this.geometry instanceof t?this.geometry.indexCount/3:this.geometry.elementCount/3}}function s(e){return e instanceof t?e.attributes.get(r.POSITION).indices.length:e.elementCount}class o{constructor(t,r,n){this.components=t,this.minScreenSpaceRadius=r,this.pivotOffset=n;const o=e(this.components.map((e=>e.geometry)));this.numVertices=o.reduce(((e,t)=>e+s(t)),0)}}class c{constructor(e){this.levels=e,this.levels.sort(((e,t)=>e.minScreenSpaceRadius===t.minScreenSpaceRadius?e.numVertices-t.numVertices:e.minScreenSpaceRadius-t.minScreenSpaceRadius))}}function i(t){const r=[];return t.levels.forEach((e=>e.components.forEach((e=>r.push(e.geometry.material))))),e(r)}function u(t){const r=new Array;return t.levels.forEach((e=>e.components.forEach((e=>{null!=e.textures&&r.push(...e.textures)})))),e(r)}function a(r){const n=new Array;return r.levels.forEach((e=>e.components.forEach((e=>{e.geometry instanceof t&&n.push(e.geometry)})))),e(n)}export{n as LodComponentResources,o as LodLevelResources,c as LodResources,a as geometriesFromLodResources,i as materialsFromLodResources,u as texturesFromLodResources};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import has from\"../../../../../../core/has.js\";import{throwIfAborted as r}from\"../../../../../../core/promiseUtils.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{VertexAttribute as n}from\"../../../../webgl-engine/lib/VertexAttribute.js\";import{LodRenderer as t}from\"../../../../webgl-engine/lib/lodRendering/LodRenderer.js\";import{materialsFromLodResources as o,texturesFromLodResources as a,LodComponentResources as i,LodLevelResources as d,LodResources as l}from\"../../../../webgl-engine/lib/lodRendering/LodResources.js\";let c=class{constructor(e){this._optionalFields=new Array,this._instanceIndexToFeatureId=new Map,this._featureIdToInstanceIndex=new Map,this._disposeResourceHandles=new Array,this._lodRendererResources=null,this.layerUid=e.layerUid,this.view=e.view,this.sharedResources=this.view.sharedSymbolResources,this.scheduler=this.view.resourceController.scheduler}async doLoad(e,s,t){has(\"enable-feature:objectAndLayerId-rendering\")&&this._optionalFields.push(n.OBJECTANDLAYERIDCOLOR);const i=u((e=>s(e)),e),d=this.view._stage,l=o(i);d.addMany(l),this._addDisposeResource((()=>d.removeMany(l)));const c=a(i);d.addMany(c),this._addDisposeResource((()=>{c.forEach((e=>e.unload())),d.removeMany(c)})),await Promise.all(c.map((e=>this.view._stage.schedule((()=>e.load(d.renderView.renderingContext)),t)))),r(t);const h=await this._createLodRenderer(i,t);this._lodRendererResources={lodRenderer:h,materials:l,textures:c}}addInstances(e){const r=this._lodRendererResources;if(null==r)return;const{featureIds:s,localTransforms:n,globalTransforms:t}=e,o=r.lodRenderer;if(null==o)return;const a=o.instanceData,i=s.length;for(let d=0;d<i;++d){const e=s[d],r=a.addInstance(),o=a.view,i=16*d;o.localTransform.copyFromTypedBuffer(r,n,i),o.globalTransform.copyFromTypedBuffer(r,t,i),a.updateModelTransform(r),a.setVisible(r,!0),this._instanceIndexToFeatureId.set(r,e),this._featureIdToInstanceIndex.set(e,r)}}removeInstances(e){const r=this._lodRendererResources;if(null==r)return;const s=r?.lodRenderer,n=s.instanceData,t=this._instanceIndexToFeatureId,o=this._featureIdToInstanceIndex,a=e.length;for(let i=0;i<a;++i){const r=e[i],s=o.get(r);null!=s&&(n.removeInstance(s),t.delete(s),o.delete(r))}}_addDisposeResource(e){this._disposeResourceHandles.push(e)}async _createLodRenderer(e,r){const s=this.view._stage,n={layerUid:this.layerUid,graphicUid:e=>1,notifyGraphicGeometryChanged:e=>1,notifyGraphicVisibilityChanged:e=>1},o=new t({symbol:e,optionalFields:this._optionalFields,metadata:n,shaderTransformation:null},this.scheduler);return o.slicePlaneEnabled=!1,this._addDisposeResource((()=>{s.removeRenderPlugin(o),o.destroy()})),await s.addRenderPlugin(o,r),o}};function u(e,r){const s=r.levels.map((r=>{const s=r.components.map((r=>{const s=e(r.materialId);if(!h(s))throw new Error(\"LodRenderer only supports DefaultMaterial\");const n=s.createBufferWriter(),t={material:s,vertexBufferLayout:n.vertexBufferLayout,buffer:r.renderGeometryBuffer.data,elementCount:r.renderGeometryBuffer.elementCount,boundingInfo:r.boundingInfo};return new i(t)}));return new d(s,r.minScreenSpaceRadius)}));return new l(s)}function h(e){return null!=e&&\"materialType\"in e&&\"default\"===e.materialType}c=e([s(\"esri.views.3d.layers.graphics.pipeline.rendering.LodRenderer\")],c);export{c as LodRenderer,h as isDefaultMaterial};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{packFloatRGBA as t}from\"../../../../core/floatRGBA.js\";import{Texture as r}from\"../../webgl-engine/lib/Texture.js\";import{TextureWrapMode as n}from\"../../../webgl/enums.js\";const e=128,o=.5;function a(t){return\"cross\"===t||\"x\"===t}function u(t,a=e,u=a*o,s=0){const i=c(t,a,u,s);return new r(i,{mipmap:!1,wrap:{s:n.CLAMP_TO_EDGE,t:n.CLAMP_TO_EDGE},width:a,height:a,components:4,noUnpackFlip:!0,reloadable:!0})}function c(t,r=e,n=r*o,a=0){switch(t){case\"circle\":default:return s(r,n);case\"square\":return i(r,n);case\"cross\":return h(r,n,a);case\"x\":return M(r,n,a);case\"kite\":return f(r,n);case\"triangle\":return l(r,n);case\"arrow\":return m(r,n)}}function s(t,r){const n=t/2-.5;return x(t,T(n,n,r/2))}function i(t,r){return p(t,r,!1)}function f(t,r){return p(t,r,!0)}function h(t,r,n=0){return b(t,r,!1,n)}function M(t,r,n=0){return b(t,r,!0,n)}function l(t,r){return x(t,w(t/2,r,r/2))}function m(t,r){const n=r,e=r/2,o=t/2,a=.8*n,u=T(o,(t-r)/2-a,Math.sqrt(a*a+e*e)),c=w(o,n,e);return x(t,((t,r)=>Math.max(c(t,r),-u(t,r))))}function p(t,r,n){return n&&(r/=Math.SQRT2),x(t,((e,o)=>{let a=e-.5*t+.25,u=.5*t-o-.75;if(n){const t=(a+u)/Math.SQRT2;u=(u-a)/Math.SQRT2,a=t}return Math.max(Math.abs(a),Math.abs(u))-.5*r}))}function b(t,r,n,e=0){r-=e,n&&(r*=Math.SQRT2);const o=.5*r;return x(t,((r,a)=>{let u,c=r-.5*t,s=.5*t-a-1;if(n){const t=(c+s)/Math.SQRT2;s=(s-c)/Math.SQRT2,c=t}return c=Math.abs(c),s=Math.abs(s),u=c>s?c>o?Math.sqrt((c-o)*(c-o)+s*s):s:s>o?Math.sqrt(c*c+(s-o)*(s-o)):c,u-=e/2,u}))}function T(t,r,n){return(e,o)=>{const a=e-t,u=o-r;return Math.sqrt(a*a+u*u)-n}}function w(t,r,n){const e=Math.sqrt(r*r+n*n);return(o,a)=>{const u=Math.abs(o-t)-n,c=a-t+r/2+.75,s=(r*u+n*c)/e,i=-c;return Math.max(s,i)}}function x(r,n){const e=new Uint8Array(4*r*r);for(let o=0;o<r;o++)for(let a=0;a<r;a++){const u=a+r*o;let c=n(a,o);c=c/r+.5,t(c,e,4*u)}return e}export{m as createArrow,s as createCircle,h as createCross,f as createKite,c as createPrimitive,i as createSquare,u as createTexture,l as createTriangle,M as createX,o as defaultSymbolSizeRatio,e as defaultTexSize,a as requiresHalfTexelOffset};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction n(n){return n instanceof Float32Array&&n.length>=16}function r(n){return Array.isArray(n)&&n.length>=16}function t(t){return n(t)||r(t)}export{t as isMat4,n as isMat4f32,r as isMat4f64};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(){this.factor=new c,this.factorAlignment=new c}}class c{constructor(){this.scale=0,this.factor=0,this.minScaleFactor=0}}export{c as ScaleFactor,t as ScaleInfo};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../core/shaderTechnique/ShaderTechnique.js\";import{OITPass as t}from\"../lib/OITPass.js\";import{oitBlending as s,getDrawBuffers as i}from\"../lib/OrderIndependentTransparency.js\";import{H as l}from\"../../../../chunks/HUDMaterial.glsl.js\";import{PrimitiveType as n,CompareFunction as a}from\"../../../webgl/enums.js\";import{defaultDepthWrite as p,makePipelineState as d,blendWithPremultipliedAlpha as u,defaultColorWrite as m}from\"../../../webgl/renderState.js\";class c extends o{constructor(e,o,t){super(e,o,new r(l,(()=>import(\"./HUDMaterial.glsl.js\"))),t),this.primitiveType=o.occlusionPass?n.POINTS:n.TRIANGLES}initializePipeline(r){const{oitPass:o,hasPolygonOffset:l,draped:n,output:c,depthTestEnabled:f}=r,T=o===t.NONE,g=l?h:null,j=o===t.ColorAlpha,b=n||!f||j||c===e.Highlight?null:p;return d({blending:c===e.Color?T?u:s(o):null,depthTest:f&&!n?{func:a.LEQUAL}:null,depthWrite:b,drawBuffers:i(o,c),colorWrite:m,polygonOffset:g})}}const h={factor:0,units:-4};export{c as HUDMaterialTechnique};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as t}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as s}from\"../materials/DefaultTechniqueConfiguration.js\";class r extends s{constructor(e){super(),this.spherical=e,this.screenCenterOffsetUnitsEnabled=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.hasRotation=!1,this.debugDrawLabelBorder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.depthTestEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.occludedFragmentFade=!1,this.objectAndLayerIdColorInstanced=!1,this.horizonCullingEnabled=!0,this.textureCoordinateType=t.None,this.emissionSource=o.None,this.discardInvisibleFragments=!0,this.hasSliceInVertexProgram=!0,this.hasVvInstancing=!1}}e([i()],r.prototype,\"screenCenterOffsetUnitsEnabled\",void 0),e([i()],r.prototype,\"occlusionTestEnabled\",void 0),e([i()],r.prototype,\"signedDistanceFieldEnabled\",void 0),e([i()],r.prototype,\"sampleSignedDistanceFieldTexelCenter\",void 0),e([i()],r.prototype,\"vvSize\",void 0),e([i()],r.prototype,\"vvColor\",void 0),e([i()],r.prototype,\"hasVerticalOffset\",void 0),e([i()],r.prototype,\"hasScreenSizePerspective\",void 0),e([i()],r.prototype,\"hasRotation\",void 0),e([i()],r.prototype,\"debugDrawLabelBorder\",void 0),e([i()],r.prototype,\"hasSlicePlane\",void 0),e([i()],r.prototype,\"hasPolygonOffset\",void 0),e([i()],r.prototype,\"depthTestEnabled\",void 0),e([i()],r.prototype,\"pixelSnappingEnabled\",void 0),e([i()],r.prototype,\"draped\",void 0),e([i()],r.prototype,\"terrainDepthTest\",void 0),e([i()],r.prototype,\"cullAboveTerrain\",void 0),e([i()],r.prototype,\"occlusionPass\",void 0),e([i()],r.prototype,\"occludedFragmentFade\",void 0),e([i()],r.prototype,\"objectAndLayerIdColorInstanced\",void 0),e([i()],r.prototype,\"horizonCullingEnabled\",void 0);export{r as HUDMaterialTechniqueConfiguration};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as e,deg2rad as t}from\"../../../../core/mathUtils.js\";import{fromMat4 as s}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as r}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as o,rotate as n}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as c,fromValues as l}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{i as f,t as h,n as p,d as m,h as u,c as d,l as g,j as S,g as O,q as T,f as b}from\"../../../../chunks/vec32.js\";import{create as v,fromValues as A}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromArray as E,create as I,freeze as _}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isMat4 as R}from\"../../../../core/libs/gl-matrix-2/types/mat4.js\";import{create as C}from\"../../../../geometry/support/aaBoundingRect.js\";import{BufferViewVec4u8 as x}from\"../../../../geometry/support/buffer/BufferView.js\";import{evaluateModelTransformScale as P}from\"../../layers/support/FastSymbolUpdates.js\";import{debugFlags as y}from\"../../support/debugFlags.js\";import{newLayout as D}from\"../../support/buffer/InterleavedLayout.js\";import{isColorHighlightOrOID as j,ShaderOutput as F}from\"../core/shaderLibrary/ShaderOutput.js\";import{HUDVerticalPixelOffset as N}from\"../core/shaderLibrary/hud/HUD.glsl.js\";import{alphaCutoff as z}from\"../core/shaderLibrary/util/AlphaCutoff.js\";import{olidEnabled as L}from\"../effects/geometry/olidUtils.js\";import{GLTextureMaterial as U,GLTextureMaterialBindParameters as M}from\"../lib/GLTextureMaterial.js\";import{Material as w,RenderOccludedFlag as V}from\"../lib/Material.js\";import{RenderSlot as B}from\"../lib/RenderSlot.js\";import{applyScaleFactor as q,applyPrecomputedScaleFactor as G,precomputeScaleFactor as H}from\"../lib/screenSizePerspectiveUtils.js\";import{assert as W}from\"../lib/Util.js\";import{VertexAttribute as X}from\"../lib/VertexAttribute.js\";import{ScaleInfo as Y}from\"./ScaleInfo.js\";import{writePosition as Z,writeNormal as k,writeColor as J,writeBufferFloat as K,writeBufferVec4 as Q,writeBufferVec4Zeros as $,writeObjectAndLayerIdColor as ee}from\"./internal/bufferWriterUtils.js\";import{verticalOffsetAtDistance as te}from\"./internal/MaterialUtil.js\";import{c as se}from\"../../../../chunks/HUDMaterial.glsl.js\";import{HUDMaterialTechnique as ie}from\"../shaders/HUDMaterialTechnique.js\";import{HUDMaterialTechniqueConfiguration as re}from\"../shaders/HUDMaterialTechniqueConfiguration.js\";class ae extends w{constructor(e,t){super(e,ye),this.produces=new Map([[B.HUD_MATERIAL,e=>j(e)&&!this.parameters.drawInSecondSlot],[B.LABEL_MATERIAL,e=>j(e)&&this.parameters.drawInSecondSlot],[B.OCCLUSION_PIXELS,()=>this.parameters.occlusionTest],[B.DRAPED_MATERIAL,e=>this.parameters.draped&&j(e)]]),this._visible=!0,this._configuration=new re(t)}getConfiguration(e,t){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled=\"screen\"===this.parameters.centerOffsetUnits,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=this.parameters.draped,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.hasRotation=this.parameters.hasRotation,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===B.OCCLUSION_PIXELS,this._configuration.occludedFragmentFade=this.parameters.occludedFragmentFade,this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled,this._configuration.depthTestEnabled=this.parameters.depthEnabled||t.slot===B.OCCLUSION_PIXELS,e===F.Color&&(this._configuration.debugDrawLabelBorder=!!y.LABELS_SHOW_BORDER),this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}intersect(e,t,i,a,o,n){const{options:{selectionMode:c,hud:l,excludeLabels:O},point:T,camera:b}=i,{parameters:A}=this;if(!c||!l||O&&A.isLabel||!e.visible||!T)return;const{scaleX:E,scaleY:I}=this._getScreenScale(e,b.pixelRatio);s(Te,t),e.attributes.has(X.FEATUREATTRIBUTE)&&le(Te);const _=e.attributes.get(X.POSITION),R=e.attributes.get(X.SIZE),C=e.attributes.get(X.NORMAL),x=e.attributes.get(X.ROTATION),P=e.attributes.get(X.CENTEROFFSETANDDISTANCE);W(_.size>=3);const y=se(A),D=\"screen\"===this.parameters.centerOffsetUnits;for(let s=0;s<_.data.length/_.size;s++){const e=s*_.size;f(pe,_.data[e],_.data[e+1],_.data[e+2]),h(pe,pe,t),h(pe,pe,b.viewMatrix);const a=s*P.size;if(f(Ae,P.data[a],P.data[a+1],P.data[a+2]),!D&&(pe[0]+=Ae[0],pe[1]+=Ae[1],0!==Ae[2])){const e=Ae[2];p(Ae,pe),m(pe,pe,u(Ae,Ae,e))}const o=s*C.size;if(f(me,C.data[o],C.data[o+1],C.data[o+2]),ce(me,Te,b,_e),this._applyVerticalOffsetTransformationView(pe,_e,b,he),b.applyProjection(pe,ue),ue[0]>-1){D&&(Ae[0]||Ae[1])&&(ue[0]+=Ae[0]*b.pixelRatio,0!==Ae[1]&&(ue[1]+=q(Ae[1],he.factorAlignment)*b.pixelRatio),b.unapplyProjection(ue,pe)),ue[0]+=this.parameters.screenOffset[0]*b.pixelRatio,ue[1]+=this.parameters.screenOffset[1]*b.pixelRatio,ue[0]=Math.floor(ue[0]),ue[1]=Math.floor(ue[1]);const e=s*R.size;xe[0]=R.data[e],xe[1]=R.data[e+1],G(xe,he.factor,xe);const t=Re*b.pixelRatio;let a=0;if(A.textureIsSignedDistanceField){a=Math.min(A.outlineSize,.5*xe[0])*b.pixelRatio/2}xe[0]*=E,xe[1]*=I;const o=s*x.size,c=A.rotation+x.data[o];if(fe(T,ue[0],ue[1],xe,t,a,c,A,y)){const e=i.ray;if(h(ge,pe,r(ve,b.viewMatrix)),ue[0]=T[0],ue[1]=T[1],b.unprojectFromRenderScreen(ue,pe)){const t=v();d(t,e.direction);const s=1/g(t);u(t,t,s);n(S(e.origin,pe)*s,t,-1,!0,1,ge)}}}}}intersectDraped(e,t,s,i,r,a){const o=e.attributes.get(X.POSITION),n=e.attributes.get(X.SIZE),c=e.attributes.get(X.ROTATION),l=this.parameters,f=se(l),{scaleX:h,scaleY:p}=this._getScreenScale(e,e.screenToWorldRatio),m=Ce*e.screenToWorldRatio;for(let u=0;u<o.data.length/o.size;u++){const t=u*o.size,s=o.data[t],d=o.data[t+1],g=u*n.size;xe[0]=n.data[g],xe[1]=n.data[g+1];let S=0;if(l.textureIsSignedDistanceField){S=Math.min(l.outlineSize,.5*xe[0])*e.screenToWorldRatio/2}xe[0]*=h,xe[1]*=p;const O=u*c.size,T=l.rotation+c.data[O];fe(i,s,d,xe,m,S,T,l,f)&&r(a.dist,a.normal,-1,!1)}}createBufferWriter(){return new Fe}_updateScaleInfo(e,t,s){const i=this.parameters;null!=i.screenSizePerspective?H(s,t,i.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minScaleFactor=0),null!=i.screenSizePerspectiveAlignment?H(s,t,i.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minScaleFactor=e.factor.minScaleFactor)}applyShaderOffsetsView(e,t,s,i,r,a,o){const n=ce(t,s,r,_e);return this._applyVerticalGroundOffsetView(e,n,r,o),this._applyVerticalOffsetTransformationView(o,n,r,a),this._applyPolygonOffsetView(o,n,i[3],r,o),this._applyCenterOffsetView(o,i,o),o}applyShaderOffsetsNDC(e,t,s,i,r){return this._applyCenterOffsetNDC(e,t,s,i),null!=r&&d(r,i),this._applyPolygonOffsetNDC(i,t,s,i),i}_applyPolygonOffsetView(t,s,i,r,a){const o=r.aboveGround?1:-1;let n=Math.sign(i);0===n&&(n=o);const c=o*n;if(this.parameters.shaderPolygonOffset<=0)return d(a,t);const l=e(Math.abs(s.cosAngle),.01,1),f=1-Math.sqrt(1-l*l)/l/r.viewport[2];return u(a,t,c>0?f:1/f),a}_applyVerticalGroundOffsetView(e,t,s,i){const r=g(e),a=s.aboveGround?1:-1,o=s.computeRenderPixelSizeAtDist(r)*N,n=u(pe,t.normal,a*o);return O(i,e,n),i}_applyVerticalOffsetTransformationView(e,t,s,i){const r=this.parameters;if(!r.verticalOffset?.screenLength){if(r.screenSizePerspective||r.screenSizePerspectiveAlignment){const s=g(e);this._updateScaleInfo(i,s,t.cosAngle)}else i.factor.scale=1,i.factorAlignment.scale=1;return e}const a=g(e),o=r.screenSizePerspectiveAlignment??r.screenSizePerspective,n=te(s,a,r.verticalOffset,t.cosAngle,o);return this._updateScaleInfo(i,a,t.cosAngle),u(t.normal,t.normal,n),O(e,e,t.normal)}_applyCenterOffsetView(e,t,s){const i=\"screen\"!==this.parameters.centerOffsetUnits;return s!==e&&d(s,e),i&&(s[0]+=t[0],s[1]+=t[1],t[2]&&(p(me,s),O(s,s,u(me,me,t[2])))),s}_applyCenterOffsetNDC(e,t,s,i){const r=\"screen\"!==this.parameters.centerOffsetUnits;return i!==e&&d(i,e),r||(i[0]+=t[0]/s.fullWidth*2,i[1]+=t[1]/s.fullHeight*2),i}_applyPolygonOffsetNDC(e,t,s,i){const r=this.parameters.shaderPolygonOffset;if(e!==i&&d(i,e),r){const e=s.aboveGround?1:-1,a=e*Math.sign(t[3]);i[2]-=(a||e)*r}return i}set visible(e){this._visible=e}get visible(){const{color:e,outlineSize:t,outlineColor:s}=this.parameters,i=e[3]>=z||t>=z&&s[3]>=z;return this._visible&&i}createGLMaterial(e){return new oe(e)}calculateRelativeScreenBounds(e,t,s=C()){return ne(this.parameters,e,t,s),s[2]=s[0]+e[0],s[3]=s[1]+e[1],s}_getScreenScale(e,t){const s=e.attributes.get(X.FEATUREATTRIBUTE);if(null==s)return{scaleX:t,scaleY:t};const i=E(s.data,Ie);return P(Ee,this.parameters,i),{scaleX:Ee[0]*t,scaleY:Ee[1]*t}}}class oe extends U{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.acquireTechnique(ie,e)}}function ne(e,t,s,i){i[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*s,i[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*s}function ce(e,t,i,r){return R(t)&&(t=s(be,t)),T(r.normal,e,t),h(r.normal,r.normal,i.viewInverseTransposeMatrix),r.cosAngle=b(de,Pe),r}function le(e){const t=e[0],s=e[1],i=e[2],r=e[3],a=e[4],o=e[5],n=e[6],c=e[7],l=e[8],f=1/Math.sqrt(t*t+s*s+i*i),h=1/Math.sqrt(r*r+a*a+o*o),p=1/Math.sqrt(n*n+c*c+l*l);return e[0]=t*f,e[1]=s*f,e[2]=i*f,e[3]=r*h,e[4]=a*h,e[5]=o*h,e[6]=n*p,e[7]=c*p,e[8]=l*p,e}function fe(e,s,i,r,a,c,l,f,h){let p=s-a-r[0]*h[0],m=p+r[0]+2*a,u=i-a-r[1]*h[1],d=u+r[1]+2*a;const g=f.distanceFieldBoundingBox;return f.textureIsSignedDistanceField&&null!=g&&(p+=r[0]*g[0],u+=r[1]*g[1],m-=r[0]*(1-g[2]),d-=r[1]*(1-g[3]),p-=c,m+=c,u-=c,d+=c),o(Oe,s,i),n(Se,e,Oe,t(l)),Se[0]>p&&Se[0]<m&&Se[1]>u&&Se[1]<d}const he=new Y,pe=v(),me=v(),ue=I(),de=v(),ge=v(),Se=c(),Oe=c(),Te=i(),be=i(),ve=a(),Ae=v(),Ee=v(),Ie=I(),_e={normal:de,cosAngle:0},Re=1,Ce=2,xe=[0,0],Pe=A(0,0,1);class ye extends M{constructor(){super(...arguments),this.renderOccluded=V.Occlude,this.isDecoration=!1,this.color=_(1,1,1,1),this.polygonOffset=!1,this.anchorPosition=l(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=_(1,1,1,1),this.outlineSize=0,this.rotation=0,this.hasRotation=!1,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!1,this.centerOffsetUnits=\"world\",this.drawInSecondSlot=!1,this.depthEnabled=!0,this.draped=!1,this.isLabel=!1}}const De=D().vec3f(X.POSITION).vec3f(X.NORMAL).vec2f(X.UV0).vec4u8(X.COLOR).vec2f(X.SIZE).f32(X.ROTATION).vec4f(X.CENTEROFFSETANDDISTANCE).vec4f(X.FEATUREATTRIBUTE),je=De.clone().vec4u8(X.OBJECTANDLAYERIDCOLOR);class Fe{constructor(){this.vertexBufferLayout=L()?je:De}elementCount(e){return 6*e.get(X.POSITION).indices.length}write(e,t,s,i,r,a){Z(s.get(X.POSITION),e,r.position,a,6),k(s.get(X.NORMAL),t,r.normal,a,6);const o=s.get(X.UV0)?.data;let n=0,c=0,l=1,f=1;o&&o.length>=4&&(n=o[0],c=o[1],l=o[2],f=o[3]),l=Math.min(1.99999,l+1),f=Math.min(1.99999,f+1);let h=s.get(X.POSITION).indices.length,p=a;const m=r.uv0;for(let S=0;S<h;++S)m.set(p,0,n),m.set(p,1,c),p++,m.set(p,0,l),m.set(p,1,c),p++,m.set(p,0,l),m.set(p,1,f),p++,m.set(p,0,l),m.set(p,1,f),p++,m.set(p,0,n),m.set(p,1,f),p++,m.set(p,0,n),m.set(p,1,c),p++;J(s.get(X.COLOR),4,r.color,a,6);const{data:u,indices:d}=s.get(X.SIZE);h=d.length;const g=r.size;p=a;for(let S=0;S<h;++S){const e=u[2*d[S]],t=u[2*d[S]+1];for(let s=0;s<6;++s)g.set(p,0,e),g.set(p,1,t),p++}if(K(s.get(X.ROTATION),r.rotation,a,6),s.get(X.CENTEROFFSETANDDISTANCE)?Q(s.get(X.CENTEROFFSETANDDISTANCE),r.centerOffsetAndDistance,a,6):$(r.centerOffsetAndDistance,a,6*h),s.get(X.FEATUREATTRIBUTE)?Q(s.get(X.FEATUREATTRIBUTE),r.featureAttribute,a,6):$(r.featureAttribute,a,6*h),null!=i){const e=s.get(X.POSITION)?.indices;if(e){const t=e.length,s=r.getField(X.OBJECTANDLAYERIDCOLOR,x);ee(i,s,t,a,6)}}}}export{ae as HUDMaterial,ye as Parameters};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import{makeHandle as t}from\"../../../../../../core/handleUtils.js\";import{releaseMaybe as i}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{ONES as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ViewingMode as o}from\"../../../../../ViewingMode.js\";import{namedAnchorToHUDMaterialAnchorPos as d}from\"../../placementUtils.js\";import{DirectRenderer as c}from\"./DirectRenderer.js\";import{LodRenderer as l}from\"./LodRenderer.js\";import{createTexture as m,requiresHalfTexelOffset as u,defaultSymbolSizeRatio as h}from\"../../../../support/engineContent/sdfPrimitives.js\";import{CullFaceOptions as p}from\"../../../../webgl-engine/lib/basicInterfaces.js\";import{DefaultMaterial as w}from\"../../../../webgl-engine/materials/DefaultMaterial.js\";import{HUDMaterial as f}from\"../../../../webgl-engine/materials/HUDMaterial.js\";import{schematicMRRFactors as g}from\"../../../../webgl-engine/materials/pbrUtils.js\";let y=class extends r{constructor(e){super(),this.view=null,this.layerUid=null,this._renderGeometries=new Map,this._materials=new Map,this._directRenderers=new Map,this._lodRenderers=new Map,this.view=e.view,this.layerUid=e.layerUid}initialize(){}destroy(){}async executeRenderCommands(e){for(const r of e)switch(r.id){case\"create-material\":await this._createMaterial(r);break;case\"create-direct-renderer\":await this._createDirectRenderer(r);break;case\"add-direct-renderer-geometry\":await this._addDirectRendererGeometry(r);break;case\"remove-direct-renderer-geometry\":await this._removeDirectRendererGeometry(r);break;case\"create-lod-renderer\":await this._createLodRenderer(r);break;case\"add-lod-instances\":await this._addLodInstances(r);break;case\"remove-lod-instances\":await this._removeLodInstances(r)}}async _createMaterial(e){const{view:r}=this,{sharedSymbolResources:s}=r;if(null==s)throw new Error(\"No shared symbol resources found!\");const{textures:n}=s,a=r.state.viewingMode===o.Global;let d=null;switch(e.type){case\"default\":d=_(s,{physicalBasedRenderingEnabled:!0,slicePlaneEnabled:!1,castShadows:!0,isPrimitive:!0,screenSizePerspectiveEnabled:!0,doublePrecisionRequiresObfuscation:r._stage.renderView.renderingContext.driverTest.doublePrecisionRequiresObfuscation.result},a);break;case\"hud\":{const[e,r]=b(n,a);this.addHandles([t((()=>i(r)))]),d=e}break;default:throw new Error(`unable to create unknown material type ${e.type}`)}this._materials.set(e.materialId,d)}_getMaterial(e){return this._materials.get(e)}async _createDirectRenderer(e){const r=e.materialId,t=this._getMaterial(r);if(null==t)throw new Error(`material not found ${r}`);const{view:i}=this,s=new c({material:t});this._directRenderers.set(r,s),i._stage.addRenderPlugin(s),i._stage.renderView.renderer.updateHasFlags()}async _addDirectRendererGeometry(e){const r=e.renderGeometryId,t=e.materialId;null!=this._renderGeometries.get(r)&&await this._removeDirectRendererGeometry({renderGeometryId:r});const i=this._directRenderers.get(t);if(null==i)return void console.error(\"no renderer assigned to provided material\");const s=i.addRenderGeometry(r,e.renderGeometryBuffer,e.localOrigin);this._renderGeometries.set(r,{renderGeometry:s,materialId:t}),this.view._stage.renderView.requestRender()}async _removeDirectRendererGeometry(e){const r=e.renderGeometryId,t=this._renderGeometries.get(r);if(null==t)return;const i=t.materialId,s=this._directRenderers.get(i);null!=s?s.removeRenderGeometry(e.renderGeometryId):console.error(\"no renderer assigned to provided material\")}async _createLodRenderer(e){const r=new l({view:this.view,layerUid:this.layerUid}),t=new AbortController,i=e=>this._getMaterial(e);await r.doLoad(e.lodRenderGeometry,i,t.signal),this._lodRenderers.set(e.lodRendererId,r)}async _addLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.addInstances(e.data)}async _removeLodInstances(e){const r=this._lodRenderers.get(e.lodRendererId);if(null==r)throw new Error(\"no lod renderer assigned to provided lod renderer Id\");r.removeInstances(e.featureIds)}};function b(e,r){const t={anchorPosition:d.center,occlusionTest:!0,hasSlicePlane:!1},i=t,s=1;i.color=[1,0,0,1],i.outlineColor=[0,0,0,1],i.outlineSize=s;const n=null;if(null!=e){const r=e.fromData(\"circle-icon\",(()=>m(\"circle\")));i.textureId=r.texture.id,i.textureIsSignedDistanceField=!0,i.sampleSignedDistanceFieldTexelCenter=u(\"circle\")}return i.distanceFieldBoundingBox=v,[new f(t,r),n]}function _(e,r,t){const i={usePBR:r.physicalBasedRenderingEnabled,isSchematic:!0,mrrFactors:g,ambient:n,diffuse:n,hasSlicePlane:r.slicePlaneEnabled,hasSliceHighlight:!1,castShadows:r.castShadows,offsetTransparentBackfaces:!r.isPrimitive};return R(i),r.screenSizePerspectiveEnabled&&(i.screenSizePerspective=e.screenSizePerspectiveSettings),i.externalColor=a,i.isInstanced=!0,new w(i,{spherical:t,doublePrecisionRequiresObfuscation:!0})}function R(e){const r=e.opacity??1,t=r<1;return e.transparent=t,e.opacity=r,e.cullFace=t?p.None:p.Back,e}y=e([s(\"esri.views.3d.layers.graphics.pipeline.rendering.FeaturePipelineRenderManager\")],y);const v=[h/2,h/2,1-h/2,1-h/2];export{y as FeaturePipelineRenderManager,_ as createDefaultMaterial,b as createHudMaterial};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as r,invert as e,transpose as t}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";class n{constructor(r){this._bufferWriter=null,this._bufferWriter=r.createBufferWriter()}createBuffer(o,n){const s=this._bufferWriter;let l=null;if(o.transformation&&n)r(f,o.transformation),f[12]-=n[0],f[13]-=n[1],f[14]-=n[2],l=f;else{if(n)throw new Error(\"not implemented\");o.transformation&&(l=o.transformation)}let u=null;l&&(e(a,f),t(a,a),u=a);const m=o.attributes,c=s.elementCount(m),b=s.vertexBufferLayout.stride/4;c>Math.floor(i/b)&&console.warn(\"geometry with very large number of elements encountered\");const h=s.vertexBufferLayout.createBuffer(c),d=0;return s.write(l,u,m,o.objectAndLayerIdColor,h,d),{data:h.buffer,elementCount:c}}}const f=o(),a=o(),i=16777216/4;export{n as RenderGeometryBufferWriter};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getContinuousIndexArray as e}from\"../../../../../../geometry/support/Indices.js\";import{createHudMaterial as r}from\"./FeaturePipelineRenderManager.js\";import{RenderGeometryBufferWriter as t}from\"./RenderGeometryBufferWriter.js\";import{BoundingInfo as n}from\"../../../../webgl-engine/lib/BoundingInfo.js\";import{VertexAttribute as a}from\"../../../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as s}from\"../../../../webgl-engine/materials/DefaultMaterial.js\";class d{constructor(e){this._context=e,this._commands=[],this._transferables=new Set}createMaterial(e){const n=this._context,a=n.generateId(\"material\");switch(e){case\"default\":{const e=new s({},{spherical:this._context.globalViewingMode,doublePrecisionRequiresObfuscation:!0}),r=new t(e);n.registerRenderGeometryBufferWriter(a,r)}break;case\"hud\":{const e=r(null,this._context.globalViewingMode)[0],s=new t(e);n.registerRenderGeometryBufferWriter(a,s)}}return this._commands.push({id:\"create-material\",type:e,materialId:a}),a}createDirectRenderer(e){const r=this._context.generateId(\"material-renderer\");return this._commands.push({id:\"create-direct-renderer\",materialRendererId:r,materialId:e}),r}addDirectRendererGeometry(e,r,t){const n=r.materialId,a=this._context.getRenderGeometryBufferWriter(n);if(null==a)throw new Error(`no bufferwriter found for material ${n}`);const s=a.createBuffer(r,t);this._transferables.add(s.data),this._commands.push({id:\"add-direct-renderer-geometry\",renderGeometryId:e,materialId:n,renderGeometryBuffer:s,localOrigin:t})}removeDirectRendererGeometry(e){this._commands.push({id:\"remove-direct-renderer-geometry\",renderGeometryId:e})}createLodRenderer(r){const t=this._context.generateId(\"lod-renderer\"),s={levels:r.levels.map((r=>({components:r.components.map((r=>{const t=r.attributes.get(a.POSITION);if(!t||0===t.indices.length)throw new Error(\"positions attribute expected\");const s=3,d=e(t.indices.length/s),i=new n(d,s,t),o=this._context.getRenderGeometryBufferWriter(r.materialId);if(null==o)throw new Error(\"writer not found\");const m=o.createBuffer(r,null);this._transferables.add(m.data);return{materialId:r.materialId,renderGeometryBuffer:m,boundingInfo:{bbMax:i.bbMax,bbMin:i.bbMin}}})),minScreenSpaceRadius:r.minScreenSpaceRadius})))};return this._commands.push({id:\"create-lod-renderer\",lodRendererId:t,lodRenderGeometry:s}),t}addLodInstances(e,r){this._commands.push({id:\"add-lod-instances\",lodRendererId:e,data:r}),this._transferables.add(r.featureIds.buffer),this._transferables.add(r.globalTransforms.buffer),this._transferables.add(r.localTransforms.buffer)}removeLodInstances(e,r){this._commands.push({id:\"remove-lod-instances\",lodRendererId:e,featureIds:r}),this._transferables.add(r.buffer)}async dispatch(){const e=this._commands,r=Array.from(this._transferables);this._clearCommandBuffer(),this._context.dispatchRenderCommands(e,r)}_clearCommandBuffer(){this._commands=[],this._transferables.clear()}}export{d as RenderCommandEncoder,a as VertexAttribute};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ViewingMode as e}from\"../../../../../ViewingMode.js\";import{RenderCommandEncoder as r}from\"./RenderCommandEncoder.js\";class t{constructor(r){this._idCounter=0,this._bufferWriters=new Map,this._dispatchRenderCommandsCallback=async()=>{},this.globalViewingMode=!1,this.globalViewingMode=r.viewingMode===e.Global,this._dispatchRenderCommandsCallback=r.dispatchRenderCommandsCallback}generateId(e=\"\"){return`${e}${this._idCounter++}`}createEncoder(){return new r(this)}async dispatchRenderCommands(e,r){this._dispatchRenderCommandsCallback(e,r)}registerRenderGeometryBufferWriter(e,r){this._bufferWriters.set(e,r)}getRenderGeometryBufferWriter(e){return this._bufferWriters.get(e)}}export{t as RenderCommandContext};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar E;!function(E){E[E.OBJECT_ID=0]=\"OBJECT_ID\",E[E.PARTITION_ID=1]=\"PARTITION_ID\",E[E.GEOMETRY_MAP_COORDINATES=2]=\"GEOMETRY_MAP_COORDINATES\",E[E.GEOMETRY_RENDER_COORDINATES=3]=\"GEOMETRY_RENDER_COORDINATES\",E[E.TILE_CENTER_RENDER_COORDINATES=4]=\"TILE_CENTER_RENDER_COORDINATES\"}(E||(E={}));export{E as FeatureDataItem};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{projectBuffer as t}from\"../../../../../../geometry/projection/projectBuffer.js\";import{projectVectorToVector as r}from\"../../../../../../geometry/projection/projectVectorToVector.js\";import{center as o}from\"../../../../../../geometry/support/aaBoundingRect.js\";import{FeatureDataItem as n}from\"./interfaces.js\";async function a(e,t){const{numFeatures:r,tile:o,partitionInfo:n}=e,{pages:a}=o;if(0===a.length||0===r)return new Uint32Array;const i=new Uint32Array(r);if(n){const e=a.reduce(((e,{featureCount:t})=>e+t),0),t=new Uint32Array(e);let o=0;for(const r of a)o=r.readAllObjectIds(t,o);const c=n.tileIndices;for(let n=0;n<r;++n){const e=t[c[n]];i[n]=e}}else{let e=0;for(const t of a)e=t.readAllObjectIds(i,e)}return i}async function i(e,t){const{numFeatures:r,tile:o,partitionInfo:n}=e,{pages:a}=o;if(0===a.length||0===r)return new Float64Array;const i=new Float64Array(3*r);if(n){const e=a.reduce(((e,{featureCount:t})=>e+t),0),t=new Float64Array(3*e);let o=0;for(const r of a)o=r.readAllCoordinates(t,o);const c=n.tileIndices;for(let n=0;n<r;++n){const e=c[n],r=t[3*e+0],o=t[3*e+1],a=t[3*e+2];i[3*n+0]=r,i[3*n+1]=o,i[3*n+2]=a}}else{let e=0;for(const t of a)e=t.readAllCoordinates(i,e)}return i}async function c(e,r){await e.provision([n.GEOMETRY_MAP_COORDINATES],r);const{numFeatures:o,tile:a,mapCoordinates:i}=e,{pages:c}=a;if(0===c.length||0===o)return new Float64Array;const s=r.viewSpatialReference,f=r.renderSpatialReference,l=new Float64Array(3*o);if(!t(i,s,0,l,f,0,o))throw new Error(\"Failed to project coordinates\");return l}async function s(t,n){const a=n.viewSpatialReference,i=n.renderSpatialReference,c=t.tile.descriptor.extent,s=o(c),f=e();return r([s[0],s[1],0],a,f,i),f}export{i as getMapCoordinates,a as getObjectIds,c as getRenderCoordinates,s as getTileCenterRenderCoordinates};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{FeatureDataItem as t}from\"./interfaces.js\";import{getTileCenterRenderCoordinates as e,getRenderCoordinates as r,getMapCoordinates as i,getObjectIds as n}from\"./processingUtils.js\";class s{constructor(t,e,r=null){this._tile=t,this._numFeatures=e,this._partitionInfo=r}get partitionInfo(){return this._partitionInfo}get tile(){return this._tile}get numFeatures(){return this._numFeatures}get tileId(){return this._tile.descriptor.id}get objectIds(){if(null==this._objectIds)throw new Error(\"objectIds haven't been provisioned yet\");return this._objectIds}get partitionIds(){if(null==this._partitionIds)throw new Error(\"partitionIds haven't been provisioned yet\");return this._partitionIds}get mapCoordinates(){if(null==this._mapCoordinates)throw new Error(\"mapCoordinates haven't been provisioned yet\");return this._mapCoordinates}get renderCoordinates(){if(null==this._renderCoordinates)throw new Error(\"renderCoordinates haven't been provisioned yet\");return this._renderCoordinates}get tileCenterRenderCoordinates(){if(null==this._tileCenterRenderCoordinates)throw new Error(\"tileCenterRenderCoordinates hasn't been provisioned yet\");return this._tileCenterRenderCoordinates}async provision(s,o){for(const a of s)switch(a){case t.OBJECT_ID:if(this._objectIds)return;this._objectIds=await n(this);break;case t.PARTITION_ID:if(this._partitionIds)return;this._partitionIds=new Uint32Array(this._numFeatures);break;case t.GEOMETRY_MAP_COORDINATES:if(this._mapCoordinates)return;this._mapCoordinates=await i(this);break;case t.GEOMETRY_RENDER_COORDINATES:if(this._renderCoordinates)return;this._renderCoordinates=await r(this,o);break;case t.TILE_CENTER_RENDER_COORDINATES:if(this._tileCenterRenderCoordinates)return;this._tileCenterRenderCoordinates=await e(this,o);break;default:throw new Error(\"not implemented\")}}dispose(){if(this.partitions){for(const t of this.partitions)t.dispose();this.partitions=void 0}}}export{s as FeatureData};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnitForSR as t}from\"../../../../core/unitUtils.js\";import{rotateZ as e,rotateX as r,rotateY as n}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as i}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{fromArray as o,ONES as s}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as l}from\"../../../../chunks/vec42.js\";import{clone as u,ONES as a}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectPoint as c}from\"../../../../geometry/projection.js\";import{width as m,depth as p,height as f}from\"../../../../geometry/support/aaBoundingBox.js\";import{create as h}from\"../../../../geometry/support/aaBoundingRect.js\";import{ringsCentroid as y}from\"../../../../geometry/support/centroid.js\";import{getPointOnPath as x,getPathLength as g}from\"../../../../geometry/support/coordsUtils.js\";import{vertexSpaceOriginToPoint as d}from\"../../../../geometry/support/meshVertexSpaceUtils.js\";import{makeDehydratedPoint as j}from\"../../../../layers/graphics/dehydratedPoint.js\";import{isHydratedGeometry as v,clonePoint as z}from\"../../../../layers/graphics/hydratedFeatures.js\";function b(t,e){if(\"point\"===t.type)return P(t,e,!1);if(v(t))switch(t.type){case\"extent\":return P(t.center,e,!1);case\"polygon\":return P(t.centroid,e,!1);case\"polyline\":return P(w(t),e,!0);case\"mesh\":return P(d(t.vertexSpace,t.spatialReference)??t.extent.center,e,!1);case\"multipoint\":return}else switch(t.type){case\"extent\":return P(M(t),e,!0);case\"polygon\":return P(R(t),e,!0);case\"polyline\":return P(w(t),e,!0);case\"multipoint\":return}}function w(t){const e=t.paths[0];if(!e||0===e.length)return null;const r=x(e,g(e)/2);return j(r[0],r[1],r[2],t.spatialReference)}function M(t){return j(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}function R(t){const e=t.rings[0];if(!e||0===e.length)return null;const r=y(t.rings,!!t.hasZ);return j(r[0],r[1],r[2],t.spatialReference)}function P(t,e,r){const n=r?t:z(t);return e&&t?c(t,n,e)?n:null:n}function F(t){if(!t)return 0;switch(t.type){case\"point\":return t.z;case\"extent\":return t.zmax;case\"polygon\":return t.hasZ?t.rings.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case\"polyline\":return t.hasZ?t.paths.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case\"mesh\":return t.extent.zmax;case\"multipoint\":return}}function S(t,e,r,n=0){if(t){e||(e=h());const i=t;let o=.5*i.width*(r-1),s=.5*i.height*(r-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),l(e,i.xmin-o-n,i.ymin-s-n,i.xmax+o+n,i.ymax+s+n),e}return null}function A(t,e,r=null){const n=u(a);return null!=t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),null!=e?n[3]=e:null!=t&&t.length>3&&(n[3]=t[3]),r&&(n[0]*=r,n[1]*=r,n[2]*=r,n[3]*=r),n}function B(t,e,r,n,i,o=[0,0,0,0]){for(let s=0;s<3;++s)o[s]=null!=t?.[s]?t[s]:null!=r?.[s]?r[s]:i[s];return o[3]=null!=e?e:null!=n?n:i[3],o}function D(t=s,e,r,n=1){const i=new Array(3);if(null==e||null==r)i[0]=1,i[1]=1,i[2]=1;else{let n,o=0;for(let s=2;s>=0;s--){const l=t[s];let u;const a=null!=l,c=0===s&&!n&&!a,m=r[s];\"symbol-value\"===l||c?u=0!==m?e[s]/m:1:a&&\"proportional\"!==l&&isFinite(l)&&(u=0!==m?l/m:1),null!=u&&(i[s]=u,n=u,o=Math.max(o,Math.abs(u)))}for(let t=2;t>=0;t--)null==i[t]?i[t]=n:0===i[t]&&(i[t]=.001*o)}for(let o=2;o>=0;o--)i[o]/=n;return o(i)}function I(t){return null!=t.isPrimitive}function U(t){return Z(I(t)?[t.width,t.depth,t.height]:t)?null:\"Symbol sizes may not be negative values\"}function Z(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function k(t,o,s,l=i()){return t&&e(l,l,-t/180*Math.PI),o&&r(l,l,o/180*Math.PI),s&&n(l,l,s/180*Math.PI),l}function E(e,r,n){if(null!=n.minDemResolution)return n.minDemResolution;const i=t(r),o=m(e)*i,s=p(e)*i,l=f(e)*(r.isGeographic?1:i);return 0===o&&0===s&&0===l?n.minDemResolutionForPoints:.01*Math.max(o,s,l)}export{b as computeCentroid,F as computeMaxZ,k as computeObjectRotation,D as computeObjectScale,E as demResolutionForBoundingBox,S as enlargeExtent,Z as isValidSize,A as mixinColorAndOpacity,B as overrideColor,U as validateSymbolLayerSize};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{compactIndices as o}from\"../../../../../../geometry/support/Indices.js\";function n(n){const t=new Map;for(const[r,s]of n)t.set(r,{...s,indices:o(s.indices)});return t}function t(o){const n=[];for(const[t,r]of o)n.push([t,r]);return n}export{t as attributesMapToInputAttributes,n as inputAttributesToAttributesMap};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar n;!function(n){function t(n,t){const c=n[t],o=n[t+1],r=n[t+2];return Math.sqrt(c*c+o*o+r*r)}function c(n,t){const c=n[t],o=n[t+1],r=n[t+2],u=1/Math.sqrt(c*c+o*o+r*r);n[t]*=u,n[t+1]*=u,n[t+2]*=u}function o(n,t,c){n[t]*=c,n[t+1]*=c,n[t+2]*=c}function r(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]+c[o],r[u+1]=n[t+1]+c[o+1],r[u+2]=n[t+2]+c[o+2]}function u(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]-c[o],r[u+1]=n[t+1]-c[o+1],r[u+2]=n[t+2]-c[o+2]}n.length=t,n.normalize=c,n.scale=o,n.add=r,n.subtract=u}(n||(n={}));export{n as Vec3Compact};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{d as t,e as n,n as e,h as o,g as s,f as r,i as l,c as h,t as u}from\"../../../../chunks/vec32.js\";import{fromValues as c,create as a,clone as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import{clone as p,create as i,fromValues as w}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{newDoubleArray as g}from\"../../../../geometry/support/DoubleArray.js\";import{newFloatArray as O,floatArrayFrom as m}from\"../../../../geometry/support/FloatArray.js\";import{getZeroIndexArray as M,getContinuousIndexArray as A}from\"../../../../geometry/support/Indices.js\";import{create as I,fromPositionAndNormal as y,intersectRay as N}from\"../../../../geometry/support/plane.js\";import{wrap as P}from\"../../../../geometry/support/ray.js\";import{Attribute as T}from\"./Attribute.js\";import{Vec3Compact as S}from\"./BufferVectorMath.js\";import{ContentObjectType as R}from\"./ContentObjectType.js\";import{Geometry as b}from\"./Geometry.js\";import{assert as L}from\"./Util.js\";import{VertexAttribute as j}from\"./VertexAttribute.js\";const d=S,E=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],U=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],V=[0,0,1,0,1,1,0,1],x=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],F=new Array(36);for(let Nt=0;Nt<6;Nt++)for(let t=0;t<6;t++)F[6*Nt+t]=Nt;const v=new Array(36);for(let Nt=0;Nt<6;Nt++)v[6*Nt]=0,v[6*Nt+1]=1,v[6*Nt+2]=2,v[6*Nt+3]=2,v[6*Nt+4]=3,v[6*Nt+5]=0;function C(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(24);for(let o=0;o<8;o++)e[3*o]=E[o][0]*n[0],e[3*o+1]=E[o][1]*n[1],e[3*o+2]=E[o][2]*n[2];return new b(t,[[j.POSITION,new T(e,x,3,!0)],[j.NORMAL,new T(U,F,3)],[j.UV0,new T(V,v,2)]])}const G=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],D=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],q=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],B=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function k(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(18);for(let o=0;o<6;o++)e[3*o]=G[o][0]*n[0],e[3*o+1]=G[o][1]*n[1],e[3*o+2]=G[o][2]*n[2];return new b(t,[[j.POSITION,new T(e,q,3,!0)],[j.NORMAL,new T(D,B,3)]])}const z=c(-.5,0,-.5),Z=c(.5,0,-.5),H=c(0,0,.5),J=c(0,.5,0),K=a(),Q=a(),W=a(),X=a(),Y=a();t(K,z,J),t(Q,z,Z),n(W,K,Q),e(W,W),t(K,Z,J),t(Q,Z,H),n(X,K,Q),e(X,X),t(K,H,J),t(Q,H,z),n(Y,K,Q),e(Y,Y);const $=[z,Z,H,J],_=[0,-1,0,W[0],W[1],W[2],X[0],X[1],X[2],Y[0],Y[1],Y[2]],tt=[0,1,2,3,1,0,3,2,1,3,0,2],nt=[0,0,0,1,1,1,2,2,2,3,3,3];function et(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(12);for(let o=0;o<4;o++)e[3*o]=$[o][0]*n[0],e[3*o+1]=$[o][1]*n[1],e[3*o+2]=$[o][2]*n[2];return new b(t,[[j.POSITION,new T(e,tt,3,!0)],[j.NORMAL,new T(_,nt,3)]])}function ot(t,n,e,o,s={uv:!0}){const r=-Math.PI,l=2*Math.PI,h=-Math.PI/2,u=Math.PI,c=Math.max(3,Math.floor(e)),a=Math.max(2,Math.floor(o)),f=(c+1)*(a+1),p=O(3*f),i=O(3*f),w=O(2*f),g=[];let m=0;for(let O=0;O<=a;O++){const t=[],e=O/a,o=h+e*u,s=Math.cos(o);for(let h=0;h<=c;h++){const u=h/c,a=r+u*l,f=Math.cos(a)*s,g=Math.sin(o),O=-Math.sin(a)*s;p[3*m]=f*n,p[3*m+1]=g*n,p[3*m+2]=O*n,i[3*m]=f,i[3*m+1]=g,i[3*m+2]=O,w[2*m]=u,w[2*m+1]=e,t.push(m),++m}g.push(t)}const A=new Array;for(let O=0;O<a;O++)for(let t=0;t<c;t++){const n=g[O][t],e=g[O][t+1],o=g[O+1][t+1],s=g[O+1][t];0===O?(A.push(n),A.push(o),A.push(s)):O===a-1?(A.push(n),A.push(e),A.push(o)):(A.push(n),A.push(e),A.push(o),A.push(o),A.push(s),A.push(n))}const I=[[j.POSITION,new T(p,A,3,!0)],[j.NORMAL,new T(i,A,3,!0)]];return s.uv&&I.push([j.UV0,new T(w,A,2,!0)]),s.offset&&(I[0][0]=j.OFFSET,I.push([j.POSITION,new T(Float64Array.from(s.offset),M(A.length),3,!0)])),new b(t,I)}function st(t,n,e,o){const s=rt(n,e,o);return new b(t,s)}function rt(t,n,e){const o=t;let s,r;if(e)s=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],r=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const t=o*(1+Math.sqrt(5))/2;s=[-o,t,0,o,t,0,-o,-t,0,o,-t,0,0,-o,t,0,o,t,0,-o,-t,0,o,-t,t,0,-o,t,0,o,-t,0,-o,-t,0,o],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let c=0;c<s.length;c+=3)d.scale(s,c,t/d.length(s,c));let l={};function h(n,e){n>e&&([n,e]=[e,n]);const o=n.toString()+\".\"+e.toString();if(l[o])return l[o];let r=s.length;return s.length+=3,d.add(s,3*n,s,3*e,s,r),d.scale(s,r,t/d.length(s,r)),r/=3,l[o]=r,r}for(let c=0;c<n;c++){const t=r.length,n=new Array(4*t);for(let e=0;e<t;e+=3){const t=r[e],o=r[e+1],s=r[e+2],l=h(t,o),u=h(o,s),c=h(s,t),a=4*e;n[a]=t,n[a+1]=l,n[a+2]=c,n[a+3]=o,n[a+4]=u,n[a+5]=l,n[a+6]=s,n[a+7]=c,n[a+8]=u,n[a+9]=l,n[a+10]=u,n[a+11]=c}r=n,l={}}const u=m(s);for(let c=0;c<u.length;c+=3)d.normalize(u,c);return[[j.POSITION,new T(m(s),r,3,!0)],[j.NORMAL,new T(u,r,3,!0)]]}function lt(t,n,e,o,s,r,l,h,u,c=null){const a=e?p(e):i(),f=n?p(n):w(0,0,1),g=o?[255*o[0],255*o[1],255*o[2],o.length>3?255*o[3]:255]:[255,255,255,255],O=null!=r&&2===r.length?r:[1,1],m=null!=s?[s]:[0],A=M(1),I=[[j.POSITION,new T(a,A,3,!0)],[j.NORMAL,new T(f,A,3,!0)],[j.COLOR,new T(g,A,4,!0)],[j.SIZE,new T(O,A,2)],[j.ROTATION,new T(m,A,1,!0)]];if(h&&I.push([j.UV0,new T(h,A,h.length)]),null!=l&&(l=[l[0],l[1],l[2],l[3]],I.push([j.CENTEROFFSETANDDISTANCE,new T(l,A,4)])),u){const t=[u[0],u[1],u[2],u[3]];I.push([j.FEATUREATTRIBUTE,new T(t,A,4)])}return new b(t,I,null,R.Point,c)}const ht=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function ut(t,n=ht){const e=new Array(12);for(let c=0;c<4;c++)for(let t=0;t<3;t++)e[3*c+t]=n[c][t];const o=[0,1,2,2,3,0],s=[0,0,1],r=[0,0,0,0,0,0],l=[0,0,1,0,1,1,0,1],h=[255,255,255,255],u=[[j.POSITION,new T(e,o,3,!0)],[j.NORMAL,new T(s,r,3,!0)],[j.UV0,new T(l,o,2,!0)],[j.COLOR,new T(h,r,4,!0)]];return new b(t,u)}function ct(t,n,e,o,s=!0,r=!0){let l=0;const h=n,u=t;let a=c(0,l,0),f=c(0,l+u,0),p=c(0,-1,0),i=c(0,1,0);o&&(l=u,f=c(0,0,0),a=c(0,l,0),p=c(0,1,0),i=c(0,-1,0));const w=[f,a],g=[p,i],m=e+2,M=Math.sqrt(u*u+h*h);if(o)for(let O=e-1;O>=0;O--){const t=O*(2*Math.PI/e),n=c(Math.cos(t)*h,l,Math.sin(t)*h);w.push(n);const o=c(u*Math.cos(t)/M,-h/M,u*Math.sin(t)/M);g.push(o)}else for(let O=0;O<e;O++){const t=O*(2*Math.PI/e),n=c(Math.cos(t)*h,l,Math.sin(t)*h);w.push(n);const o=c(u*Math.cos(t)/M,h/M,u*Math.sin(t)/M);g.push(o)}const A=new Array,I=new Array;if(s){for(let t=3;t<w.length;t++)A.push(1),A.push(t-1),A.push(t),I.push(0),I.push(0),I.push(0);A.push(w.length-1),A.push(2),A.push(1),I.push(0),I.push(0),I.push(0)}if(r){for(let t=3;t<w.length;t++)A.push(t),A.push(t-1),A.push(0),I.push(t),I.push(t-1),I.push(1);A.push(0),A.push(2),A.push(w.length-1),I.push(1),I.push(2),I.push(g.length-1)}const y=O(3*m);for(let c=0;c<m;c++)y[3*c]=w[c][0],y[3*c+1]=w[c][1],y[3*c+2]=w[c][2];const N=O(3*m);for(let c=0;c<m;c++)N[3*c]=g[c][0],N[3*c+1]=g[c][1],N[3*c+2]=g[c][2];return[[j.POSITION,new T(y,A,3,!0)],[j.NORMAL,new T(N,I,3,!0)]]}function at(t,n,e,o,s,r=!0,l=!0){return new b(t,ct(n,e,o,s,r,l))}function ft(t,h,u,p,i,w,g){const m=i?f(i):c(1,0,0),M=w?f(w):c(0,0,0);g??=!0;const A=a();e(A,m);const I=a();o(I,A,Math.abs(h));const y=a();o(y,I,-.5),s(y,y,M);const N=c(0,1,0);Math.abs(1-r(A,N))<.2&&l(N,0,0,1);const P=a();n(P,A,N),e(P,P),n(N,P,A);const S=2*p+(g?2:0),R=p+(g?2:0),L=O(3*S),d=O(3*R),E=O(2*S),U=new Array(3*p*(g?4:2)),V=new Array(3*p*(g?4:2));g&&(L[3*(S-2)]=y[0],L[3*(S-2)+1]=y[1],L[3*(S-2)+2]=y[2],E[2*(S-2)]=0,E[2*(S-2)+1]=0,L[3*(S-1)]=L[3*(S-2)]+I[0],L[3*(S-1)+1]=L[3*(S-2)+1]+I[1],L[3*(S-1)+2]=L[3*(S-2)+2]+I[2],E[2*(S-1)]=1,E[2*(S-1)+1]=1,d[3*(R-2)]=-A[0],d[3*(R-2)+1]=-A[1],d[3*(R-2)+2]=-A[2],d[3*(R-1)]=A[0],d[3*(R-1)+1]=A[1],d[3*(R-1)+2]=A[2]);const x=(t,n,e)=>{U[t]=n,V[t]=e};let F=0;const v=a(),C=a();for(let n=0;n<p;n++){const t=n*(2*Math.PI/p);o(v,N,Math.sin(t)),o(C,P,Math.cos(t)),s(v,v,C),d[3*n]=v[0],d[3*n+1]=v[1],d[3*n+2]=v[2],o(v,v,u),s(v,v,y),L[3*n]=v[0],L[3*n+1]=v[1],L[3*n+2]=v[2],E[2*n]=n/p,E[2*n+1]=0,L[3*(n+p)]=L[3*n]+I[0],L[3*(n+p)+1]=L[3*n+1]+I[1],L[3*(n+p)+2]=L[3*n+2]+I[2],E[2*(n+p)]=n/p,E[2*n+1]=1;const e=(n+1)%p;x(F++,n,n),x(F++,n+p,n),x(F++,e,e),x(F++,e,e),x(F++,n+p,n),x(F++,e+p,e)}if(g){for(let t=0;t<p;t++){const n=(t+1)%p;x(F++,S-2,R-2),x(F++,t,R-2),x(F++,n,R-2)}for(let t=0;t<p;t++){const n=(t+1)%p;x(F++,t+p,R-1),x(F++,S-1,R-1),x(F++,n+p,R-1)}}const G=[[j.POSITION,new T(L,U,3,!0)],[j.NORMAL,new T(d,V,3,!0)],[j.UV0,new T(E,U,2,!0)]];return new b(t,G)}function pt(t,n,e,o,s,r){o=o||10,s=null==s||s,L(n.length>1);const l=[[0,0,0]],h=[],u=[];for(let c=0;c<o;c++){h.push([0,-c-1,-(c+1)%o-1]);const t=c/o*2*Math.PI;u.push([Math.cos(t)*e,Math.sin(t)*e])}return it(t,u,n,l,h,s,r)}function it(r,u,a,f,p,w,g=c(0,0,0)){const m=u.length,M=O(a.length*m*3+(6*f.length||0)),A=O(a.length*m*3+(f?6:0)),S=new Array,R=new Array;let L=0,d=0;const E=i(),U=i(),V=i(),x=i(),F=i(),v=i(),C=i(),G=i(),D=i(),q=i(),B=i(),k=i(),z=i(),Z=I();l(D,0,1,0),t(U,a[1],a[0]),e(U,U),w?(s(G,a[0],g),e(V,G)):l(V,0,0,1),At(U,V,D,D,F,V,It),h(x,V),h(k,F);for(let t=0;t<f.length;t++)o(v,F,f[t][0]),o(G,V,f[t][2]),s(v,v,G),s(v,v,a[0]),M[L++]=v[0],M[L++]=v[1],M[L++]=v[2];A[d++]=-U[0],A[d++]=-U[1],A[d++]=-U[2];for(let t=0;t<p.length;t++)S.push(p[t][0]>0?p[t][0]:-p[t][0]-1+f.length),S.push(p[t][1]>0?p[t][1]:-p[t][1]-1+f.length),S.push(p[t][2]>0?p[t][2]:-p[t][2]-1+f.length),R.push(0),R.push(0),R.push(0);let H=f.length;const J=f.length-1;for(let l=0;l<a.length;l++){let r=!1;if(l>0){h(E,U),l<a.length-1?(t(U,a[l+1],a[l]),e(U,U)):r=!0,s(q,E,U),e(q,q),s(B,a[l-1],x),y(a[l],q,Z);N(Z,P(B,E),G)?(t(G,G,a[l]),e(V,G),n(F,q,V),e(F,F)):At(q,x,k,D,F,V,It),h(x,V),h(k,F)}w&&(s(G,a[l],g),e(z,G));for(let t=0;t<m;t++)if(o(v,F,u[t][0]),o(G,V,u[t][1]),s(v,v,G),e(C,v),A[d++]=C[0],A[d++]=C[1],A[d++]=C[2],s(v,v,a[l]),M[L++]=v[0],M[L++]=v[1],M[L++]=v[2],!r){const n=(t+1)%m;S.push(H+t),S.push(H+m+t),S.push(H+n),S.push(H+n),S.push(H+m+t),S.push(H+m+n);for(let t=0;t<6;t++){const n=S.length-6;R.push(S[n+t]-J)}}H+=m}const K=a[a.length-1];for(let t=0;t<f.length;t++)o(v,F,f[t][0]),o(G,V,f[t][1]),s(v,v,G),s(v,v,K),M[L++]=v[0],M[L++]=v[1],M[L++]=v[2];const Q=d/3;A[d++]=U[0],A[d++]=U[1],A[d++]=U[2];const W=H-m;for(let t=0;t<p.length;t++)S.push(p[t][0]>=0?H+p[t][0]:-p[t][0]-1+W),S.push(p[t][2]>=0?H+p[t][2]:-p[t][2]-1+W),S.push(p[t][1]>=0?H+p[t][1]:-p[t][1]-1+W),R.push(Q),R.push(Q),R.push(Q);const X=[[j.POSITION,new T(M,S,3,!0)],[j.NORMAL,new T(A,R,3,!0)]];return new b(r,X)}function wt(t,n,e,o){L(n.length>1,\"createPolylineGeometry(): polyline needs at least 2 points\"),L(3===n[0].length,\"createPolylineGeometry(): malformed vertex\"),L(null==e||e.length===n.length,\"createPolylineGeometry: need same number of points and normals\"),L(null==e||3===e[0].length,\"createPolylineGeometry(): malformed normal\");const s=g(3*n.length),r=new Array(2*(n.length-1));let l=0,h=0;for(let c=0;c<n.length;c++){for(let t=0;t<3;t++)s[l++]=n[c][t];c>0&&(r[h++]=c-1,r[h++]=c)}const u=[[j.POSITION,new T(s,r,3,!0)]];if(e){const t=O(3*e.length);let o=0;for(let s=0;s<n.length;s++)for(let n=0;n<3;n++)t[o++]=e[s][n];u.push([j.NORMAL,new T(t,r,3,!0)])}return o&&u.push([j.COLOR,new T(o,A(o.length/4),4)]),new b(t,u,null,R.Line)}function gt(t,n,e,o,s,r=0){const l=new Array(18),h=[[-e,r,s/2],[o,r,s/2],[0,n+r,s/2],[-e,r,-s/2],[o,r,-s/2],[0,n+r,-s/2]],u=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let c=0;c<6;c++)l[3*c]=h[c][0],l[3*c+1]=h[c][1],l[3*c+2]=h[c][2];return new b(t,[[j.POSITION,new T(l,u,3,!0)]])}function Ot(t,n){const e=t.getMutableAttribute(j.POSITION).data;for(let o=0;o<e.length;o+=3){const t=e[o],s=e[o+1],r=e[o+2];l(yt,t,s,r),u(yt,yt,n),e[o]=yt[0],e[o+1]=yt[1],e[o+2]=yt[2]}}function mt(t,n=t){const e=t.attributes,o=e.get(j.POSITION).data,s=e.get(j.NORMAL).data;if(s){const t=n.getMutableAttribute(j.NORMAL).data;for(let n=0;n<s.length;n+=3){const e=s[n+1];t[n+1]=-s[n+2],t[n+2]=e}}if(o){const t=n.getMutableAttribute(j.POSITION).data;for(let n=0;n<o.length;n+=3){const e=o[n+1];t[n+1]=-o[n+2],t[n+2]=e}}}function Mt(t,o,s,l,h){return!(Math.abs(r(o,t))>h)&&(n(s,t,o),e(s,s),n(l,s,t),e(l,l),!0)}function At(t,n,e,o,s,r,l){return Mt(t,n,s,r,l)||Mt(t,e,s,r,l)||Mt(t,o,s,r,l)}const It=.99619469809,yt=i();export{mt as cgToGIS,C as createBoxGeometry,at as createConeGeometry,ct as createConeGeometryData,ft as createCylinderGeometry,k as createDiamondGeometry,gt as createExtrudedTriangle,it as createPathExtrusionGeometry,lt as createPointGeometry,rt as createPolySphereData,st as createPolySphereGeometry,wt as createPolylineGeometry,ot as createSphereGeometry,ut as createSquareGeometry,et as createTetrahedronGeometry,pt as createTubeGeometry,At as makeOrthoBasisDirUpFallback,Ot as transformInPlace};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../../../core/has.js\";import{inputAttributesToAttributesMap as e}from\"./symbolizationUtils.js\";import{cloneAttributeData as t}from\"../../../../webgl-engine/lib/AttributeArray.js\";import{createConeGeometryData as n}from\"../../../../webgl-engine/lib/GeometryUtil.js\";import{VertexAttribute as i}from\"../../../../webgl-engine/lib/VertexAttribute.js\";function r(t,i){const r=(t,n,r=!1)=>({levels:t.map((t=>{const o=e(n(t.tesselation));r&&a(o);return{components:[{attributes:o,objectAndLayerIdColor:void 0,transformation:null,materialId:i}],minScreenSpaceRadius:t.minScreenSpaceRadius}}))});switch(t){case\"cone\":return r(s,(e=>n(1,.5,e,!1)),!0);case\"sphere\":case\"cube\":case\"inverted-cone\":case\"cylinder\":case\"tetrahedron\":case\"diamond\":throw new Error(\"not implemented\");default:return}}function a(e){const t=e,n=t.get(i.POSITION).data,r=t.get(i.NORMAL).data;if(r){const t=o(e,i.NORMAL).data;for(let e=0;e<r.length;e+=3){const n=r[e+1];t[e+1]=-r[e+2],t[e+2]=n}}if(n){const t=o(e,i.POSITION).data;for(let e=0;e<n.length;e+=3){const i=n[e+1];t[e+1]=-n[e+2],t[e+2]=i}}}function o(e,n){let i=e.get(n);return i&&!i.exclusive&&(i={...i,exclusive:!0,data:t(i.data)},e.set(n,i)),i}const s=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];export{a as convertCoordinatesToZUp,r as createPrimitiveGeometry};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{identity as o,scale as s}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as i}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{fromArray as a,create as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{computeTranslationToOriginAndRotation as c}from\"../../../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{create as l,size as d}from\"../../../../../../geometry/support/aaBoundingBox.js\";import{objectSymbolLayerPrimitiveBoundingBox as m,objectSymbolLayerSizeWithResourceSize as p}from\"../../../../../../symbols/support/symbolLayerUtils3D.js\";import{computeObjectScale as f}from\"../../graphicUtils.js\";import{FeatureDataItem as u}from\"../featureData/interfaces.js\";import{createPrimitiveGeometry as h}from\"./primitiveObjectUtils.js\";let j=class extends r{constructor(e){super(),this._context=e,this.lodRendererId=null,this._loaded=!1}get loaded(){return this._loaded}async load(e){const r=e.createMaterial(\"default\"),t=h(\"cone\",r);this.lodRendererId=e.createLodRenderer(t),this._loaded=!0}async add(e,r){if(null==this.lodRendererId)throw new Error(\"expected lod renderer id to not be null\");await this._provisionFeatureData(e);const t=e.numFeatures,o=!0,s=l(m(\"cone\")),i=a(d(s)),n=a(p(i,{isPrimitive:o,width:100,depth:null,height:null})),c=new Float64Array(16*t),f=new Float64Array(16*t),u=e.mapCoordinates;for(let a=0;a<t;++a){const e=a,r=u[3*a+0],t=u[3*a+1],o=u[3*a+2],s=this._computeGlobalTransform(r,t,o,this._context.viewSpatialReference,b),l=this._computeLocalTransform(n,i,y);this._writeMatrixToTypedBuffer(c,e,l),this._writeMatrixToTypedBuffer(f,e,s)}const h={featureIds:new Uint32Array(e.objectIds),localTransforms:c,globalTransforms:f};r.addLodInstances(this.lodRendererId,h)}async remove(e,r){if(null==this.lodRendererId)return;const t=new Uint32Array(e.objectIds);r.removeLodInstances(this.lodRendererId,t)}async _provisionFeatureData(e){await e.provision([u.GEOMETRY_MAP_COORDINATES,u.OBJECT_ID],this._context)}_writeMatrixToTypedBuffer(e,r,t){let o=16*r;for(let s=0;s<16;s++)e[o++]=t[s]}_computeGlobalTransform(e,r,t,o,s){return _[0]=e,_[1]=r,_[2]=t,c(o,_,s,this._context.renderSpatialReference),s}_computeLocalTransform(e,r,t){return o(t),this._applyObjectScale(e,r,t),t}_applyObjectScale(e,r,t){const o=f(e,e,r,this._context.renderCoordsHelper.unitInMeters);1===o[0]&&1===o[1]&&1===o[2]||s(t,t,o)}};j=e([t(\"esri.views.3d.layers.graphics.pipeline.symbolization.TestObjectSymbol\")],j);const _=n(),y=i(),b=i();export{j as TestObjectSymbol};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import r from\"../../../../../../core/Accessor.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/RandomLCG.js\";import\"../../../../../../core/Error.js\";import{subclass as t}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{FeatureDataItem as a}from\"../featureData/interfaces.js\";import{inputAttributesToAttributesMap as i}from\"./symbolizationUtils.js\";import{Attribute as s}from\"../../../../webgl-engine/lib/Attribute.js\";import{VertexAttribute as n}from\"../../../../webgl-engine/lib/VertexAttribute.js\";let l=class extends r{constructor(e){super(),this._context=e,this.materialId=null,this._loaded=!1}get loaded(){return this._loaded}async load(e){this.materialId=e.createMaterial(\"hud\"),e.createDirectRenderer(this.materialId),this._loaded=!0}async add(e,r){if(null==this.materialId)throw new Error(\"expected material not to be null\");await this._provisionFeatureData(e);const{numFeatures:t,tileId:a,renderCoordinates:l,tileCenterRenderCoordinates:m}=e,d=new Float64Array([0,0,1]),c=new Float64Array([255,255,255,255]),p=new Float64Array([24,24]),w=new Float64Array([0,0,0,1]),y=new Float64Array([0,0]),u=new Float64Array([0]),A=new Uint32Array(t);for(let o=0;o<t;++o)A[o]=o;const E=new Uint32Array(t);for(let o=0;o<t;++o)E[o]=0;const I=new s(l,A,3,!0),R=new s(d,E,3,!0),f=new s(y,E,2,!0),h=new s(c,E,4,!0),b=new s(u,E,1,!0),j=new s(p,E,2,!0),O=new s(w,E,4,!0),_=[[n.POSITION,I],[n.NORMAL,R],[n.UV0,f],[n.COLOR,h],[n.ROTATION,b],[n.SIZE,j],[n.CENTEROFFSETANDDISTANCE,O]],D={attributes:i(_),objectAndLayerIdColor:void 0,transformation:o(),materialId:this.materialId};r.addDirectRendererGeometry(a,D,m)}async remove(e,r){r.removeDirectRendererGeometry(e.tileId)}async _provisionFeatureData(e){await e.provision([a.GEOMETRY_RENDER_COORDINATES,a.TILE_CENTER_RENDER_COORDINATES],this._context)}};l=e([t(\"esri.views.3d.layers.graphics.pipeline.symbolization.TestSymbol\")],l);export{l as TestSymbol};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{FeatureData as t}from\"../featureData/FeatureData.js\";import{FeatureDataItem as i}from\"../featureData/interfaces.js\";import{TestObjectSymbol as o}from\"./TestObjectSymbol.js\";import{TestSymbol as a}from\"./TestSymbol.js\";class s{constructor(t){this._symbols=new Map,this._context=t}async load(){this._symbols.set(0,new a(this._context)),this._symbols.set(1,new o(this._context))}async add(t,i){await this._provisionFeatureData(t,this._context);const o=this._partition(t);await Promise.all(o.map((async t=>{const o=await this._provisionSymbol(t.partitionInfo?.index,i);o&&await o.add(t,i)})))}async remove(t,i){const o=t.partitions;if(!o)throw new Error(\"partitioned featureset expected\");await Promise.all(o.map((async t=>{const o=await this._provisionSymbol(t.partitionInfo?.index,i);o&&await o.remove(t,i)})))}async _provisionFeatureData(t,o){await t.provision([i.PARTITION_ID,i.OBJECT_ID],o)}async _provisionSymbol(t,i){if(null==t)return null;const o=this._symbols.get(t);return o?(o.loaded||await o.load(i),o):null}_partition(i){const{numFeatures:o,objectIds:a,partitionIds:s}=i,e=[[],[]];for(let t=0;t<o;++t){const i=a[t]%2;e[i].push(t),s[t]=i}return i.partitions=e.filter((t=>t.length>0)).map(((o,a)=>{const s=o.length,e={index:a,tileIndices:new Uint32Array(o)};return new t(i.tile,s,e)})),i.partitions}}export{s as UniqueValueFeatureRenderer};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as r}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{initializeProjection as e}from\"../projection.js\";import{projectVectorToVector as o}from\"./projectVectorToVector.js\";function t(r,e,t){return!!o(r,e,i,t.spatialReference)&&(t.x=i[0],t.y=i[1],t.z=i[2],!0)}async function c(r,o,c,i){return await e(o,c.spatialReference,null,i),t(r,o,c)}const i=r();export{t as projectVectorToPoint,c as projectVectorToPointAsync};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as t}from\"../../core/libs/gl-matrix-2/math/mat4.js\";import{i as e,f as n,c as o,n as r,e as i}from\"../../chunks/vec32.js\";import{create as u}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getReferenceEllipsoid as a}from\"../ellipsoidUtils.js\";import s from\"../SpatialReference.js\";import{getSphericalPCPF as c}from\"../spatialReferenceEllipsoidUtils.js\";import{Axis as l}from\"./Axis.js\";import{f,b as p}from\"../../chunks/boundedPlane.js\";import{f as m,s as v}from\"../../chunks/sphere.js\";function h(t){const{value:e,operations:n}=t;return{operations:n,value:n.create(e)}}function j(t,e,n){return t.operations.setExtent(t.value,e,n.value),n}function d(t,e){return t.operations.getExtent(t.value,e),e}function x(t){return{operations:t,value:t.create()}}function A(t,e,n=x(t)){return n.operations=t,t.copy(e,n.value),n}function b(t){return A(v,m(0,0,0,a(t).radius))}const g=2**50;function P(){return A(p,f([0,0,0],[g,0,0],[0,g,0]))}function R(t,e,n){return t.operations.axisAt(t.value,e,l.Z,n)}function S(t,e,n,o){return t.operations.axisAt(t.value,e,n,o)}function k(t,e,n){return t.operations.intersectRay(t.value,e,n)}function y(t,e,n){return t.operations.closestPoint(t.value,e,n)}function E(t,e,n){return t.operations.intersectRayClosestSilhouette(t.value,e,n)}function C(t,e,n){return t.operations.closestPointOnSilhouette(t.value,e,n)}function U(t,e){return t.operations.distanceToSilhouette(t.value,e)}function G(t,e){return t.operations.altitudeAt(t.value,e)}function O(t,e,n,o){return t.operations.setAltitudeAt(t.value,e,n,o)}function T(n,o,r,i){return o!==i&&t(i,o),e(q,i[12],i[13],i[14]),O(n,q,r,q),i[12]=q[0],i[13]=q[1],i[14]=q[2],i}function Z(t,e,n){return t.operations.elevate(t.value,e,n.value)}const q=u();function w(t,e,o,r,i){return i[0]=n(t,e),i[1]=n(t,o),i[2]=n(t,r),i}function z(t,e,n,u,a){o(n,t),o(D,e),r(D,D),i(u,D,n),i(a,u,n)}function B(t,e){return t?c(e):e.isGeographic?s.PlateCarree:e}const D=u();export{G as altitudeAt,S as axisAt,y as closestPoint,C as closestPointOnSilhouette,z as coordinateSystemFromOneAxisAndNormalVector,h as create,x as createFromOperations,b as createGlobal,P as createLocal,U as distanceToSilhouette,Z as elevate,A as fromValues,d as getExtent,k as intersectRay,E as intersectRayClosestSilhouette,R as normalAt,B as renderSRFromViewSR,O as setAltitudeAt,T as setAltitudeOfTransformation,j as setExtent,w as vectorCoordinates};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t){return\"point\"===t.type}export{t as isDehydratedPoint};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{rad2deg as t}from\"../../../core/mathUtils.js\";import{getMetersPerUnitForSR as e,getMetersPerCartesianUnitForSR as o}from\"../../../core/unitUtils.js\";import{set as r}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{c as i}from\"../../../chunks/vec32.js\";import{getReferenceEllipsoid as s}from\"../../../geometry/ellipsoidUtils.js\";import{getSphericalPCPF as n}from\"../../../geometry/spatialReferenceEllipsoidUtils.js\";import{projectPointToVector as a}from\"../../../geometry/projection/projectPointToVector.js\";import{projectVectorToPoint as m}from\"../../../geometry/projection/projectVectorToPoint.js\";import{projectVectorToVector as c}from\"../../../geometry/projection/projectVectorToVector.js\";import{create as l}from\"../../../geometry/support/aaBoundingRect.js\";import{Axis as p}from\"../../../geometry/support/Axis.js\";import{create as d,setExtent as h,getExtent as u,altitudeAt as f,setAltitudeAt as y,setAltitudeOfTransformation as g,normalAt as j,axisAt as S,elevate as _,intersectRayClosestSilhouette as w,intersectRay as A,createGlobal as P,createLocal as C}from\"../../../geometry/support/coordinateSystem.js\";import{intersectRay as R}from\"../../../geometry/support/plane.js\";import{angleAroundAxis as M}from\"../../../geometry/support/vector.js\";import{sv3d as U}from\"../../../geometry/support/vectorStacks.js\";import{isDehydratedPoint as v}from\"../../../layers/graphics/dehydratedFeatureUtils.js\";import{ViewingMode as x}from\"../../ViewingMode.js\";class B{constructor(t,e,o,r){this.viewingMode=t,this.spatialReference=e,this.unitInMeters=o,this._coordinateSystem=r,this._tmpCoordinateSystem=d(r),this.referenceEllipsoid=s(e),this.sphericalPCPF=n(e)}set extent(t){t&&h(this._coordinateSystem,t,this._coordinateSystem)}get extent(){return u(this._coordinateSystem,l())}getAltitude(t){return f(this._coordinateSystem,t)}setAltitude(t,e,o=t){return y(this._coordinateSystem,o,e,t)}setAltitudeOfTransformation(t,e){g(this._coordinateSystem,e,t,e)}worldUpAtPosition(t,e){return j(this._coordinateSystem,t,e)}worldBasisAtPosition(t,e,o){return S(this._coordinateSystem,t,e,o)}basisMatrixAtPosition(t,e){const o=this.worldBasisAtPosition(t,p.X,U.get()),i=this.worldBasisAtPosition(t,p.Y,U.get()),s=this.worldBasisAtPosition(t,p.Z,U.get());return r(e,o[0],o[1],o[2],0,i[0],i[1],i[2],0,s[0],s[1],s[2],0,0,0,0,1),e}headingAtPosition(e,o){const r=this.worldUpAtPosition(e,U.get()),i=this.worldBasisAtPosition(e,p.Y,U.get()),s=M(o,i,r);return t(s)}intersectManifoldClosestSilhouette(t,e,o){return _(this._coordinateSystem,e,this._tmpCoordinateSystem),w(this._tmpCoordinateSystem,t,o),o}intersectManifold(t,e,o){_(this._coordinateSystem,e,this._tmpCoordinateSystem);const r=U.get();return A(this._tmpCoordinateSystem,t,r)?i(o,r):null}intersectInfiniteManifold(t,e,o){if(this.viewingMode===x.Global)return this.intersectManifold(t,e,o);_(this._coordinateSystem,e,this._tmpCoordinateSystem);const r=this._tmpCoordinateSystem.value,s=U.get();return R(r.plane,t,s)?i(o,s):null}toRenderCoords(t,e,o){return v(t)?a(t,e,this.spatialReference):c(t,e,o,this.spatialReference)}fromRenderCoords(t,e,o=null){return v(e)?(null!=o&&(e.spatialReference=o),m(t,this.spatialReference,e)?e:null):c(t,this.spatialReference,e,o)?e:null}static create(t,o){switch(t){case x.Local:return new B(x.Local,o,e(o),C());case x.Global:return new B(x.Global,o,1,P(o))}}static renderUnitScaleFactor(t,e){return o(t)/o(e)}}export{B as RenderCoordsHelper};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{FeatureData as e}from\"../featureData/FeatureData.js\";import{UniqueValueFeatureRenderer as t}from\"./UniqueValueFeatureRenderer.js\";import{RenderCoordsHelper as r}from\"../../../../support/RenderCoordsHelper.js\";class a{constructor(e){this._tileFeatureData=new Map,this._context={viewSpatialReference:e.viewSpatialReference,renderSpatialReference:e.renderSpatialReference,renderCoordsHelper:r.create(e.viewingMode,e.renderSpatialReference)}}async add(e,r){this._featureRenderer||(this._featureRenderer=new t(this._context),await this._featureRenderer.load());const a=this._addTileFeatureData(e);await this._featureRenderer.add(a,r)}async remove(e,t){const r=this._getFeatureSetFromTileId(e);r&&(this._featureRenderer&&this._featureRenderer.remove(r,t),this._removeTileFeatureData(e))}_getFeatureSetFromTileId(e){return this._tileFeatureData.get(e)}_addTileFeatureData(t){const r=t.descriptor.id,a=t.pages.reduce(((e,{featureCount:t})=>e+t),0),i=new e(t,a);return this._tileFeatureData.set(r,i),i}_removeTileFeatureData(e){const t=this._tileFeatureData.get(e);t&&(t.dispose(),this._tileFeatureData.delete(e))}}export{a as Symbolizer};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/Evented.js\";import{throwIfAborted as r}from\"../../../../../core/promiseUtils.js\";import{watch as i,initial as s}from\"../../../../../core/reactiveUtils.js\";import{property as n}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../../geometry/SpatialReference.js\";import{QueryEngine as u}from\"../../../../../layers/graphics/data/QueryEngine.js\";import l from\"../../../../../rest/support/Query.js\";import{Tile3DManager as c}from\"./Tile3DManager.js\";import{TiledFeatureStore as d}from\"./featureSet/TiledFeatureStore.js\";import{Tile3DFetcher as m}from\"./fetching/Tile3DFetcher.js\";import{RenderCommandContext as h}from\"./rendering/RenderCommandContext.js\";import{Symbolizer as y}from\"./symbolization/Symbolizer.js\";let p=class extends t.EventedAccessor{constructor(){super(...arguments),this.remoteClient=null,this._featureStore=new d,this._tileManager=new c({addTile:(e,t)=>this._addTile(e,t),removeTiles:e=>this._removeTiles(e)}),this._renderCommandContext=null,this._fetcher=null,this._symbolizer=null,this._queryEngine=null,this._defaultQueryJSON=null}get updating(){return this._tileManager.updating}destroy(){this._featureStore.clear(),this._tileManager.destroy()}async setup({viewSpatialReference:e,renderSpatialReference:t,viewingMode:r,baseQuery:n,url:o,objectIdField:c,capabilities:d,fieldsIndex:p,timeInfo:f}){this._renderCommandContext=new h({viewingMode:r,dispatchRenderCommandsCallback:(e,t)=>this.remoteClient.invoke(\"dispatchRenderCommands\",e,{transferList:t})});const g=a.fromJSON(e),S=a.fromJSON(t);return this._fetcher=new m(g,l.fromJSON(n),o,c,d),this._symbolizer=new y({viewSpatialReference:g,renderSpatialReference:S,viewingMode:r}),this._queryEngine=new u({hasZ:!0,hasM:!1,geometryType:\"esriGeometryPoint\",objectIdField:c,fieldsIndex:p,availableFields:[c],spatialReference:e,featureStore:this._featureStore,timeInfo:f}),this._defaultQueryJSON=new l({outSpatialReference:g}).toJSON(),this.addHandles(i((()=>this.updating),(async e=>{this.emit(\"notify-updating\",{updating:e})})),s),_}async executeQuery(e,t){return{result:await this._queryEngine.executeQuery(this._ensureQuery(e),t)}}async executeQueryForIds(e,t){const r=await this._queryEngine.executeQueryForIdSet(this._ensureQuery(e),t);return{result:Array.from(r)}}async executeQueryForCount(e,t){return{result:await this._queryEngine.executeQueryForCount(this._ensureQuery(e),t)}}async executeQueryForExtent(e,t){return{result:await this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t)}}async executeQueryForLatestObservations(e,t){return{result:await this._queryEngine.executeQueryForLatestObservations(this._ensureQuery(e),t)}}async onTileTreeChange(e){return await this._tileManager.onTileTreeChange(e),_}async _addTile(e,t){const i=await this._fetcher.fetch(e,t);r(t),this._featureStore.addTile(i);const s=this._renderCommandContext.createEncoder();return await this._symbolizer.add(i,s),await s.dispatch(),i}async _removeTiles(e){const t=this._renderCommandContext.createEncoder(),r=this._featureStore,i=this._symbolizer;for(const s of e)r.removeTile(s.tileId),await i.remove(s.tileId,t);await t.dispatch()}_ensureQuery(e){return e??this._defaultQueryJSON}};e([n()],p.prototype,\"updating\",null),p=e([o(\"esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorker\")],p);const f=p,_={result:void 0};export{f as default};\n"],
  "mappings": "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",
  "names": ["a", "b", "e", "s", "o", "t", "i", "r", "c", "n", "e", "t", "o", "i", "s", "d", "a", "r", "h", "E", "s", "t", "u", "e", "r", "n", "g", "t", "s", "o", "i", "m", "a", "h", "E", "c", "d", "f", "p", "l", "x", "b", "I", "w", "_", "k", "j", "i", "a", "n", "c", "e", "t", "r", "o", "s", "u", "p", "l", "h", "d", "r", "t", "e", "h", "t", "e", "o", "i", "s", "r", "t", "s", "n", "b", "e", "r", "c", "u", "o", "t", "s", "e", "r", "i", "a", "O", "i", "n", "e", "E", "I", "t", "o", "e", "r", "n", "s", "i", "t", "e", "s", "t", "n", "s", "t", "h", "e", "o", "a", "s", "h", "t", "o", "e", "r", "s", "r", "x", "u", "e", "i", "r", "t", "n", "s", "o", "a", "I", "W", "D", "l", "h", "f", "c", "m", "d", "z", "g", "H", "V", "R", "p", "M", "A", "N", "y", "L", "T", "P", "m", "u", "e", "i", "r", "n", "t", "o", "a", "s", "A", "l", "V", "t", "a", "n", "r", "r", "t", "e", "r", "t", "b", "t", "r", "e", "H", "n", "c", "o", "m", "i", "a", "p", "s", "h", "u", "l", "N", "E", "P", "Z", "X", "f", "z", "g", "A", "L", "r", "i", "s", "E", "F", "e", "t", "c", "t", "e", "i", "l", "x", "f", "s", "r", "u", "F", "C", "t", "e", "H", "R", "b", "l", "u", "h", "c", "x", "d", "s", "G", "i", "y", "D", "N", "a", "o", "n", "r", "g", "n", "e", "r", "t", "T", "E", "s", "i", "m", "e", "i", "t", "c", "r", "s", "a", "B", "g", "M", "r", "t", "o", "u", "s", "R", "z", "A", "i", "n", "e", "b", "v", "a", "h", "l", "G", "t", "B", "M", "n", "R", "r", "o", "f", "t", "e", "r", "s", "o", "n", "i", "a", "d", "u", "c", "E", "F", "O", "m", "l", "p", "y", "G", "a", "e", "r", "i", "s", "o", "d", "c", "n", "t", "l", "p", "F", "l", "t", "n", "r", "i", "o", "s", "G", "e", "t", "r", "q", "o", "i", "A", "b", "g", "n", "a", "f", "s", "C", "c", "Y", "E", "J", "F", "K", "P", "l", "h", "d", "u", "W", "$", "Z", "O", "_", "z", "H", "N", "n", "e", "t", "r", "s", "o", "c", "i", "u", "c", "e", "s", "t", "i", "u", "d", "l", "h", "r", "n", "o", "a", "q", "e", "o", "a", "t", "u", "s", "i", "c", "C", "r", "n", "h", "M", "f", "l", "m", "x", "T", "p", "b", "w", "n", "r", "t", "t", "c", "c", "n", "e", "o", "t", "H", "E", "r", "l", "f", "T", "g", "h", "j", "b", "p", "i", "r", "a", "e", "d", "i", "n", "e", "t", "A", "a", "r", "i", "o", "c", "l", "O", "T", "b", "E", "I", "_", "R", "C", "x", "P", "s", "y", "D", "g", "m", "p", "f", "h", "u", "d", "S", "N", "H", "B", "y", "b", "e", "r", "s", "n", "a", "l", "d", "_", "t", "i", "m", "c", "u", "v", "o", "R", "N", "B", "n", "r", "o", "s", "l", "f", "u", "a", "m", "c", "b", "i", "h", "d", "e", "d", "e", "n", "a", "B", "r", "b", "s", "t", "l", "i", "o", "m", "t", "r", "l", "e", "d", "E", "a", "e", "t", "r", "o", "n", "i", "c", "E", "s", "f", "l", "s", "t", "e", "r", "o", "a", "E", "i", "c", "D", "t", "s", "e", "r", "n", "i", "o", "l", "u", "a", "c", "m", "n", "t", "r", "s", "n", "t", "c", "o", "r", "u", "F", "t", "v", "z", "r", "Z", "H", "J", "K", "n", "Q", "W", "X", "Y", "c", "A", "_", "W", "X", "Y", "t", "n", "e", "o", "s", "r", "l", "h", "u", "a", "f", "p", "i", "w", "g", "m", "M", "O", "A", "I", "y", "c", "N", "n", "r", "t", "i", "n", "o", "a", "s", "e", "j", "b", "e", "r", "t", "o", "s", "u", "c", "i", "n", "f", "a", "l", "y", "h", "E", "_", "C", "D", "l", "b", "e", "r", "t", "a", "m", "d", "c", "p", "w", "y", "u", "A", "o", "E", "I", "R", "f", "h", "j", "O", "_", "D", "n", "s", "t", "l", "j", "i", "o", "E", "a", "e", "t", "r", "e", "n", "i", "i", "n", "h", "t", "e", "n", "j", "d", "x", "A", "b", "V", "s", "g", "P", "R", "S", "o", "k", "E", "t", "e", "n", "G", "t", "e", "O", "n", "o", "T", "r", "i", "q", "Z", "D", "n", "t", "B", "t", "e", "o", "r", "h", "s", "a", "j", "d", "u", "G", "O", "T", "R", "S", "n", "c", "i", "Z", "E", "k", "l", "x", "P", "b", "a", "e", "B", "r", "s", "t", "i", "p", "d", "a", "e", "t", "r", "n", "o", "c", "f", "g", "S", "b", "V", "_", "i", "s"]
}
