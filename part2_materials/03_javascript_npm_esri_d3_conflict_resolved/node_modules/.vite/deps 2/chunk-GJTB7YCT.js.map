{
  "version": 3,
  "sources": ["../../@arcgis/core/symbols/support/styleCache.js", "../../@arcgis/core/symbols/support/styleUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst e=new Map;export{e as cachedStyles};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import has from\"../../core/has.js\";import{throwIfAbortError as r}from\"../../core/promiseUtils.js\";import{normalize as o,removeFile as s}from\"../../core/urlUtils.js\";import n from\"../../portal/Portal.js\";import l from\"../../portal/PortalQueryParams.js\";import{cachedStyles as a}from\"./styleCache.js\";async function f(e,t){try{return{data:(await p(e,t)).data,baseUrl:s(e),styleUrl:e}}catch(o){return r(o),null}}function u(e,t,r){const o=null!=t.portal?t.portal:n.getDefault();let s;const l=`${o.url} - ${o.user?.username} - ${e}`,f=a.get(l);if(f)return f;const u=c(e,o,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl??\"\",styleName:e})));return a.set(l,u),u}function c(e,r,o){return r.load(o).then((()=>{const t=new l({disableExtraQuery:!0,query:`owner:${d} AND type:${b} AND typekeywords:\"${e}\"`});return r.queryItems(t,o)})).then((({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r))for(const e of r){const t=e.typeKeywords?.some((e=>e.toLowerCase()===n));if(t&&e.type===b&&e.owner===d){s=e;break}}if(!s)throw new t(\"symbolstyleutils:style-not-found\",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function i(e,r,o){return null!=e?.styleUrl?f(e.styleUrl,o):null!=e?.styleName?u(e.styleName,r,o):Promise.reject(new t(\"symbolstyleutils:style-url-and-name-missing\",\"Either styleUrl or styleName is required to resolve a style\"))}function m(e){return null===e||\"CIMSymbolReference\"===e.type?e:{type:\"CIMSymbolReference\",symbol:e}}function y(e,t,r=[\"gltf\"]){if(\"cimRef\"===t)return encodeURI(e.cimRef);if(e.formatInfos&&!has(\"enable-feature:force-wosr\"))for(const o of r){const t=e.formatInfos.find((e=>e.type===o));if(t)return t.href}return encodeURI(e.webRef)}function p(t,r){const s={responseType:\"json\",query:{f:\"json\"},...r};return e(o(t),s)}const d=\"esri_en\",b=\"Style\",h=\"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";export{h as Style2DUrlTemplate,i as fetchStyle,m as makeCIMSymbolRef,p as requestJSON,y as symbolUrlFromStyleItem};\n"],
  "mappings": "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",
  "names": ["e", "s", "f", "u", "c", "t", "b", "r"]
}
