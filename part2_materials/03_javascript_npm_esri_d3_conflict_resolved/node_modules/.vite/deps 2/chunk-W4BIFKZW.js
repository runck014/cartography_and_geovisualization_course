import {
  m,
  p
} from "./chunk-QJXYURT2.js";
import {
  D,
  G,
  L,
  P,
  U,
  o
} from "./chunk-KV3S4QI2.js";
import {
  a
} from "./chunk-ECMDQ4LS.js";

// node_modules/@arcgis/core/views/webgl/rasterUtils.js
function f(e, o2, f2 = "nearest", c2 = false) {
  const m3 = !(c2 && "u8" === o2.pixelType), l2 = m3 ? U.FLOAT : U.UNSIGNED_BYTE, _2 = null == o2.pixels || 0 === o2.pixels.length ? null : m3 ? o2.getAsRGBAFloat() : o2.getAsRGBA(), g2 = e.capabilities.textureFloatLinear, p3 = new p();
  return p3.width = o2.width, p3.height = o2.height, p3.internalFormat = m3 ? P.RGBA32F : G.RGBA, p3.samplingMode = !g2 || "bilinear" !== f2 && "cubic" !== f2 ? L.NEAREST : L.LINEAR, p3.dataType = l2, p3.wrapMode = D.CLAMP_TO_EDGE, new m(e, p3, _2);
}
function c(e, r) {
  const { spacing: o2, offsets: f2, coefficients: c2, size: [m3, l2] } = r, _2 = o2[0] > 1, g2 = new p();
  g2.width = _2 ? 4 * m3 : m3, g2.height = l2, g2.internalFormat = P.RGBA32F, g2.dataType = U.FLOAT, g2.samplingMode = L.NEAREST, g2.wrapMode = D.CLAMP_TO_EDGE;
  const p3 = new Float32Array(_2 ? m3 * l2 * 16 : 2 * f2.length);
  if (_2 && null != c2) for (let t = 0, n = 0; t < c2.length; t++) p3[n++] = c2[t], t % 3 == 2 && (p3[n++] = 1);
  else for (let t = 0; t < l2; t++) for (let e2 = 0; e2 < m3; e2++) {
    const n = 4 * (t * m3 + e2), r2 = 2 * (e2 * l2 + t);
    p3[n] = f2[r2], p3[n + 1] = f2[r2 + 1], p3[n + 3] = -1 === f2[r2] ? 0 : 1;
  }
  return new m(e, g2, p3);
}
function m2(e, t) {
  const n = new p();
  return n.internalFormat = G.RGBA, n.width = t.length / 4, n.height = 1, n.samplingMode = L.NEAREST, n.wrapMode = D.CLAMP_TO_EDGE, new m(e, n, t);
}
function l(t, n, r, a2 = 1, i = true) {
  return { u_flipY: i, u_applyTransform: !!t, u_opacity: a2, u_transformSpacing: t ? t.spacing : a, u_transformGridSize: t ? t.size : a, u_targetImageSize: n, u_srcImageSize: r };
}
function _(e, t) {
  return { u_colormapOffset: t || 0, u_colormapMaxIndex: e ? e.length / 4 - 1 : 0 };
}
function g(e, t) {
  return { u_scale: e, u_offset: t };
}
function p2(e) {
  return { u_bandCount: e.bandCount, u_minOutput: e.outMin, u_maxOutput: e.outMax, u_minCutOff: e.minCutOff, u_maxCutOff: e.maxCutOff, u_factor: e.factor, u_useGamma: e.useGamma, u_gamma: e.gamma, u_gammaCorrection: e.gammaCorrection };
}
function A(e) {
  return { u_hillshadeType: e.hillshadeType, u_sinZcosAs: e.sinZcosAs, u_sinZsinAs: e.sinZsinAs, u_cosZs: e.cosZs, u_weights: e.weights, u_factor: e.factor, u_minValue: e.minValue, u_maxValue: e.maxValue };
}
function T(e, t) {
  const n = e.gl, r = t.glName, a2 = /* @__PURE__ */ new Map();
  if (null == r) return a2;
  const i = n.getProgramParameter(r, n.ACTIVE_UNIFORMS);
  let o2;
  for (let s = 0; s < i; s++) o2 = n.getActiveUniform(r, s), o2 && a2.set(o2.name, { location: n.getUniformLocation(r, o2.name), info: o2 });
  return a2;
}
function h(e, t, n) {
  Object.keys(n).forEach((r) => {
    const a2 = t.get(r) || t.get(r + "[0]");
    a2 && E(e, r, n[r], a2);
  });
}
function O(e, t, n, r) {
  n.length === r.length && (r.some((e2) => null == e2) || n.some((e2) => null == e2) || n.forEach((n2, a2) => {
    t.setUniform1i(n2, a2), e.bindTexture(r[a2], a2);
  }));
}
function E(e, t, n, r) {
  if (null === r || null == n) return false;
  const { info: a2 } = r;
  switch (a2.type) {
    case o.FLOAT:
      a2.size > 1 ? e.setUniform1fv(t, n) : e.setUniform1f(t, n);
      break;
    case o.FLOAT_VEC2:
      e.setUniform2fv(t, n);
      break;
    case o.FLOAT_VEC3:
      e.setUniform3fv(t, n);
      break;
    case o.FLOAT_VEC4:
      e.setUniform4fv(t, n);
      break;
    case o.FLOAT_MAT3:
      e.setUniformMatrix3fv(t, n);
      break;
    case o.FLOAT_MAT4:
      e.setUniformMatrix4fv(t, n);
      break;
    case o.INT:
      a2.size > 1 ? e.setUniform1iv(t, n) : e.setUniform1i(t, n);
      break;
    case o.BOOL:
      e.setUniform1i(t, n ? 1 : 0);
      break;
    case o.INT_VEC2:
    case o.BOOL_VEC2:
      e.setUniform2iv(t, n);
      break;
    case o.INT_VEC3:
    case o.BOOL_VEC3:
      e.setUniform3iv(t, n);
      break;
    case o.INT_VEC4:
    case o.BOOL_VEC4:
      e.setUniform4iv(t, n);
      break;
    default:
      return false;
  }
  return true;
}

export {
  f,
  c,
  m2 as m,
  l,
  _,
  g,
  p2 as p,
  A,
  T,
  h,
  O
};
//# sourceMappingURL=chunk-W4BIFKZW.js.map
