import {
  l
} from "./chunk-LVWOO3MP.js";
import {
  Z2 as Z,
  c as c2,
  m,
  r as r3,
  x,
  y,
  y2
} from "./chunk-JAIDXJUO.js";
import {
  t
} from "./chunk-X3MAK4EE.js";
import {
  N
} from "./chunk-3FC4BMWX.js";
import {
  Ae,
  Be,
  E,
  K,
  Me,
  Oe,
  Re,
  Se,
  X,
  Y,
  a as a2,
  de,
  ee,
  he,
  ie,
  ne,
  r as r2,
  te,
  we,
  z as z2
} from "./chunk-DP4BKMXB.js";
import {
  A,
  B,
  C,
  D,
  E as E2,
  F,
  H,
  J,
  K as K2,
  L,
  M,
  N as N2,
  O,
  P,
  R,
  S,
  T,
  U as U2,
  V,
  W,
  b as b2,
  d as d2,
  g,
  h,
  j as j2,
  k,
  m as m2,
  p,
  v as v2,
  w as w2,
  x as x2,
  y as y3
} from "./chunk-3UNB76GV.js";
import {
  a,
  c,
  r
} from "./chunk-MBR7IVUG.js";
import {
  f
} from "./chunk-F26LCWNQ.js";
import {
  d,
  u,
  v2 as v
} from "./chunk-VNRDIGVF.js";
import {
  b
} from "./chunk-JU6MEO4D.js";
import {
  j2 as j,
  n,
  w
} from "./chunk-A3J7W53Y.js";
import {
  z
} from "./chunk-DRBJFCLQ.js";
import {
  U,
  i
} from "./chunk-X7VTUWCX.js";

// node_modules/@arcgis/core/portal/support/utils.js
async function r4(r5, t2, s) {
  var _a, _b;
  const u2 = (_a = i) == null ? void 0 : _a.findCredential(r5.restUrl);
  if (!u2) return null;
  if ("loaded" === r5.loadStatus && "" === t2 && ((_b = r5.user) == null ? void 0 : _b.sourceJSON) && false === s) return r5.user.sourceJSON;
  const o = { responseType: "json", query: { f: "json" } };
  if (s && (o.query.returnUserLicenseTypeExtensions = true), "" === t2) {
    const e = await U(r5.restUrl + "/community/self", o);
    if (e.data) {
      const n2 = e.data;
      if (n2 == null ? void 0 : n2.username) return n2;
    }
    return null;
  }
  const i2 = await U(r5.restUrl + "/community/users/" + t2, o);
  if (i2.data) {
    const e = i2.data;
    return e.error ? null : e;
  }
  return null;
}

// node_modules/@arcgis/core/arcade/functions/geomasync.js
function An(n2, t2, i2) {
  if (ie(n2, 2, 2, t2, i2), n2[0] instanceof n && n2[1] instanceof n) ;
  else if (n2[0] instanceof n && null === n2[1]) ;
  else if (n2[1] instanceof n && null === n2[0]) ;
  else if (null !== n2[0] || null !== n2[1]) throw new a2(t2, r2.InvalidParameter, i2);
}
async function Fn(n2, t2) {
  if ("polygon" !== n2.type && "polyline" !== n2.type && "extent" !== n2.type) return 0;
  let e = 1;
  if (n2.spatialReference.vcsWkid || n2.spatialReference.latestVcsWkid) {
    e = c2(n2.spatialReference) / z(n2.spatialReference);
  }
  let r5 = 0;
  if ("polyline" === n2.type) for (const a3 of n2.paths) for (let n3 = 1; n3 < a3.length; n3++) r5 += r3(a3[n3], a3[n3 - 1], e);
  else if ("polygon" === n2.type) for (const a3 of n2.rings) {
    for (let n3 = 1; n3 < a3.length; n3++) r5 += r3(a3[n3], a3[n3 - 1], e);
    (a3[0][0] !== a3[a3.length - 1][0] || a3[0][1] !== a3[a3.length - 1][1] || void 0 !== a3[0][2] && a3[0][2] !== a3[a3.length - 1][2]) && (r5 += r3(a3[0], a3[a3.length - 1], e));
  }
  else "extent" === n2.type && (r5 += 2 * r3([n2.xmin, n2.ymin, 0], [n2.xmax, n2.ymin, 0], e), r5 += 2 * r3([n2.xmin, n2.ymin, 0], [n2.xmin, n2.ymax, 0], e), r5 *= 2, r5 += 4 * Math.abs(Y(n2.zmax, 0) * e - Y(n2.zmin, 0) * e));
  const i2 = new d({ hasZ: false, hasM: false, spatialReference: n2.spatialReference, paths: [[[0, 0], [0, r5]]] });
  return F(i2, t2);
}
function Rn(x3) {
  "async" === x3.mode && (x3.functions.disjoint = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null === i2[0] || null === i2[1] || A(i2[0], i2[1])));
  }, x3.functions.intersects = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null !== i2[0] && null !== i2[1] && h(i2[0], i2[1])));
  }, x3.functions.touches = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null !== i2[0] && null !== i2[1] && S(i2[0], i2[1])));
  }, x3.functions.crosses = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null !== i2[0] && null !== i2[1] && m2(i2[0], i2[1])));
  }, x3.functions.within = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null !== i2[0] && null !== i2[1] && x2(i2[0], i2[1])));
  }, x3.functions.contains = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null !== i2[0] && null !== i2[1] && p(i2[0], i2[1])));
  }, x3.functions.overlaps = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null !== i2[0] && null !== i2[1] && O(i2[0], i2[1])));
  }, x3.functions.equals = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (ie(i2, 2, 2, n2, t2), i2[0] === i2[1] || (i2[0] instanceof n && i2[1] instanceof n ? g(i2[0], i2[1]) : (ee(i2[0]) && ee(i2[1]) || !!(ne(i2[0]) && ne(i2[1]) || te(i2[0]) && te(i2[1]))) && i2[0].equals(i2[1]))));
  }, x3.functions.relate = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, o) => {
      if (o = we(o), ie(o, 3, 3, n2, t2), o[0] instanceof n && o[1] instanceof n) return R(o[0], o[1], de(o[2]));
      if (o[0] instanceof n && null === o[1]) return false;
      if (o[1] instanceof n && null === o[0]) return false;
      if (null === o[0] && null === o[1]) return false;
      throw new a2(n2, r2.InvalidParameter, t2);
    });
  }, x3.functions.intersection = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, i2) => (An(i2 = we(i2), n2, t2), null === i2[0] || null === i2[1] ? null : D(i2[0], i2[1])));
  }, x3.functions.union = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (a3, o, s) => {
      const u2 = [];
      if (0 === (s = we(s)).length) throw new a2(n2, r2.WrongNumberOfParameters, t2);
      if (1 === s.length) if (E(s[0])) {
        const i2 = we(s[0]);
        for (let a4 = 0; a4 < i2.length; a4++) if (null !== i2[a4]) {
          if (!(i2[a4] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
          u2.push(i2[a4]);
        }
      } else {
        if (!X(s[0])) {
          if (s[0] instanceof n) return Ae(c(s[0]), n2.spatialReference);
          if (null === s[0]) return null;
          throw new a2(n2, r2.InvalidParameter, t2);
        }
        {
          const i2 = we(s[0].toArray());
          for (let a4 = 0; a4 < i2.length; a4++) if (null !== i2[a4]) {
            if (!(i2[a4] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
            u2.push(i2[a4]);
          }
        }
      }
      else for (let i2 = 0; i2 < s.length; i2++) if (null !== s[i2]) {
        if (!(s[i2] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
        u2.push(s[i2]);
      }
      return 0 === u2.length ? null : b2(u2);
    });
  }, x3.functions.difference = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, a3) => (An(a3 = we(a3), n2, t2), null === a3[0] ? null : null === a3[1] ? c(a3[0]) : E2(a3[0], a3[1])));
  }, x3.functions.symmetricdifference = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (e, r5, a3) => (An(a3 = we(a3), n2, t2), null === a3[0] && null === a3[1] ? null : null === a3[0] ? c(a3[1]) : null === a3[1] ? c(a3[0]) : k(a3[0], a3[1])));
  }, x3.functions.clip = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, o) => {
      if (o = we(o), ie(o, 2, 2, n2, t2), !(o[1] instanceof w) && null !== o[1]) throw new a2(n2, r2.InvalidParameter, t2);
      if (null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return null === o[1] ? null : y3(o[0], o[1]);
    });
  }, x3.functions.cut = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 2, 2, n2, t2), !(u2[1] instanceof d) && null !== u2[1]) throw new a2(n2, r2.InvalidParameter, t2);
      if (null === u2[0]) return [];
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return null === u2[1] ? [c(u2[0])] : w2(u2[0], u2[1]);
    });
  }, x3.functions.area = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, async (i2, o, u2) => {
      if (ie(u2, 1, 2, n2, t2), null === (u2 = we(u2))[0]) return 0;
      if (K(u2[0])) {
        const i3 = await u2[0].sumArea(r(Y(u2[1], -1)), false, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new a2(n2, r2.Cancelled, t2);
        return i3;
      }
      if (E(u2[0]) || X(u2[0])) {
        const t3 = Me(u2[0], n2.spatialReference);
        return null === t3 ? 0 : W(t3, r(Y(u2[1], -1)));
      }
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return W(u2[0], r(Y(u2[1], -1)));
    });
  }, x3.functions.areageodetic = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, async (i2, o, u2) => {
      if (ie(u2, 1, 2, n2, t2), null === (u2 = we(u2))[0]) return 0;
      if (K(u2[0])) {
        const i3 = await u2[0].sumArea(r(Y(u2[1], -1)), true, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new a2(n2, r2.Cancelled, t2);
        return i3;
      }
      if (E(u2[0]) || X(u2[0])) {
        const t3 = Me(u2[0], n2.spatialReference);
        return null === t3 ? 0 : K2(t3, r(Y(u2[1], -1)));
      }
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return K2(u2[0], r(Y(u2[1], -1)));
    });
  }, x3.functions.length = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, async (i2, a3, u2) => {
      if (ie(u2, 1, 2, n2, t2), null === (u2 = we(u2))[0]) return 0;
      if (K(u2[0])) {
        const i3 = await u2[0].sumLength(a(Y(u2[1], -1)), false, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new a2(n2, r2.Cancelled, t2);
        return i3;
      }
      if (E(u2[0]) || X(u2[0])) {
        const t3 = Oe(u2[0], n2.spatialReference);
        return null === t3 ? 0 : F(t3, a(Y(u2[1], -1)));
      }
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return F(u2[0], a(Y(u2[1], -1)));
    });
  }, x3.functions.length3d = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, u2) => {
      if (ie(u2, 1, 2, n2, t2), null === (u2 = we(u2))[0]) return 0;
      if (E(u2[0]) || X(u2[0])) {
        const t3 = Oe(u2[0], n2.spatialReference);
        return null === t3 ? 0 : true === t3.hasZ ? Fn(t3, a(Y(u2[1], -1))) : F(t3, a(Y(u2[1], -1)));
      }
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return true === u2[0].hasZ ? Fn(u2[0], a(Y(u2[1], -1))) : F(u2[0], a(Y(u2[1], -1)));
    });
  }, x3.functions.lengthgeodetic = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, async (i2, a3, u2) => {
      if (ie(u2, 1, 2, n2, t2), null === (u2 = we(u2))[0]) return 0;
      if (K(u2[0])) {
        const i3 = await u2[0].sumLength(a(Y(u2[1], -1)), true, n2.abortSignal);
        if (n2.abortSignal.aborted) throw new a2(n2, r2.Cancelled, t2);
        return i3;
      }
      if (E(u2[0]) || X(u2[0])) {
        const t3 = Oe(u2[0], n2.spatialReference);
        return null === t3 ? 0 : M(t3, a(Y(u2[1], -1)));
      }
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return M(u2[0], a(Y(u2[1], -1)));
    });
  }, x3.functions.distance = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, u2) => {
      u2 = we(u2), ie(u2, 2, 3, n2, t2);
      let c3 = u2[0];
      (E(u2[0]) || X(u2[0])) && (c3 = Re(u2[0], n2.spatialReference));
      let f2 = u2[1];
      if ((E(u2[1]) || X(u2[1])) && (f2 = Re(u2[1], n2.spatialReference)), !(c3 instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      if (!(f2 instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return d2(c3, f2, a(Y(u2[2], -1)));
    });
  }, x3.functions.distancegeodetic = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, u2) => {
      u2 = we(u2), ie(u2, 2, 3, n2, t2);
      const c3 = u2[0], f2 = u2[1];
      if (!(c3 instanceof j)) throw new a2(n2, r2.InvalidParameter, t2);
      if (!(f2 instanceof j)) throw new a2(n2, r2.InvalidParameter, t2);
      const d3 = new d({ paths: [], spatialReference: c3.spatialReference });
      return d3.addPath([c3, f2]), M(d3, a(Y(u2[2], -1)));
    });
  }, x3.functions.densify = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, u2) => {
      if (u2 = we(u2), ie(u2, 2, 3, n2, t2), null === u2[0]) return null;
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      const c3 = he(u2[1]);
      if (isNaN(c3)) throw new a2(n2, r2.InvalidParameter, t2);
      if (c3 <= 0) throw new a2(n2, r2.InvalidParameter, t2);
      return u2[0] instanceof v || u2[0] instanceof d ? C(u2[0], c3, a(Y(u2[2], -1))) : u2[0] instanceof w ? C(v.fromExtent(u2[0]), c3, a(Y(u2[2], -1))) : u2[0];
    });
  }, x3.functions.densifygeodetic = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, u2) => {
      if (u2 = we(u2), ie(u2, 2, 3, n2, t2), null === u2[0]) return null;
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      const c3 = he(u2[1]);
      if (isNaN(c3)) throw new a2(n2, r2.InvalidParameter, t2);
      if (c3 <= 0) throw new a2(n2, r2.InvalidParameter, t2);
      return u2[0] instanceof v || u2[0] instanceof d ? U2(u2[0], c3, a(Y(u2[2], -1))) : u2[0] instanceof w ? U2(v.fromExtent(u2[0]), c3, a(Y(u2[2], -1))) : u2[0];
    });
  }, x3.functions.generalize = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, u2) => {
      if (u2 = we(u2), ie(u2, 2, 4, n2, t2), null === u2[0]) return null;
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      const c3 = he(u2[1]);
      if (isNaN(c3)) throw new a2(n2, r2.InvalidParameter, t2);
      return B(u2[0], c3, Se(Y(u2[2], true)), a(Y(u2[3], -1)));
    });
  }, x3.functions.buffer = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (a3, u2, c3) => {
      if (c3 = we(c3), ie(c3, 2, 3, n2, t2), null === c3[0]) return null;
      if (!(c3[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      const f2 = he(c3[1]);
      if (isNaN(f2)) throw new a2(n2, r2.InvalidParameter, t2);
      return 0 === f2 ? c(c3[0]) : L(c3[0], f2, a(Y(c3[2], -1)));
    });
  }, x3.functions.buffergeodetic = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (a3, u2, c3) => {
      if (c3 = we(c3), ie(c3, 2, 3, n2, t2), null === c3[0]) return null;
      if (!(c3[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      const f2 = he(c3[1]);
      if (isNaN(f2)) throw new a2(n2, r2.InvalidParameter, t2);
      return 0 === f2 ? c(c3[0]) : P(c3[0], f2, a(Y(c3[2], -1)));
    });
  }, x3.functions.offset = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, u2) => {
      if (u2 = we(u2), ie(u2, 2, 6, n2, t2), null === u2[0]) return null;
      if (!(u2[0] instanceof v || u2[0] instanceof d)) throw new a2(n2, r2.InvalidParameter, t2);
      const c3 = he(u2[1]);
      if (isNaN(c3)) throw new a2(n2, r2.InvalidParameter, t2);
      const f2 = he(Y(u2[4], 10));
      if (isNaN(f2)) throw new a2(n2, r2.InvalidParameter, t2);
      const w3 = he(Y(u2[5], 0));
      if (isNaN(w3)) throw new a2(n2, r2.InvalidParameter, t2);
      return v2(u2[0], c3, a(Y(u2[2], -1)), de(Y(u2[3], "round")).toLowerCase(), f2, w3);
    });
  }, x3.functions.rotate = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, o) => {
      if (o = we(o), ie(o, 2, 3, n2, t2), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      const u2 = o[0] instanceof w ? v.fromExtent(o[0]) : o[0], c3 = he(o[1]);
      if (isNaN(c3)) throw new a2(n2, r2.InvalidParameter, t2);
      const f2 = Y(o[2], null);
      if (null === f2) return H(u2, c3);
      if (f2 instanceof j) return H(u2, c3, f2);
      throw new a2(n2, r2.InvalidParameter, t2);
    });
  }, x3.functions.centroid = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 1, 1, n2, t2), null === u2[0]) return null;
      let c3 = u2[0];
      if ((E(u2[0]) || X(u2[0])) && (c3 = Re(u2[0], n2.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return c3 instanceof j ? Ae(c(c3), n2.spatialReference) : c3 instanceof v ? c3.centroid : c3 instanceof d ? y(c3) : c3 instanceof u ? m(c3) : c3 instanceof w ? c3.center : null;
    });
  }, x3.functions.measuretocoordinate = function(n2, i2) {
    return x3.standardFunctionAsync(n2, i2, (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 2, 2, n2, i2), null === u2[0]) return null;
      let c3 = u2[0];
      if ((E(u2[0]) || X(u2[0])) && (c3 = Oe(u2[0], n2.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(n2, r2.InvalidParameter, i2);
      if (!(c3 instanceof d)) throw new a2(n2, r2.InvalidParameter, i2);
      if (z2(false === u2[1])) throw new a2(n2, r2.InvalidParameter, i2);
      const f2 = y2(c3, u2[1]);
      return f2 ? N.convertObjectToArcadeDictionary(f2, Be(n2), false, true) : null;
    });
  }, x3.functions.pointtocoordinate = function(n2, i2) {
    return x3.standardFunctionAsync(n2, i2, (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 2, 2, n2, i2), null === u2[0]) return null;
      let c3 = u2[0];
      if ((E(u2[0]) || X(u2[0])) && (c3 = Oe(u2[0], n2.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(n2, r2.InvalidParameter, i2);
      if (!(c3 instanceof d)) throw new a2(n2, r2.InvalidParameter, i2);
      const f2 = u2[1];
      if (null === f2) return null;
      if (!(f2 instanceof j)) throw new a2(n2, r2.InvalidParameter, i2);
      if (z2(false === u2[1])) throw new a2(n2, r2.InvalidParameter, i2);
      const d3 = x(c3, f2);
      return d3 ? N.convertObjectToArcadeDictionary(d3, Be(n2), false, true) : null;
    });
  }, x3.functions.distancetocoordinate = function(n2, i2) {
    return x3.standardFunctionAsync(n2, i2, (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 2, 2, n2, i2), null === u2[0]) return null;
      let c3 = u2[0];
      if ((E(u2[0]) || X(u2[0])) && (c3 = Oe(u2[0], n2.spatialReference)), null === c3) return null;
      if (!(c3 instanceof n)) throw new a2(n2, r2.InvalidParameter, i2);
      if (!(c3 instanceof d)) throw new a2(n2, r2.InvalidParameter, i2);
      if (z2(false === u2[1])) throw new a2(n2, r2.InvalidParameter, i2);
      const f2 = Z(c3, u2[1]);
      return f2 ? N.convertObjectToArcadeDictionary(f2, Be(n2), false, true) : null;
    });
  }, x3.functions.multiparttosinglepart = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, async (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 1, 1, n2, t2), null === u2[0]) return null;
      if (!(u2[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      if (u2[0] instanceof j) return [Ae(c(u2[0]), n2.spatialReference)];
      if (u2[0] instanceof w) return [Ae(c(u2[0]), n2.spatialReference)];
      const c3 = await N2(u2[0]);
      if (c3 instanceof v) {
        const n3 = [], t3 = [];
        for (let e = 0; e < c3.rings.length; e++) if (c3.isClockwise(c3.rings[e])) {
          const t4 = f({ rings: [c3.rings[e]], hasZ: true === c3.hasZ, hasM: true === c3.hasM, spatialReference: c3.spatialReference.toJSON() });
          n3.push(t4);
        } else t3.push({ ring: c3.rings[e], pt: c3.getPoint(e, 0) });
        for (let e = 0; e < t3.length; e++) for (let r5 = 0; r5 < n3.length; r5++) if (n3[r5].contains(t3[e].pt)) {
          n3[r5].addRing(t3[e].ring);
          break;
        }
        return n3;
      }
      if (c3 instanceof d) {
        const n3 = [];
        for (let t3 = 0; t3 < c3.paths.length; t3++) {
          const e = f({ paths: [c3.paths[t3]], hasZ: true === c3.hasZ, hasM: true === c3.hasM, spatialReference: c3.spatialReference.toJSON() });
          n3.push(e);
        }
        return n3;
      }
      if (u2[0] instanceof u) {
        const t3 = [], e = Ae(c(u2[0]), n2.spatialReference);
        for (let n3 = 0; n3 < e.points.length; n3++) t3.push(e.getPoint(n3));
        return t3;
      }
      return null;
    });
  }, x3.functions.issimple = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, o) => {
      if (o = we(o), ie(o, 1, 1, n2, t2), null === o[0]) return true;
      if (!(o[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return J(o[0]);
    });
  }, x3.functions.simplify = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, o) => {
      if (o = we(o), ie(o, 1, 1, n2, t2), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return N2(o[0]);
    });
  }, x3.functions.convexhull = function(n2, t2) {
    return x3.standardFunctionAsync(n2, t2, (i2, a3, o) => {
      if (o = we(o), ie(o, 1, 1, n2, t2), null === o[0]) return null;
      if (!(o[0] instanceof n)) throw new a2(n2, r2.InvalidParameter, t2);
      return j2(o[0]);
    });
  }, x3.functions.getuser = function(i2, a3) {
    return x3.standardFunctionAsync(i2, a3, async (o, l2, u2) => {
      var _a, _b;
      ie(u2, 0, 2, i2, a3);
      let c3 = Y(u2[1], ""), f2 = true === c3;
      if (c3 = true === c3 || false === c3 ? "" : de(c3), 0 === u2.length || u2[0] instanceof t) {
        let n2;
        n2 = ((_a = i2.services) == null ? void 0 : _a.portal) ? i2.services.portal : b.getDefault(), u2.length > 0 && (n2 = l(u2[0], n2));
        const e = await r4(n2, c3, f2);
        if (e) {
          const n3 = JSON.parse(JSON.stringify(e));
          for (const t2 of ["lastLogin", "created", "modified"]) void 0 !== n3[t2] && null !== n3[t2] && (n3[t2] = new Date(n3[t2]));
          return N.convertObjectToArcadeDictionary(n3, Be(i2));
        }
        return null;
      }
      let w3 = null;
      if (K(u2[0]) && (w3 = u2[0]), w3) {
        if (f2 = false, c3) return null;
        await w3.load();
        const e = await w3.getOwningSystemUrl();
        if (!e) {
          if (!c3) {
            const n2 = await w3.getIdentityUser();
            return n2 ? N.convertObjectToArcadeDictionary({ username: n2 }, Be(i2)) : null;
          }
          return null;
        }
        let r5;
        r5 = ((_b = i2.services) == null ? void 0 : _b.portal) ? i2.services.portal : b.getDefault(), r5 = l(new t(e), r5);
        const a4 = await r4(r5, c3, f2);
        if (a4) {
          const n2 = JSON.parse(JSON.stringify(a4));
          for (const t2 of ["lastLogin", "created", "modified"]) void 0 !== n2[t2] && null !== n2[t2] && (n2[t2] = new Date(n2[t2]));
          return N.convertObjectToArcadeDictionary(n2, Be(i2));
        }
        return null;
      }
      throw new a2(i2, r2.InvalidParameter, a3);
    });
  }, x3.functions.nearestcoordinate = function(n2, i2) {
    return x3.standardFunctionAsync(n2, i2, async (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 2, 2, n2, i2), !(u2[0] instanceof n || null === u2[0])) throw new a2(n2, r2.InvalidParameter, i2);
      if (!(u2[1] instanceof j || null === u2[1])) throw new a2(n2, r2.InvalidParameter, i2);
      if (null === u2[0] || null === u2[1]) return null;
      const c3 = await T(u2[0], u2[1]);
      return null === c3 ? null : N.convertObjectToArcadeDictionary({ coordinate: c3.coordinate, distance: c3.distance, sideOfLine: 0 === c3.distance ? "straddle" : c3.isRightSide ? "right" : "left" }, Be(n2), false, true);
    });
  }, x3.functions.nearestvertex = function(n2, i2) {
    return x3.standardFunctionAsync(n2, i2, async (a3, o, u2) => {
      if (u2 = we(u2), ie(u2, 2, 2, n2, i2), !(u2[0] instanceof n || null === u2[0])) throw new a2(n2, r2.InvalidParameter, i2);
      if (!(u2[1] instanceof j || null === u2[1])) throw new a2(n2, r2.InvalidParameter, i2);
      if (null === u2[0] || null === u2[1]) return null;
      const c3 = await V(u2[0], u2[1]);
      return null === c3 ? null : N.convertObjectToArcadeDictionary({ coordinate: c3.coordinate, distance: c3.distance, sideOfLine: 0 === c3.distance ? "straddle" : c3.isRightSide ? "right" : "left" }, Be(n2), false, true);
    });
  });
}

export {
  Rn
};
//# sourceMappingURL=chunk-KICYYNK4.js.map
