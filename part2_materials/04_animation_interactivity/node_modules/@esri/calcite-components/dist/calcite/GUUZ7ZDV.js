/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */
import{a as d,c as u}from"./TL6JRD7M.js";import{b as p}from"./74XIV7EB.js";function f(a,{focusTrapOptions:t},o){return!t?.extraContainers&&!o?a:[a,...l(t?.extraContainers),...l(o)]}function l(a=[]){return Array.isArray(a)?a:[a]}var D=a=>p((t,o)=>{let r,c,s,v=a.focusTrapOptions;o.onConnected(()=>{t[a.triggerProp]&&r&&n.activate()}),o.onUpdate(e=>{t.hasUpdated&&e.has("focusTrapDisabled")&&(t.focusTrapDisabled?n.deactivate():n.activate())}),o.onDisconnected(()=>n.deactivate());let n={activate:()=>{let e=c||t.el;if(e.isConnected){if(!r){let i={...v,...t.focusTrapOptions};s||=f(e,t),r=d(s,u(e,i))}(typeof t.focusTrapDisabledOverride=="function"?!t.focusTrapDisabledOverride():!t.focusTrapDisabled)&&r.activate()}},deactivate:()=>r?.deactivate(),overrideFocusTrapEl:e=>{if(r)throw new Error("Focus trap already created");c=e},setExtraContainers:e=>{let i=c||t.el;s=f(i,t,e)},updateContainerElements:()=>r?.updateContainerElements(s)};return n});export{D as a};
