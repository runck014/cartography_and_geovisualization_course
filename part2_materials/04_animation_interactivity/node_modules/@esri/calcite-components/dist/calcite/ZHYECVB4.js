/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.0.3 */
import{h as R,k as f}from"./DWSKOILM.js";import{c as S,e as F,f as I}from"./OEWDESOU.js";import{a as g}from"./RIMAR2EG.js";import"./DFFLO6RQ.js";import{a as V}from"./MOOKY73S.js";import{a as M}from"./HHWADIGN.js";import{a as p,b as m}from"./SZONZQBZ.js";import{q as C}from"./SXYTJEOC.js";import"./B4YIOD3M.js";import{J as T,e as z,f as h,w as E,x as d,y as u}from"./74XIV7EB.js";var s={container:"container",fill:"fill",stepLine:"step-line",label:"label",labelHidden:"label-hidden",labelRange:"label-range",labelValue:"label-value",unitLabel:"unit-label",stepsVisible:"steps-visible",valueVisible:"value-visible",success:"fill-success",warning:"fill-warning",danger:"fill-danger"},A=z`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host{display:flex;--calcite-meter-space-internal: .125rem;--calcite-meter-height-internal: 1rem;--calcite-meter-font-size-internal: var(--calcite-font-size--1)}:host([scale=s]){--calcite-meter-height-internal: .75rem;--calcite-meter-font-size-internal: var(--calcite-font-size--2)}:host([scale=l]){--calcite-meter-height-internal: 1.5rem;--calcite-meter-font-size-internal: var(--calcite-font-size-0)}.container{position:relative;margin:0;display:flex;inline-size:100%;align-items:center;block-size:var(--calcite-meter-height-internal);background-color:var(--calcite-color-foreground-2);border:1px solid var(--calcite-color-border-3);border-radius:var(--calcite-meter-height-internal)}.solid{border:1px solid var(--calcite-color-foreground-3);background-color:var(--calcite-color-foreground-3)}.outline{background-color:transparent}.value-visible{margin-block-start:1.5rem}.steps-visible{margin-block-end:1.5rem}.step-line{position:absolute;inset-block:0px;display:block;inline-size:var(--calcite-meter-space-internal);background-color:var(--calcite-color-border-3)}.label{position:absolute;font-size:var(--calcite-meter-font-size-internal)}.label-hidden{visibility:hidden;opacity:0}.label-value{inset-block-end:calc(100% + .5em);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-1)}.label-range{color:var(--calcite-color-text-3);inset-block-start:calc(100% + .5em)}.unit-label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-text-3)}.label-value .unit-label{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-color-text-2)}.fill{position:absolute;z-index:var(--calcite-z-index);display:block;background-color:var(--calcite-color-brand);transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);inset-inline-start:var(--calcite-meter-space-internal);inset-block:var(--calcite-meter-space-internal);border-radius:var(--calcite-meter-height-internal);max-inline-size:calc(100% - var(--calcite-meter-space-internal) * 2);min-inline-size:calc(var(--calcite-meter-height-internal) - var(--calcite-meter-space-internal) * 2);transition-property:inline-size,background-color,box-shadow}.fill-danger{background-color:var(--calcite-color-status-danger)}.fill-success{background-color:var(--calcite-color-status-success)}.fill-warning{background-color:var(--calcite-color-status-warning)}.solid .fill{inset-block:0;inset-inline-start:0;max-inline-size:100%;min-inline-size:calc(var(--calcite-meter-height-internal));box-shadow:0 0 0 1px var(--calcite-color-brand)}.solid .fill-danger{box-shadow:0 0 0 1px var(--calcite-color-status-danger)}.solid .fill-success{box-shadow:0 0 0 1px var(--calcite-color-status-success)}.solid .fill-warning{box-shadow:0 0 0 1px var(--calcite-color-status-warning)}@media (forced-colors: active){.fill,.fill-danger,.fill-success,.fill-warning{background-color:Highlight}}`,$=class extends E{constructor(){super(...arguments),this.highLabelEl=p(),this.labelFlipMax=.8,this.labelFlipProximity=.15,this.lowLabelEl=p(),this.maxLabelEl=p(),this.maxPercent=100,this.messages=M({name:null}),this.meterContainerEl=p(),this.minLabelEl=p(),this.minPercent=0,this.resizeObserver=V("resize",()=>this.resizeHandler()),this.valueLabelEl=p(),this.appearance="outline-fill",this.disabled=!1,this.fillType="range",this.groupSeparator=!1,this.max=100,this.min=0,this.rangeLabelType="percent",this.rangeLabels=!1,this.scale="m",this.unitLabel="",this.valueLabel=!1,this.valueLabelType="percent"}static{this.properties={currentPercent:16,highActive:16,highPercent:16,lowActive:16,lowPercent:16,appearance:3,disabled:7,fillType:3,form:3,groupSeparator:7,high:11,label:1,low:11,max:11,min:11,name:3,numberingSystem:1,rangeLabelType:3,rangeLabels:7,scale:3,unitLabel:1,value:9,valueLabel:7,valueLabelType:3}}static{this.styles=A}connectedCallback(){super.connectedCallback(),S(this),this.resizeObserver?.observe(this.el)}load(){this.calculateValues(),I(this,this.value)}willUpdate(e){(e.has("min")&&(this.hasUpdated||this.min!==0)||e.has("max")&&(this.hasUpdated||this.max!==100)||e.has("low")||e.has("high")||e.has("value"))&&this.handleRangeChange(),(e.has("rangeLabels")&&(this.hasUpdated||this.rangeLabels!==!1)||e.has("rangeLabelType")&&(this.hasUpdated||this.rangeLabelType!=="percent")||e.has("unitLabel")&&(this.hasUpdated||this.unitLabel!=="")||e.has("valueLabel")&&(this.hasUpdated||this.valueLabel!==!1)||e.has("valueLabelType")&&(this.hasUpdated||this.valueLabelType!=="percent"))&&this.updateLabels()}loaded(){this.updateLabels()}disconnectedCallback(){super.disconnectedCallback(),F(this),this.resizeObserver?.disconnect()}handleRangeChange(){this.calculateValues(),this.updateLabels()}resizeHandler(){this.updateLabels()}updateLabels(){this.valueLabelEl.value&&this.determineValueLabelPosition(),this.rangeLabels&&this.determineVisibleLabels()}calculateValues(){let{min:e,max:a,low:t,high:i,value:l}=this,n=100*(t-e)/(a-e),r=100*(i-e)/(a-e),c=100*(l-e)/(a-e);(!t||t<e||t>i||t>a)&&(this.low=e),(!i||i>a||i<t||i<e)&&(this.high=a),l||(this.value=e),this.lowPercent=n,this.highPercent=r,this.currentPercent=l?c:0,this.lowActive=!!t&&t>e&&(!l||t>l)&&(!i||t<i),this.highActive=!!i&&e<=i&&i<a&&(!l||i>l)&&(!t||i>t)}formatLabel(e,a){if(a==="percent"){if(!this.percentFormatting){let t=R(this.messages._lang),i=new Intl.NumberFormat(t,{useGrouping:this.groupSeparator,style:"percent"});this.percentFormatting={formatter:i,locale:t}}return this.percentFormatting.formatter.format(e)}else return f.numberFormatOptions={locale:this.messages._lang,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},f.localize(e.toString())}getMeterKindCssClass(){let{low:e,high:a,min:t,max:i,value:l}=this,n=e||t,r=a||i,c=l>=n,b=l<n,v=l>=r,o=l<r;return!l||!e&&o||b?s.success:c&&o?s.warning:v?s.danger:s.success}intersects(e,a){return e&&a&&C(e.getBoundingClientRect(),a.getBoundingClientRect())}determineVisibleLabels(){let{minLabelEl:{value:e},lowLabelEl:{value:a},highLabelEl:{value:t},maxLabelEl:{value:i}}=this,l=this.intersects(t,i),n=this.intersects(a,t),r=this.intersects(a,i),c=this.intersects(e,t),b=this.intersects(e,a),v=this.intersects(e,i),o=s.labelHidden;a&&(b||r||n?a.classList.add(o):a.classList.remove(o)),t&&(c||r||l?t.classList.add(o):t.classList.remove(o)),e&&i&&(v?i.classList.add(o):i.classList.remove(o))}determineValueLabelPosition(){let{valueLabelEl:{value:e},meterContainerEl:{value:a},currentPercent:t}=this,i=t>100?100:t>0?t:0,l=e.getBoundingClientRect().width,n=a.getBoundingClientRect().width,r=100*(l-0)/(n-0);i+r>=100?(e.style.insetInlineEnd="0%",e.style.removeProperty("inset-inline-start")):(e.style.insetInlineStart=`${i}% `,e.style.removeProperty("inset-inline-end"))}renderMeterFill(){let{currentPercent:e,fillType:a}=this,t=this.getMeterKindCssClass();return h`<div class=${d({[s.fill]:!0,[t]:a!=="single"})} style=${u({width:`${e}%`})}></div>`}renderRangeLine(e){let a={insetInlineStart:`${e}%`};return h`<div class=${d(s.stepLine)} style=${u(a)}></div>`}renderValueLabel(){let{currentPercent:e,valueLabelType:a,unitLabel:t,value:i}=this,l=this.formatLabel(a==="percent"?e/100:i||0,a);return g("low-label-line",h`<div class=${d({[s.label]:!0,[s.labelValue]:!0})} ${m(this.valueLabelEl)}>${l}${t&&a!=="percent"&&h`<span class=${d(s.unitLabel)}>&nbsp;${t}</span>`||""}</div>`)}renderMinLabel(){let{rangeLabelType:e,min:a,minPercent:t,unitLabel:i}=this,l={insetInlineStart:`${t}%`},n=this.formatLabel(e==="percent"?t:a,e);return g("min-label-line",h`<div class=${d({[s.label]:!0,[s.labelRange]:!0})} style=${u(l)} ${m(this.minLabelEl)}>${n}${i&&e!=="percent"&&h`<span class=${d(s.unitLabel)}>&nbsp;${i}</span>`||""}</div>`)}renderLowLabel(){let{rangeLabelType:e,low:a,lowPercent:t,highPercent:i,labelFlipProximity:l}=this,n=a?this.formatLabel(e==="percent"?t/100:a,e):"",r={insetInlineStart:`${t}%`},c={insetInlineEnd:`${100-t}%`},b=(i-t)/100<l?c:r;return g("low-label-line",h`<div class=${d({[s.label]:!0,[s.labelRange]:!0})} style=${u(b)} ${m(this.lowLabelEl)}>${n}</div>`)}renderHighLabel(){let{rangeLabelType:e,high:a,highPercent:t,labelFlipMax:i}=this,l=a?this.formatLabel(e==="percent"?t/100:a,e):"",n={insetInlineStart:`${t}%`},r={insetInlineEnd:`${100-t}%`},c=t/100>=i?r:n;return g("high-label-line",h`<div class=${d({[s.label]:!0,[s.labelRange]:!0})} style=${u(c)} ${m(this.highLabelEl)}>${l}</div>`)}renderMaxLabel(){let{rangeLabelType:e,max:a,maxPercent:t}=this,i={insetInlineEnd:`${100-t}%`},l=this.formatLabel(e==="percent"?t/100:a,e);return g("max-label-line",h`<div class=${d({[s.label]:!0,[s.labelRange]:!0})} style=${u(i)} ${m(this.maxLabelEl)}>${l}</div>`)}render(){let{appearance:e,currentPercent:a,highActive:t,highPercent:i,label:l,lowActive:n,lowPercent:r,max:c,maxPercent:b,min:v,minPercent:o,rangeLabels:L,rangeLabelType:y,unitLabel:x,value:w,valueLabel:P,valueLabelType:k}=this,H=this.formatLabel(a/100,"percent"),U=`${w} ${x}`;return h`<div .ariaLabel=${l} .ariaValueMax=${y==="percent"?b:c} .ariaValueMin=${y==="percent"?o:v} .ariaValueNow=${k==="percent"?a:w} .ariaValueText=${k==="percent"?H:x?U:void 0} class=${d({[s.container]:!0,[s.stepsVisible]:L,[s.valueVisible]:P,[e]:e!=="outline-fill"})} role=meter ${m(this.meterContainerEl)}>${this.renderMeterFill()}${P&&this.renderValueLabel()||""}${n&&this.renderRangeLine(r)||""}${t&&this.renderRangeLine(i)||""}${L&&this.renderMinLabel()||""}${L&&n&&this.renderLowLabel()||""}${L&&t&&this.renderHighLabel()||""}${L&&this.renderMaxLabel()||""}</div>`}};T("calcite-meter",$);export{$ as Meter};
