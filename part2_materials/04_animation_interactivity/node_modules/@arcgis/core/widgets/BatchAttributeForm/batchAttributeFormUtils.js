/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
*/
import"../../intl.js";import{neverReached as i}from"../../core/compilerUtils.js";import{DomainValidationError as t}from"../../layers/support/domainUtils.js";import{NumericRangeValidationError as r,TypeValidationError as e}from"../../layers/support/fieldUtils.js";import{ReactiveGraphic as n}from"./ReactiveGraphic.js";import{MultiFeatureError as o,InputVisibilityCode as s}from"./inputs/support/inputUtils.js";import{getIntlOptionsForField as l}from"../support/dateUtils.js";import{InputValidationError as a,getRangeErrorMessage as I,shouldUseScientificNotation as _,scientificNumberFormatOptions as u,numberFormatOptions as E}from"../support/forms/formUtils.js";import{substitute as p}from"../../intl/substitute.js";const m=(i,t)=>null!=i&&i.input?.type===t;function c(i){return new n({original:i})}function f(i,n,s,m){const{dataType:c,minLength:f}=i,N=s?.validationErrors;if(!N||!n)return null;if(n===o.DIFFERENT_ERRORS)return N.invalidBatchFormType;if(n===a.CANNOT_BE_EMPTY)return N.cannotBeNull;if(n===t.VALUE_OUT_OF_RANGE||n===r.OUT_OF_RANGE){const{field:t,range:r}=i,e={type:"date",intlOptions:{timeZone:"date"===t.type&&m?m:void 0,...l(t)}},n=I(r,N);return p(n,r,{format:{max:"date"===c?e:null!=r.max&&_(r.max)?u:E,min:"date"===c?e:null!=r.min&&_(r.min)?u:E}})}return n===t.INVALID_CODED_VALUE?N.invalidCodedValue:n===e.INVALID_TYPE?N.invalidType:n===a.TOO_SHORT?p(N.tooShort,{min:f}):(a.TOO_LONG,null)}function N(t,r,e){const n=e?.validationErrors;if(!n)return null;let o=null;for(const l of t.invalidHiddenInputs)switch(l.effectiveVisibilityCode){case s.HIDDEN_VISIBILITY_EXPRESSION_ALL:case s.HIDDEN_GROUP_VISIBILITY_EXPRESSION_ALL:case s.HIDDEN_FIELD_DEFINITION:return"single"===r?n.nonVisibleError_changeValues:n.nonVisibleError_checkIndividualFeatures;case s.HIDDEN_NO_DOMAIN_IN_COMMON:case s.HIDDEN_VISIBILITY_EXPRESSION_SOME:case s.HIDDEN_GROUP_VISIBILITY_EXPRESSION_SOME:case s.HIDDEN_NOT_IN_ALL_LAYERS:o=n.nonVisibleError_checkIndividualFeatures;break;case s.VISIBLE:continue;default:i(l.effectiveVisibilityCode)}return o}export{c as createReactiveGraphic,N as getHiddenFieldsValidationErrorMessage,f as getVisibleFieldInputValidationErrorMessage,m as isElementTemplateWithInputType};
