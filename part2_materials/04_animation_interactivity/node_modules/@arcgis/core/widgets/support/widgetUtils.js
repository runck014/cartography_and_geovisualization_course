/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
*/
import{Sanitizer as e}from"@esri/arcgis-html-sanitizer";import t from"../../core/ArrayPool.js";import{handlesGroup as n,makeHandle as r}from"../../core/handleUtils.js";import"../../core/has.js";import"../../core/Logger.js";import{signalFromSignalOrOptions as i}from"../../core/promiseUtils.js";import{watch as o,syncAndInitial as s}from"../../core/reactiveUtils.js";import{waitAnimationFrame as a}from"../../core/scheduling.js";import{clearVNodeCache as c}from"./vnodeCache.js";var l,u,d=function(e){if("WebkitTransition"in e.style)l="webkitTransitionEnd",u="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");l="transitionend",u="animationend"}},f=function(e){l||d(e)},m=function(e,t){return void 0===t&&(t=e+"-active"),function(n){f(n);var r=!1,i=function(o){r||(r=!0,n.removeEventListener(l,i),n.removeEventListener(u,i),n.classList.remove(e),n.classList.remove(t))};n.classList.add(e),n.addEventListener(l,i),n.addEventListener(u,i),requestAnimationFrame((function(){n.classList.add(t)}))}},p=function(e,t){return void 0===t&&(t=e+"-active"),function(n,r){f(n);var i=!1,o=function(e){i||(i=!0,n.removeEventListener(l,o),n.removeEventListener(u,o),r())};n.classList.add(e),n.addEventListener(l,o),n.addEventListener(u,o),requestAnimationFrame((function(){n.classList.add(t)}))}};function v(...e){const n=t.acquire();for(let t=0;t<e.length;t++){const r=e[t],i=typeof r;if("string"===i)n.push(r);else if(Array.isArray(r))n.push.apply(n,r);else if("object"===i)for(const e in r)r[e]&&n.push(e)}const r=n.join(" ");return t.release(n),r}const h=(()=>{const e=new Map,t=new ResizeObserver((t=>{c();for(const n of t)e.get(n.target)?.(n)})),i=(n,i,o)=>(e.set(n,i),t.observe(n,o),r((()=>{t.unobserve(n),e.delete(n)})));return(e,t,a)=>{let c=null;return n([o((()=>"function"==typeof e?e():e),(e=>{c?.remove(),e&&(c=i(e,t,a))}),s),r((()=>c?.remove()))])}})();function g(e){const t=e?.closest("[dir]");return null!==t&&t instanceof HTMLElement&&"rtl"===t.dir||"rtl"===document.dir}function L(e,t){return("enter"===e?m:p)(t)}function w(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function y(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const b=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup",...["animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"]],E=b.reduce(((e,t)=>(e[t]=[],e)),{}),j=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],A=new e({whiteList:E,onTagAttr:(e,t,n)=>{const r=`${t}="${n}"`;if(j.includes(t))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function k(e){return"Enter"===e||" "===e}async function T(e,t){await a(i(t));const n="function"==typeof e?e():e;n&&("setFocus"in n&&"function"==typeof n.setFocus?await n.setFocus():n instanceof HTMLElement&&n.focus())}export{b as additionalAllowedTags,v as classes,L as cssTransition,w as discardNode,k as isActivationKey,g as isRTL,h as onResize,A as renderingSanitizer,j as safeAttrs,T as setFocus,y as storeNode};
