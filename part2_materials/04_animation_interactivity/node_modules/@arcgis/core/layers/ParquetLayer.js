/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import r from"../PopupTemplate.js";import t from"../core/Clonable.js";import o from"../core/Collection.js";import{MultiOriginJSONMixin as i}from"../core/MultiOriginJSONSupport.js";import{property as s}from"../core/accessorSupport/decorators/property.js";import{subclass as p}from"../core/accessorSupport/decorators/subclass.js";import n from"../geometry/SpatialReference.js";import l from"./Layer.js";import{ParquetSource as a}from"./graphics/sources/ParquetSource.js";import{BlendLayer as m}from"./mixins/BlendLayer.js";import{CustomParametersMixin as d}from"./mixins/CustomParametersMixin.js";import{DisplayFilteredLayer as u}from"./mixins/DisplayFilteredLayer.js";import{FeatureEffectLayer as y}from"./mixins/FeatureEffectLayer.js";import{FeatureReductionLayer as f}from"./mixins/FeatureReductionLayer.js";import{OperationalLayer as c}from"./mixins/OperationalLayer.js";import{OrderedLayer as j}from"./mixins/OrderedLayer.js";import{PortalLayer as h}from"./mixins/PortalLayer.js";import{ScaleRangeLayer as g}from"./mixins/ScaleRangeLayer.js";import{TemporalLayer as I}from"./mixins/TemporalLayer.js";import{labelsVisible as v}from"./support/commonProperties.js";import b from"./support/FeatureTemplate.js";import x from"./support/Field.js";import{defineFieldProperties as F}from"./support/fieldProperties.js";import{fixRendererFields as S,fixTimeInfoFields as P}from"./support/fieldUtils.js";import w from"./support/LabelClass.js";import{reader as L}from"./support/labelingInfo.js";import{parquetGeometryTypeKebabDict as T}from"./support/parquetLayerUtils.js";import{rendererTypes as O}from"../renderers/support/typeUtils.js";import R from"../rest/support/Query.js";import{createPopupTemplate as q}from"../support/popupUtils.js";const D=F();let C=class extends(u(f(y(m(j(I(g(c(h(i(d(t.ClonableMixin(l))))))))))))){constructor(e){super(e),this.copyright=null,this.fields=null,this.fieldsIndex=null,this.geometrySourceInfo=null,this.metadata=null,this.labelsVisible=!0,this.labelingInfo=null,this.objectIdField=null,this.outFields=null,this.popupTemplate=null,this.source=null,this.spatialReference=n.WGS84,this.templates=null,this.title="Parquet",this.type="parquet",this.urls=new o}async load(e){return this.addResolvingPromise(this._load(e)),this}get defaultPopupTemplate(){return this.createPopupTemplate()}get geometryType(){return this.source.geometryInfo.geometryType}set renderer(e){S(e,this.fieldsIndex),this._set("renderer",e)}createPopupTemplate(e){return q(this,e)}createQuery(){const e=new R;return e.returnGeometry=!0,e.outFields=["*"],e}async createSource(e){const r=new a({loadOptions:{objectIdField:this.objectIdField,geometrySourceInfo:this.geometrySourceInfo,url:this.urls.getItemAt(0)??"",metadata:this.metadata},customParameters:this.customParameters??void 0});return await r.load(e),r}getFieldDomain(e,r){return null}getField(e){return this.fieldsIndex.get(e)}async _load(e){const r=await this.createSource(e);this._set("source",r),this.read(r.sourceJSON,{origin:"service"}),this.revert(["objectIdField","fields","timeInfo"],"service"),S(this.renderer,this.fieldsIndex),P(this.timeInfo,this.fieldsIndex)}};e([s({type:String})],C.prototype,"copyright",void 0),e([s({readOnly:!0})],C.prototype,"defaultPopupTemplate",null),e([s({type:[x],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],C.prototype,"fields",void 0),e([s(D.fieldsIndex)],C.prototype,"fieldsIndex",void 0),e([s({type:Object})],C.prototype,"geometrySourceInfo",void 0),e([s({json:{read:{reader:T.read}}})],C.prototype,"geometryType",null),e([s()],C.prototype,"metadata",void 0),e([s(v)],C.prototype,"labelsVisible",void 0),e([s({type:[w],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:L},write:!0}})],C.prototype,"labelingInfo",void 0),e([s({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],C.prototype,"objectIdField",void 0),e([s(D.outFields)],C.prototype,"outFields",void 0),e([s({type:r,json:{name:"popupInfo",write:!0}})],C.prototype,"popupTemplate",void 0),e([s({types:O,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"}}}})],C.prototype,"renderer",null),e([s({json:{read:!1},cast:null,type:a,readOnly:!0})],C.prototype,"source",void 0),e([s({type:n})],C.prototype,"spatialReference",void 0),e([s({type:[b]})],C.prototype,"templates",void 0),e([s()],C.prototype,"title",void 0),e([s({json:{read:!1},readOnly:!0})],C.prototype,"type",void 0),e([s({type:o.ofType(String)})],C.prototype,"urls",void 0),C=e([p("esri.layers.ParquetLayer")],C);const _=C;export{_ as default};
