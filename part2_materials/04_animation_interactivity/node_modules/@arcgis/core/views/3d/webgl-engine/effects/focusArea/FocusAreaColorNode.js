/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../../chunks/tslib.es6.js";import{property as r}from"../../../../../core/accessorSupport/decorators/property.js";import"../../../../../core/has.js";import"../../../../../core/Logger.js";import"../../../../../core/RandomLCG.js";import{subclass as s}from"../../../../../core/accessorSupport/decorators/subclass.js";import{RenderCategory as o,InternalRenderCategory as t}from"../../../webgl.js";import i from"../../../webgl/RenderNode.js";import{FocusAreaColorTechnique as c}from"./FocusAreaColorTechnique.js";import{F as a}from"../../../../../chunks/FocusAreaColor.glsl.js";let n=class extends i{constructor(e){super({...e,view:e.focusAreas.view}),this.consumes={required:[o.COMPOSITE,t.FOCUSAREA]},this.produces=o.COMPOSITE,this._passParameters=new a}precompile(){this.techniques.precompile(c)}render(e){const r=this.techniques.get(c),s=e.find((({name:e})=>e===o.COMPOSITE));if(!r.compiled)return this.requestRender(),s;const i=this.bindParameters,a=i.camera,n=a.fullViewport[2],p=a.fullViewport[3],m=e.find((({name:e})=>e===t.FOCUSAREA)),h=this.fboCache.acquire(n,p,this.produces),d=this.renderingContext;return d.gl.clear(d.gl.STENCIL_BUFFER_BIT),d.bindFramebuffer(h.fbo),this._passParameters.color=s.getTexture(),this._passParameters.focusArea=m.getTexture(),this._passParameters.effect=u[this.focusAreas.style],d.bindTechnique(r,i,this._passParameters),d.screen.draw(),h.attachDepth(s.getAttachment(this.gl.DEPTH_STENCIL_ATTACHMENT)),h}};var p;e([r()],n.prototype,"consumes",void 0),e([r()],n.prototype,"produces",void 0),e([r({constructOnly:!0})],n.prototype,"focusAreas",void 0),n=e([s("esri.views.3d.webgl-engine.effects.focusArea.FocusAreaColorNode")],n),function(e){e[e.NONE=0]="NONE",e[e.BRIGHT=1]="BRIGHT",e[e.DARK=2]="DARK"}(p||(p={}));const u={none:p.NONE,bright:p.BRIGHT,dark:p.DARK};export{n as FocusAreaColorNode};
