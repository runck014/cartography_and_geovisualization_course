/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
*/
import{ZEROS as e}from"../../../../core/libs/gl-matrix-2/factories/vec4f64.js";import{isColorOrColorEmission as r,ShaderOutput as t}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as s}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as i}from"../core/shaderTechnique/ShaderTechnique.js";import{OITPass as l}from"../lib/OITPass.js";import{blending as o,oitDepthTest as n,depthWrite as a,getDrawBuffers as c,getOITPolygonOffset as p}from"../lib/OrderIndependentTransparency.js";import{stencilWriteMaskOn as u,stencilToolMaskBaseParams as m,stencilBaseAllZerosParams as f}from"../lib/StencilUtils.js";import{VisualVariablePassParameters as d}from"../materials/VisualVariablePassParameters.js";import{C as h}from"../../../../chunks/ColorMaterial.glsl.js";import{SpecialDrawBuffers as b}from"../../../webgl/enums.js";import{makePipelineState as j,cullingParams as P,defaultColorWrite as g}from"../../../webgl/renderState.js";class O extends d{constructor(){super(...arguments),this.color=e}}class S extends i{constructor(e,r){super(e,r,new s(h,(()=>import("./ColorMaterial.glsl.js"))))}_createPipeline(e,s){const{oitPass:i,output:d,transparent:h,cullFace:O,draped:S,hasOccludees:_,polygonOffset:w,enableOffset:x}=e,y=i===l.NONE,N=i===l.FrontFace;return j({blending:r(d)&&h?o(i):null,culling:P(O),depthTest:S?null:{func:n(i)},depthWrite:a(e),drawBuffers:d===t.Depth?{buffers:[b.NONE]}:c(i,d),colorWrite:g,stencilWrite:_?u:null,stencilTest:_?s?m:f:null,polygonOffset:y||N?w?T:null:p(x)})}initializePipeline(e){return this._occludeePipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const T={factor:1,units:1};export{O as ColorMaterialPassParameters,S as ColorMaterialTechnique};
