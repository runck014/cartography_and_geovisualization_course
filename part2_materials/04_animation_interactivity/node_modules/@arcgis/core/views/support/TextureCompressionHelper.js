/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
*/
import e from"../../core/Logger.js";import{destroyMaybe as r}from"../../core/maybe.js";import{makeScheduleFunction as o}from"../3d/layers/support/makeScheduleFunction.js";import{TextureCompressionWorkerHandle as n}from"../3d/webgl-engine/lib/TextureCompressionWorkerHandle.js";import{Texture as s}from"../webgl/Texture.js";const t=new Set,i=()=>e.getLogger("esri/views/support/TextureCompressionHelper");function m(e,r){return s.compressionWorkerHandle??=new n(o(r)),t.has(e)?i().warn("Repeated texture compression worker initialization by the same view."):t.add(e),s.compressionWorkerHandle}function p(e){s.compressionWorkerHandle&&(t.delete(e)||i().warn("Unknown view attempted to destroy the texture compression worker."),t.size||(r(s.compressionWorkerHandle),s.compressionWorkerHandle=null))}export{p as destroyTextureCompressionWorker,m as initializeTextureCompressionWorker};
